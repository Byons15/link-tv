import{r as Sr,o as te,c as se,a as Me,g as Ar,d as Be,b as H,e as We,n as Ne,w as Qe,f as Nt,h as T,i as Oe,t as we,F as Vt,j as wr,k as yt,l as Lr,m as ke,v as Ue,p as Pe,q as it,s as st,u as bt,x as ot,y as Wt,z as Cr,A as Rr,B as Dr}from"./vendor.7e5ab908.js";const Or=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))_(r);new MutationObserver(r=>{for(const h of r)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&_(x)}).observe(document,{childList:!0,subtree:!0});function t(r){const h={};return r.integrity&&(h.integrity=r.integrity),r.referrerpolicy&&(h.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?h.credentials="include":r.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function _(r){if(r.ep)return;r.ep=!0;const h=t(r);fetch(r.href,h)}};Or();var Ke=(g,e)=>{const t=g.__vccOpts||g;for(const[_,r]of e)t[_]=r;return t};const Tr={};function Pr(g,e){const t=Sr("router-view");return te(),se("div",null,[Me(t)])}var Ir=Ke(Tr,[["render",Pr]]);var zt={exports:{}};(function(g,e){(function(_,r){g.exports=r()})(self,function(){return function(){var t={"./node_modules/es6-promise/dist/es6-promise.js":function(x,y,E){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(b,u){x.exports=u()})(this,function(){function b(I){var B=typeof I;return I!==null&&(B==="object"||B==="function")}function u(I){return typeof I=="function"}var l=void 0;Array.isArray?l=Array.isArray:l=function(I){return Object.prototype.toString.call(I)==="[object Array]"};var o=l,v=0,s=void 0,f=void 0,p=function(B,k){C[v]=B,C[v+1]=k,v+=2,v===2&&(f?f(O):P())};function d(I){f=I}function i(I){p=I}var c=typeof window!="undefined"?window:void 0,a=c||{},n=a.MutationObserver||a.WebKitMutationObserver,m=typeof self=="undefined"&&typeof process!="undefined"&&{}.toString.call(process)==="[object process]",S=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";function w(){return function(){return process.nextTick(O)}}function D(){return typeof s!="undefined"?function(){s(O)}:L()}function R(){var I=0,B=new n(O),k=document.createTextNode("");return B.observe(k,{characterData:!0}),function(){k.data=I=++I%2}}function A(){var I=new MessageChannel;return I.port1.onmessage=O,function(){return I.port2.postMessage(0)}}function L(){var I=setTimeout;return function(){return I(O,1)}}var C=new Array(1e3);function O(){for(var I=0;I<v;I+=2){var B=C[I],k=C[I+1];B(k),C[I]=void 0,C[I+1]=void 0}v=0}function F(){try{var I=Function("return this")().require("vertx");return s=I.runOnLoop||I.runOnContext,D()}catch{return L()}}var P=void 0;m?P=w():n?P=R():S?P=A():c===void 0?P=F():P=L();function M(I,B){var k=this,W=new this.constructor(z);W[K]===void 0&&Ae(W);var G=k._state;if(G){var J=arguments[G-1];p(function(){return Y(G,W,J,k._result)})}else ce(k,W,I,B);return W}function V(I){var B=this;if(I&&typeof I=="object"&&I.constructor===B)return I;var k=new B(z);return le(k,I),k}var K=Math.random().toString(36).substring(2);function z(){}var Q=void 0,X=1,N=2;function q(){return new TypeError("You cannot resolve a promise with itself")}function ye(){return new TypeError("A promises callback cannot return that same promise.")}function ie(I,B,k,W){try{I.call(B,k,W)}catch(G){return G}}function ne(I,B,k){p(function(W){var G=!1,J=ie(k,B,function(ae){G||(G=!0,B!==ae?le(W,ae):Z(W,ae))},function(ae){G||(G=!0,j(W,ae))},"Settle: "+(W._label||" unknown promise"));!G&&J&&(G=!0,j(W,J))},I)}function he(I,B){B._state===X?Z(I,B._result):B._state===N?j(I,B._result):ce(B,void 0,function(k){return le(I,k)},function(k){return j(I,k)})}function ue(I,B,k){B.constructor===I.constructor&&k===M&&B.constructor.resolve===V?he(I,B):k===void 0?Z(I,B):u(k)?ne(I,B,k):Z(I,B)}function le(I,B){if(I===B)j(I,q());else if(b(B)){var k=void 0;try{k=B.then}catch(W){j(I,W);return}ue(I,B,k)}else Z(I,B)}function ve(I){I._onerror&&I._onerror(I._result),U(I)}function Z(I,B){I._state===Q&&(I._result=B,I._state=X,I._subscribers.length!==0&&p(U,I))}function j(I,B){I._state===Q&&(I._state=N,I._result=B,p(ve,I))}function ce(I,B,k,W){var G=I._subscribers,J=G.length;I._onerror=null,G[J]=B,G[J+X]=k,G[J+N]=W,J===0&&I._state&&p(U,I)}function U(I){var B=I._subscribers,k=I._state;if(B.length!==0){for(var W=void 0,G=void 0,J=I._result,ae=0;ae<B.length;ae+=3)W=B[ae],G=B[ae+k],W?Y(k,W,G,J):G(J);I._subscribers.length=0}}function Y(I,B,k,W){var G=u(k),J=void 0,ae=void 0,Se=!0;if(G){try{J=k(W)}catch($e){Se=!1,ae=$e}if(B===J){j(B,ye());return}}else J=W;B._state!==Q||(G&&Se?le(B,J):Se===!1?j(B,ae):I===X?Z(B,J):I===N&&j(B,J))}function ee(I,B){try{B(function(W){le(I,W)},function(W){j(I,W)})}catch(k){j(I,k)}}var de=0;function be(){return de++}function Ae(I){I[K]=de++,I._state=void 0,I._result=void 0,I._subscribers=[]}function me(){return new Error("Array Methods must be provided an Array")}var oe=function(){function I(B,k){this._instanceConstructor=B,this.promise=new B(z),this.promise[K]||Ae(this.promise),o(k)?(this.length=k.length,this._remaining=k.length,this._result=new Array(this.length),this.length===0?Z(this.promise,this._result):(this.length=this.length||0,this._enumerate(k),this._remaining===0&&Z(this.promise,this._result))):j(this.promise,me())}return I.prototype._enumerate=function(k){for(var W=0;this._state===Q&&W<k.length;W++)this._eachEntry(k[W],W)},I.prototype._eachEntry=function(k,W){var G=this._instanceConstructor,J=G.resolve;if(J===V){var ae=void 0,Se=void 0,$e=!1;try{ae=k.then}catch(Ze){$e=!0,Se=Ze}if(ae===M&&k._state!==Q)this._settledAt(k._state,W,k._result);else if(typeof ae!="function")this._remaining--,this._result[W]=k;else if(G===fe){var je=new G(z);$e?j(je,Se):ue(je,k,ae),this._willSettleAt(je,W)}else this._willSettleAt(new G(function(Ze){return Ze(k)}),W)}else this._willSettleAt(J(k),W)},I.prototype._settledAt=function(k,W,G){var J=this.promise;J._state===Q&&(this._remaining--,k===N?j(J,G):this._result[W]=G),this._remaining===0&&Z(J,this._result)},I.prototype._willSettleAt=function(k,W){var G=this;ce(k,void 0,function(J){return G._settledAt(X,W,J)},function(J){return G._settledAt(N,W,J)})},I}();function re(I){return new oe(this,I).promise}function ge(I){var B=this;return o(I)?new B(function(k,W){for(var G=I.length,J=0;J<G;J++)B.resolve(I[J]).then(k,W)}):new B(function(k,W){return W(new TypeError("You must pass an array to race."))})}function Fe(I){var B=this,k=new B(z);return j(k,I),k}function Re(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function De(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var fe=function(){function I(B){this[K]=be(),this._result=this._state=void 0,this._subscribers=[],z!==B&&(typeof B!="function"&&Re(),this instanceof I?ee(this,B):De())}return I.prototype.catch=function(k){return this.then(null,k)},I.prototype.finally=function(k){var W=this,G=W.constructor;return u(k)?W.then(function(J){return G.resolve(k()).then(function(){return J})},function(J){return G.resolve(k()).then(function(){throw J})}):W.then(k,k)},I}();fe.prototype.then=M,fe.all=re,fe.race=ge,fe.resolve=V,fe.reject=Fe,fe._setScheduler=d,fe._setAsap=i,fe._asap=p;function nt(){var I=void 0;if(typeof E.g!="undefined")I=E.g;else if(typeof self!="undefined")I=self;else try{I=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var B=I.Promise;if(B){var k=null;try{k=Object.prototype.toString.call(B.resolve())}catch{}if(k==="[object Promise]"&&!B.cast)return}I.Promise=fe}return fe.polyfill=nt,fe.Promise=fe,fe})},"./node_modules/events/events.js":function(x){var y=typeof Reflect=="object"?Reflect:null,E=y&&typeof y.apply=="function"?y.apply:function(L,C,O){return Function.prototype.apply.call(L,C,O)},b;y&&typeof y.ownKeys=="function"?b=y.ownKeys:Object.getOwnPropertySymbols?b=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:b=function(L){return Object.getOwnPropertyNames(L)};function u(A){console&&console.warn&&console.warn(A)}var l=Number.isNaN||function(L){return L!==L};function o(){o.init.call(this)}x.exports=o,x.exports.once=w,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var v=10;function s(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(A){if(typeof A!="number"||A<0||l(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");v=A}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||l(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function f(A){return A._maxListeners===void 0?o.defaultMaxListeners:A._maxListeners}o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(L){for(var C=[],O=1;O<arguments.length;O++)C.push(arguments[O]);var F=L==="error",P=this._events;if(P!==void 0)F=F&&P.error===void 0;else if(!F)return!1;if(F){var M;if(C.length>0&&(M=C[0]),M instanceof Error)throw M;var V=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw V.context=M,V}var K=P[L];if(K===void 0)return!1;if(typeof K=="function")E(K,this,C);else for(var z=K.length,Q=n(K,z),O=0;O<z;++O)E(Q[O],this,C);return!0};function p(A,L,C,O){var F,P,M;if(s(C),P=A._events,P===void 0?(P=A._events=Object.create(null),A._eventsCount=0):(P.newListener!==void 0&&(A.emit("newListener",L,C.listener?C.listener:C),P=A._events),M=P[L]),M===void 0)M=P[L]=C,++A._eventsCount;else if(typeof M=="function"?M=P[L]=O?[C,M]:[M,C]:O?M.unshift(C):M.push(C),F=f(A),F>0&&M.length>F&&!M.warned){M.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=A,V.type=L,V.count=M.length,u(V)}return A}o.prototype.addListener=function(L,C){return p(this,L,C,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(L,C){return p(this,L,C,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(A,L,C){var O={fired:!1,wrapFn:void 0,target:A,type:L,listener:C},F=d.bind(O);return F.listener=C,O.wrapFn=F,F}o.prototype.once=function(L,C){return s(C),this.on(L,i(this,L,C)),this},o.prototype.prependOnceListener=function(L,C){return s(C),this.prependListener(L,i(this,L,C)),this},o.prototype.removeListener=function(L,C){var O,F,P,M,V;if(s(C),F=this._events,F===void 0)return this;if(O=F[L],O===void 0)return this;if(O===C||O.listener===C)--this._eventsCount==0?this._events=Object.create(null):(delete F[L],F.removeListener&&this.emit("removeListener",L,O.listener||C));else if(typeof O!="function"){for(P=-1,M=O.length-1;M>=0;M--)if(O[M]===C||O[M].listener===C){V=O[M].listener,P=M;break}if(P<0)return this;P===0?O.shift():m(O,P),O.length===1&&(F[L]=O[0]),F.removeListener!==void 0&&this.emit("removeListener",L,V||C)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(L){var C,O,F;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[L]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete O[L]),this;if(arguments.length===0){var P=Object.keys(O),M;for(F=0;F<P.length;++F)M=P[F],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=O[L],typeof C=="function")this.removeListener(L,C);else if(C!==void 0)for(F=C.length-1;F>=0;F--)this.removeListener(L,C[F]);return this};function c(A,L,C){var O=A._events;if(O===void 0)return[];var F=O[L];return F===void 0?[]:typeof F=="function"?C?[F.listener||F]:[F]:C?S(F):n(F,F.length)}o.prototype.listeners=function(L){return c(this,L,!0)},o.prototype.rawListeners=function(L){return c(this,L,!1)},o.listenerCount=function(A,L){return typeof A.listenerCount=="function"?A.listenerCount(L):a.call(A,L)},o.prototype.listenerCount=a;function a(A){var L=this._events;if(L!==void 0){var C=L[A];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]};function n(A,L){for(var C=new Array(L),O=0;O<L;++O)C[O]=A[O];return C}function m(A,L){for(;L+1<A.length;L++)A[L]=A[L+1];A.pop()}function S(A){for(var L=new Array(A.length),C=0;C<L.length;++C)L[C]=A[C].listener||A[C];return L}function w(A,L){return new Promise(function(C,O){function F(M){A.removeListener(L,P),O(M)}function P(){typeof A.removeListener=="function"&&A.removeListener("error",F),C([].slice.call(arguments))}R(A,L,P,{once:!0}),L!=="error"&&D(A,F,{once:!0})})}function D(A,L,C){typeof A.on=="function"&&R(A,"error",L,C)}function R(A,L,C,O){if(typeof A.on=="function")O.once?A.once(L,C):A.on(L,C);else if(typeof A.addEventListener=="function")A.addEventListener(L,function F(P){O.once&&A.removeEventListener(L,F),C(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}},"./node_modules/webworkify-webpack/index.js":function(x,y,E){function b(d){var i={};function c(n){if(i[n])return i[n].exports;var m=i[n]={i:n,l:!1,exports:{}};return d[n].call(m.exports,m,m.exports,c),m.l=!0,m.exports}c.m=d,c.c=i,c.i=function(n){return n},c.d=function(n,m,S){c.o(n,m)||Object.defineProperty(n,m,{configurable:!1,enumerable:!0,get:S})},c.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},c.n=function(n){var m=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(m,"a",m),m},c.o=function(n,m){return Object.prototype.hasOwnProperty.call(n,m)},c.p="/",c.oe=function(n){throw console.error(n),n};var a=c(c.s=ENTRY_MODULE);return a.default||a}var u="[\\.|\\-|\\+|\\w|/|@]+",l="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+u+").*?\\)";function o(d){return(d+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function v(d){return!isNaN(1*d)}function s(d,i,c){var a={};a[c]=[];var n=i.toString(),m=n.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!m)return a;for(var S=m[1],w=new RegExp("(\\\\n|\\W)"+o(S)+l,"g"),D;D=w.exec(n);)D[3]!=="dll-reference"&&a[c].push(D[3]);for(w=new RegExp("\\("+o(S)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+l,"g");D=w.exec(n);)d[D[2]]||(a[c].push(D[1]),d[D[2]]=E(D[1]).m),a[D[2]]=a[D[2]]||[],a[D[2]].push(D[4]);for(var R=Object.keys(a),A=0;A<R.length;A++)for(var L=0;L<a[R[A]].length;L++)v(a[R[A]][L])&&(a[R[A]][L]=1*a[R[A]][L]);return a}function f(d){var i=Object.keys(d);return i.reduce(function(c,a){return c||d[a].length>0},!1)}function p(d,i){for(var c={main:[i]},a={main:[]},n={main:{}};f(c);)for(var m=Object.keys(c),S=0;S<m.length;S++){var w=m[S],D=c[w],R=D.pop();if(n[w]=n[w]||{},!(n[w][R]||!d[w][R])){n[w][R]=!0,a[w]=a[w]||[],a[w].push(R);for(var A=s(d,d[w][R],w),L=Object.keys(A),C=0;C<L.length;C++)c[L[C]]=c[L[C]]||[],c[L[C]]=c[L[C]].concat(A[L[C]])}}return a}x.exports=function(d,i){i=i||{};var c={main:E.m},a=i.all?{main:Object.keys(c.main)}:p(c,d),n="";Object.keys(a).filter(function(R){return R!=="main"}).forEach(function(R){for(var A=0;a[R][A];)A++;a[R].push(A),c[R][A]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",n=n+"var "+R+" = ("+b.toString().replace("ENTRY_MODULE",JSON.stringify(A))+")({"+a[R].map(function(L){return""+JSON.stringify(L)+": "+c[R][L].toString()}).join(",")+`});
`}),n=n+"new (("+b.toString().replace("ENTRY_MODULE",JSON.stringify(d))+")({"+a.main.map(function(R){return""+JSON.stringify(R)+": "+c.main[R].toString()}).join(",")+"}))(self);";var m=new window.Blob([n],{type:"text/javascript"});if(i.bare)return m;var S=window.URL||window.webkitURL||window.mozURL||window.msURL,w=S.createObjectURL(m),D=new window.Worker(w);return D.objectURL=w,D}},"./src/config.js":function(x,y,E){E.r(y),E.d(y,{defaultConfig:function(){return b},createDefaultConfig:function(){return u}});var b={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:3*60,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:3*60,autoCleanupMinBackwardDuration:2*60,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function u(){return Object.assign({},b)}},"./src/core/features.js":function(x,y,E){E.r(y);var b=E("./src/io/io-controller.js"),u=E("./src/config.js"),l=function(){function o(){}return o.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},o.supportNetworkStreamIO=function(){var v=new b.default({},(0,u.createDefaultConfig)()),s=v.loaderType;return v.destroy(),s=="fetch-stream-loader"||s=="xhr-moz-chunked-loader"},o.getNetworkLoaderTypeName=function(){var v=new b.default({},(0,u.createDefaultConfig)()),s=v.loaderType;return v.destroy(),s},o.supportNativeMediaPlayback=function(v){o.videoElement==null&&(o.videoElement=window.document.createElement("video"));var s=o.videoElement.canPlayType(v);return s==="probably"||s=="maybe"},o.getFeatureList=function(){var v={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return v.mseFlvPlayback=o.supportMSEH264Playback(),v.networkStreamIO=o.supportNetworkStreamIO(),v.networkLoaderName=o.getNetworkLoaderTypeName(),v.mseLiveFlvPlayback=v.mseFlvPlayback&&v.networkStreamIO,v.nativeMP4H264Playback=o.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),v.nativeWebmVP8Playback=o.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),v.nativeWebmVP9Playback=o.supportNativeMediaPlayback('video/webm; codecs="vp9"'),v},o}();y.default=l},"./src/core/media-info.js":function(x,y,E){E.r(y);var b=function(){function u(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return u.prototype.isComplete=function(){var l=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,o=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&this.duration!=null&&this.metadata!=null&&this.hasKeyframesIndex!=null&&l&&o},u.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},u.prototype.getNearestKeyframe=function(l){if(this.keyframesIndex==null)return null;var o=this.keyframesIndex,v=this._search(o.times,l);return{index:v,milliseconds:o.times[v],fileposition:o.filepositions[v]}},u.prototype._search=function(l,o){var v=0,s=l.length-1,f=0,p=0,d=s;for(o<l[0]&&(v=0,p=d+1);p<=d;)if(f=p+Math.floor((d-p)/2),f===s||o>=l[f]&&o<l[f+1]){v=f;break}else l[f]<o?p=f+1:d=f-1;return v},u}();y.default=b},"./src/core/media-segment-info.js":function(x,y,E){E.r(y),E.d(y,{SampleInfo:function(){return b},MediaSegmentInfo:function(){return u},IDRSampleList:function(){return l},MediaSegmentInfoList:function(){return o}});var b=function(){function v(s,f,p,d,i){this.dts=s,this.pts=f,this.duration=p,this.originalDts=d,this.isSyncPoint=i,this.fileposition=null}return v}(),u=function(){function v(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return v.prototype.appendSyncPoint=function(s){s.isSyncPoint=!0,this.syncPoints.push(s)},v}(),l=function(){function v(){this._list=[]}return v.prototype.clear=function(){this._list=[]},v.prototype.appendArray=function(s){var f=this._list;s.length!==0&&(f.length>0&&s[0].originalDts<f[f.length-1].originalDts&&this.clear(),Array.prototype.push.apply(f,s))},v.prototype.getLastSyncPointBeforeDts=function(s){if(this._list.length==0)return null;var f=this._list,p=0,d=f.length-1,i=0,c=0,a=d;for(s<f[0].dts&&(p=0,c=a+1);c<=a;)if(i=c+Math.floor((a-c)/2),i===d||s>=f[i].dts&&s<f[i+1].dts){p=i;break}else f[i].dts<s?c=i+1:a=i-1;return this._list[p]},v}(),o=function(){function v(s){this._type=s,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(v.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),v.prototype.isEmpty=function(){return this._list.length===0},v.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},v.prototype._searchNearestSegmentBefore=function(s){var f=this._list;if(f.length===0)return-2;var p=f.length-1,d=0,i=0,c=p,a=0;if(s<f[0].originalBeginDts)return a=-1,a;for(;i<=c;)if(d=i+Math.floor((c-i)/2),d===p||s>f[d].lastSample.originalDts&&s<f[d+1].originalBeginDts){a=d;break}else f[d].originalBeginDts<s?i=d+1:c=d-1;return a},v.prototype._searchNearestSegmentAfter=function(s){return this._searchNearestSegmentBefore(s)+1},v.prototype.append=function(s){var f=this._list,p=s,d=this._lastAppendLocation,i=0;d!==-1&&d<f.length&&p.originalBeginDts>=f[d].lastSample.originalDts&&(d===f.length-1||d<f.length-1&&p.originalBeginDts<f[d+1].originalBeginDts)?i=d+1:f.length>0&&(i=this._searchNearestSegmentBefore(p.originalBeginDts)+1),this._lastAppendLocation=i,this._list.splice(i,0,p)},v.prototype.getLastSegmentBefore=function(s){var f=this._searchNearestSegmentBefore(s);return f>=0?this._list[f]:null},v.prototype.getLastSampleBefore=function(s){var f=this.getLastSegmentBefore(s);return f!=null?f.lastSample:null},v.prototype.getLastSyncPointBefore=function(s){for(var f=this._searchNearestSegmentBefore(s),p=this._list[f].syncPoints;p.length===0&&f>0;)f--,p=this._list[f].syncPoints;return p.length>0?p[p.length-1]:null},v}()},"./src/core/mse-controller.js":function(x,y,E){E.r(y);var b=E("./node_modules/events/events.js"),u=E.n(b),l=E("./src/utils/logger.js"),o=E("./src/utils/browser.js"),v=E("./src/core/mse-events.js"),s=E("./src/core/media-segment-info.js"),f=E("./src/utils/exception.js"),p=function(){function d(i){this.TAG="MSEController",this._config=i,this._emitter=new(u()),this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new s.IDRSampleList}return d.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},d.prototype.on=function(i,c){this._emitter.addListener(i,c)},d.prototype.off=function(i,c){this._emitter.removeListener(i,c)},d.prototype.attachMediaElement=function(i){if(this._mediaSource)throw new f.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var c=this._mediaSource=new window.MediaSource;c.addEventListener("sourceopen",this.e.onSourceOpen),c.addEventListener("sourceended",this.e.onSourceEnded),c.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=i,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),i.src=this._mediaSourceObjectURL},d.prototype.detachMediaElement=function(){if(this._mediaSource){var i=this._mediaSource;for(var c in this._sourceBuffers){var a=this._pendingSegments[c];a.splice(0,a.length),this._pendingSegments[c]=null,this._pendingRemoveRanges[c]=null,this._lastInitSegments[c]=null;var n=this._sourceBuffers[c];if(n){if(i.readyState!=="closed"){try{i.removeSourceBuffer(n)}catch(m){l.default.e(this.TAG,m.message)}n.removeEventListener("error",this.e.onSourceBufferError),n.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[c]=null,this._sourceBuffers[c]=null}}if(i.readyState==="open")try{i.endOfStream()}catch(m){l.default.e(this.TAG,m.message)}i.removeEventListener("sourceopen",this.e.onSourceOpen),i.removeEventListener("sourceended",this.e.onSourceEnded),i.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},d.prototype.appendInitSegment=function(i,c){if(!this._mediaSource||this._mediaSource.readyState!=="open"){this._pendingSourceBufferInit.push(i),this._pendingSegments[i.type].push(i);return}var a=i,n=""+a.container;a.codec&&a.codec.length>0&&(n+=";codecs="+a.codec);var m=!1;if(l.default.v(this.TAG,"Received Initialization Segment, mimeType: "+n),this._lastInitSegments[a.type]=a,n!==this._mimeTypes[a.type]){if(this._mimeTypes[a.type])l.default.v(this.TAG,"Notice: "+a.type+" mimeType changed, origin: "+this._mimeTypes[a.type]+", target: "+n);else{m=!0;try{var S=this._sourceBuffers[a.type]=this._mediaSource.addSourceBuffer(n);S.addEventListener("error",this.e.onSourceBufferError),S.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(w){l.default.e(this.TAG,w.message),this._emitter.emit(v.default.ERROR,{code:w.code,msg:w.message});return}}this._mimeTypes[a.type]=n}c||this._pendingSegments[a.type].push(a),m||this._sourceBuffers[a.type]&&!this._sourceBuffers[a.type].updating&&this._doAppendSegments(),o.default.safari&&a.container==="audio/mpeg"&&a.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=a.mediaDuration/1e3,this._updateMediaSourceDuration())},d.prototype.appendMediaSegment=function(i){var c=i;this._pendingSegments[c.type].push(c),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var a=this._sourceBuffers[c.type];a&&!a.updating&&!this._hasPendingRemoveRanges()&&this._doAppendSegments()},d.prototype.seek=function(i){for(var c in this._sourceBuffers)if(!!this._sourceBuffers[c]){var a=this._sourceBuffers[c];if(this._mediaSource.readyState==="open")try{a.abort()}catch(R){l.default.e(this.TAG,R.message)}this._idrList.clear();var n=this._pendingSegments[c];if(n.splice(0,n.length),this._mediaSource.readyState!=="closed"){for(var m=0;m<a.buffered.length;m++){var S=a.buffered.start(m),w=a.buffered.end(m);this._pendingRemoveRanges[c].push({start:S,end:w})}if(a.updating||this._doRemoveRanges(),o.default.safari){var D=this._lastInitSegments[c];D&&(this._pendingSegments[c].push(D),a.updating||this._doAppendSegments())}}}},d.prototype.endOfStream=function(){var i=this._mediaSource,c=this._sourceBuffers;if(!i||i.readyState!=="open"){i&&i.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0);return}c.video&&c.video.updating||c.audio&&c.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,i.endOfStream())},d.prototype.getNearestKeyframe=function(i){return this._idrList.getLastSyncPointBeforeDts(i)},d.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var i=this._mediaElement.currentTime;for(var c in this._sourceBuffers){var a=this._sourceBuffers[c];if(a){var n=a.buffered;if(n.length>=1&&i-n.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},d.prototype._doCleanupSourceBuffer=function(){var i=this._mediaElement.currentTime;for(var c in this._sourceBuffers){var a=this._sourceBuffers[c];if(a){for(var n=a.buffered,m=!1,S=0;S<n.length;S++){var w=n.start(S),D=n.end(S);if(w<=i&&i<D+3){if(i-w>=this._config.autoCleanupMaxBackwardDuration){m=!0;var R=i-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[c].push({start:w,end:R})}}else D<i&&(m=!0,this._pendingRemoveRanges[c].push({start:w,end:D}))}m&&!a.updating&&this._doRemoveRanges()}}},d.prototype._updateMediaSourceDuration=function(){var i=this._sourceBuffers;if(!(this._mediaElement.readyState===0||this._mediaSource.readyState!=="open")&&!(i.video&&i.video.updating||i.audio&&i.audio.updating)){var c=this._mediaSource.duration,a=this._pendingMediaDuration;a>0&&(isNaN(c)||a>c)&&(l.default.v(this.TAG,"Update MediaSource duration from "+c+" to "+a),this._mediaSource.duration=a),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},d.prototype._doRemoveRanges=function(){for(var i in this._pendingRemoveRanges)if(!(!this._sourceBuffers[i]||this._sourceBuffers[i].updating))for(var c=this._sourceBuffers[i],a=this._pendingRemoveRanges[i];a.length&&!c.updating;){var n=a.shift();c.remove(n.start,n.end)}},d.prototype._doAppendSegments=function(){var i=this._pendingSegments;for(var c in i)if(!(!this._sourceBuffers[c]||this._sourceBuffers[c].updating)&&i[c].length>0){var a=i[c].shift();if(a.timestampOffset){var n=this._sourceBuffers[c].timestampOffset,m=a.timestampOffset/1e3,S=Math.abs(n-m);S>.1&&(l.default.v(this.TAG,"Update MPEG audio timestampOffset from "+n+" to "+m),this._sourceBuffers[c].timestampOffset=m),delete a.timestampOffset}if(!a.data||a.data.byteLength===0)continue;try{this._sourceBuffers[c].appendBuffer(a.data),this._isBufferFull=!1,c==="video"&&a.hasOwnProperty("info")&&this._idrList.appendArray(a.info.syncPoints)}catch(w){this._pendingSegments[c].unshift(a),w.code===22?(this._isBufferFull||this._emitter.emit(v.default.BUFFER_FULL),this._isBufferFull=!0):(l.default.e(this.TAG,w.message),this._emitter.emit(v.default.ERROR,{code:w.code,msg:w.message}))}}},d.prototype._onSourceOpen=function(){if(l.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var i=this._pendingSourceBufferInit;i.length;){var c=i.shift();this.appendInitSegment(c,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(v.default.SOURCE_OPEN)},d.prototype._onSourceEnded=function(){l.default.v(this.TAG,"MediaSource onSourceEnded")},d.prototype._onSourceClose=function(){l.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},d.prototype._hasPendingSegments=function(){var i=this._pendingSegments;return i.video.length>0||i.audio.length>0},d.prototype._hasPendingRemoveRanges=function(){var i=this._pendingRemoveRanges;return i.video.length>0||i.audio.length>0},d.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(v.default.UPDATE_END)},d.prototype._onSourceBufferError=function(i){l.default.e(this.TAG,"SourceBuffer Error: "+i)},d}();y.default=p},"./src/core/mse-events.js":function(x,y,E){E.r(y);var b={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};y.default=b},"./src/core/transmuxer.js":function(x,y,E){E.r(y);var b=E("./node_modules/events/events.js"),u=E.n(b),l=E("./node_modules/webworkify-webpack/index.js"),o=E.n(l),v=E("./src/utils/logger.js"),s=E("./src/utils/logging-control.js"),f=E("./src/core/transmuxing-controller.js"),p=E("./src/core/transmuxing-events.js"),d=E("./src/core/media-info.js"),i=function(){function c(a,n){if(this.TAG="Transmuxer",this._emitter=new(u()),n.enableWorker&&typeof Worker!="undefined")try{this._worker=o()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[a,n]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},s.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:s.default.getConfig()})}catch{v.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new f.default(a,n)}else this._controller=new f.default(a,n);if(this._controller){var m=this._controller;m.on(p.default.IO_ERROR,this._onIOError.bind(this)),m.on(p.default.DEMUX_ERROR,this._onDemuxError.bind(this)),m.on(p.default.INIT_SEGMENT,this._onInitSegment.bind(this)),m.on(p.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),m.on(p.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),m.on(p.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),m.on(p.default.MEDIA_INFO,this._onMediaInfo.bind(this)),m.on(p.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),m.on(p.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),m.on(p.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),m.on(p.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return c.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),s.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},c.prototype.on=function(a,n){this._emitter.addListener(a,n)},c.prototype.off=function(a,n){this._emitter.removeListener(a,n)},c.prototype.hasWorker=function(){return this._worker!=null},c.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},c.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},c.prototype.seek=function(a){this._worker?this._worker.postMessage({cmd:"seek",param:a}):this._controller.seek(a)},c.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},c.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},c.prototype._onInitSegment=function(a,n){var m=this;Promise.resolve().then(function(){m._emitter.emit(p.default.INIT_SEGMENT,a,n)})},c.prototype._onMediaSegment=function(a,n){var m=this;Promise.resolve().then(function(){m._emitter.emit(p.default.MEDIA_SEGMENT,a,n)})},c.prototype._onLoadingComplete=function(){var a=this;Promise.resolve().then(function(){a._emitter.emit(p.default.LOADING_COMPLETE)})},c.prototype._onRecoveredEarlyEof=function(){var a=this;Promise.resolve().then(function(){a._emitter.emit(p.default.RECOVERED_EARLY_EOF)})},c.prototype._onMediaInfo=function(a){var n=this;Promise.resolve().then(function(){n._emitter.emit(p.default.MEDIA_INFO,a)})},c.prototype._onMetaDataArrived=function(a){var n=this;Promise.resolve().then(function(){n._emitter.emit(p.default.METADATA_ARRIVED,a)})},c.prototype._onScriptDataArrived=function(a){var n=this;Promise.resolve().then(function(){n._emitter.emit(p.default.SCRIPTDATA_ARRIVED,a)})},c.prototype._onStatisticsInfo=function(a){var n=this;Promise.resolve().then(function(){n._emitter.emit(p.default.STATISTICS_INFO,a)})},c.prototype._onIOError=function(a,n){var m=this;Promise.resolve().then(function(){m._emitter.emit(p.default.IO_ERROR,a,n)})},c.prototype._onDemuxError=function(a,n){var m=this;Promise.resolve().then(function(){m._emitter.emit(p.default.DEMUX_ERROR,a,n)})},c.prototype._onRecommendSeekpoint=function(a){var n=this;Promise.resolve().then(function(){n._emitter.emit(p.default.RECOMMEND_SEEKPOINT,a)})},c.prototype._onLoggingConfigChanged=function(a){this._worker&&this._worker.postMessage({cmd:"logging_config",param:a})},c.prototype._onWorkerMessage=function(a){var n=a.data,m=n.data;if(n.msg==="destroyed"||this._workerDestroying){this._workerDestroying=!1,this._worker.terminate(),this._worker=null;return}switch(n.msg){case p.default.INIT_SEGMENT:case p.default.MEDIA_SEGMENT:this._emitter.emit(n.msg,m.type,m.data);break;case p.default.LOADING_COMPLETE:case p.default.RECOVERED_EARLY_EOF:this._emitter.emit(n.msg);break;case p.default.MEDIA_INFO:Object.setPrototypeOf(m,d.default.prototype),this._emitter.emit(n.msg,m);break;case p.default.METADATA_ARRIVED:case p.default.SCRIPTDATA_ARRIVED:case p.default.STATISTICS_INFO:this._emitter.emit(n.msg,m);break;case p.default.IO_ERROR:case p.default.DEMUX_ERROR:this._emitter.emit(n.msg,m.type,m.info);break;case p.default.RECOMMEND_SEEKPOINT:this._emitter.emit(n.msg,m);break;case"logcat_callback":v.default.emitter.emit("log",m.type,m.logcat);break}},c}();y.default=i},"./src/core/transmuxing-controller.js":function(x,y,E){E.r(y);var b=E("./node_modules/events/events.js"),u=E.n(b),l=E("./src/utils/logger.js"),o=E("./src/utils/browser.js"),v=E("./src/core/media-info.js"),s=E("./src/demux/flv-demuxer.js"),f=E("./src/remux/mp4-remuxer.js"),p=E("./src/demux/demux-errors.js"),d=E("./src/io/io-controller.js"),i=E("./src/core/transmuxing-events.js"),c=function(){function a(n,m){this.TAG="TransmuxingController",this._emitter=new(u()),this._config=m,n.segments||(n.segments=[{duration:n.duration,filesize:n.filesize,url:n.url}]),typeof n.cors!="boolean"&&(n.cors=!0),typeof n.withCredentials!="boolean"&&(n.withCredentials=!1),this._mediaDataSource=n,this._currentSegmentIndex=0;var S=0;this._mediaDataSource.segments.forEach(function(w){w.timestampBase=S,S+=w.duration,w.cors=n.cors,w.withCredentials=n.withCredentials,m.referrerPolicy&&(w.referrerPolicy=m.referrerPolicy)}),!isNaN(S)&&this._mediaDataSource.duration!==S&&(this._mediaDataSource.duration=S),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return a.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(n,m){this._emitter.addListener(n,m)},a.prototype.off=function(n,m){this._emitter.removeListener(n,m)},a.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},a.prototype._loadSegment=function(n,m){this._currentSegmentIndex=n;var S=this._mediaDataSource.segments[n],w=this._ioctl=new d.default(S,this._config,n);w.onError=this._onIOException.bind(this),w.onSeeked=this._onIOSeeked.bind(this),w.onComplete=this._onIOComplete.bind(this),w.onRedirect=this._onIORedirect.bind(this),w.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),m?this._demuxer.bindDataSource(this._ioctl):w.onDataArrival=this._onInitChunkArrival.bind(this),w.open(m)},a.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},a.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},a.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},a.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},a.prototype.seek=function(n){if(!(this._mediaInfo==null||!this._mediaInfo.isSeekable())){var m=this._searchSegmentIndexContains(n);if(m===this._currentSegmentIndex){var S=this._mediaInfo.segments[m];if(S==null)this._pendingSeekTime=n;else{var w=S.getNearestKeyframe(n);this._remuxer.seek(w.milliseconds),this._ioctl.seek(w.fileposition),this._pendingResolveSeekPoint=w.milliseconds}}else{var D=this._mediaInfo.segments[m];if(D==null)this._pendingSeekTime=n,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(m);else{var w=D.getNearestKeyframe(n);this._internalAbort(),this._remuxer.seek(n),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[m].timestampBase,this._loadSegment(m,w.fileposition),this._pendingResolveSeekPoint=w.milliseconds,this._reportSegmentMediaInfo(m)}}this._enableStatisticsReporter()}},a.prototype._searchSegmentIndexContains=function(n){for(var m=this._mediaDataSource.segments,S=m.length-1,w=0;w<m.length;w++)if(n<m[w].timestampBase){S=w-1;break}return S},a.prototype._onInitChunkArrival=function(n,m){var S=this,w=null,D=0;if(m>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,D=this._demuxer.parseChunks(n,m);else if((w=s.default.probe(n)).match){this._demuxer=new s.default(w,this._config),this._remuxer||(this._remuxer=new f.default(this._config));var R=this._mediaDataSource;R.duration!=null&&!isNaN(R.duration)&&(this._demuxer.overridedDuration=R.duration),typeof R.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=R.hasAudio),typeof R.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=R.hasVideo),this._demuxer.timestampBase=R.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),D=this._demuxer.parseChunks(n,m)}else w=null,l.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){S._internalAbort()}),this._emitter.emit(i.default.DEMUX_ERROR,p.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),D=0;return D},a.prototype._onMediaInfo=function(n){var m=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},n),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,v.default.prototype));var S=Object.assign({},n);Object.setPrototypeOf(S,v.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=S,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var w=m._pendingSeekTime;m._pendingSeekTime=null,m.seek(w)})},a.prototype._onMetaDataArrived=function(n){this._emitter.emit(i.default.METADATA_ARRIVED,n)},a.prototype._onScriptDataArrived=function(n){this._emitter.emit(i.default.SCRIPTDATA_ARRIVED,n)},a.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},a.prototype._onIOComplete=function(n){var m=n,S=m+1;S<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(S)):(this._remuxer.flushStashedSamples(),this._emitter.emit(i.default.LOADING_COMPLETE),this._disableStatisticsReporter())},a.prototype._onIORedirect=function(n){var m=this._ioctl.extraData;this._mediaDataSource.segments[m].redirectedURL=n},a.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(i.default.RECOVERED_EARLY_EOF)},a.prototype._onIOException=function(n,m){l.default.e(this.TAG,"IOException: type = "+n+", code = "+m.code+", msg = "+m.msg),this._emitter.emit(i.default.IO_ERROR,n,m),this._disableStatisticsReporter()},a.prototype._onDemuxException=function(n,m){l.default.e(this.TAG,"DemuxException: type = "+n+", info = "+m),this._emitter.emit(i.default.DEMUX_ERROR,n,m)},a.prototype._onRemuxerInitSegmentArrival=function(n,m){this._emitter.emit(i.default.INIT_SEGMENT,n,m)},a.prototype._onRemuxerMediaSegmentArrival=function(n,m){if(this._pendingSeekTime==null&&(this._emitter.emit(i.default.MEDIA_SEGMENT,n,m),this._pendingResolveSeekPoint!=null&&n==="video")){var S=m.info.syncPoints,w=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,o.default.safari&&S.length>0&&S[0].originalDts===w&&(w=S[0].pts),this._emitter.emit(i.default.RECOMMEND_SEEKPOINT,w)}},a.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},a.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},a.prototype._reportSegmentMediaInfo=function(n){var m=this._mediaInfo.segments[n],S=Object.assign({},m);S.duration=this._mediaInfo.duration,S.segmentCount=this._mediaInfo.segmentCount,delete S.segments,delete S.keyframesIndex,this._emitter.emit(i.default.MEDIA_INFO,S)},a.prototype._reportStatisticsInfo=function(){var n={};n.url=this._ioctl.currentURL,n.hasRedirect=this._ioctl.hasRedirect,n.hasRedirect&&(n.redirectedURL=this._ioctl.currentRedirectedURL),n.speed=this._ioctl.currentSpeed,n.loaderType=this._ioctl.loaderType,n.currentSegmentIndex=this._currentSegmentIndex,n.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(i.default.STATISTICS_INFO,n)},a}();y.default=c},"./src/core/transmuxing-events.js":function(x,y,E){E.r(y);var b={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};y.default=b},"./src/core/transmuxing-worker.js":function(x,y,E){E.r(y);var b=E("./src/utils/logging-control.js"),u=E("./src/utils/polyfill.js"),l=E("./src/core/transmuxing-controller.js"),o=E("./src/core/transmuxing-events.js"),v=function(s){var f=null,p=L.bind(this);u.default.install(),s.addEventListener("message",function(C){switch(C.data.cmd){case"init":f=new l.default(C.data.param[0],C.data.param[1]),f.on(o.default.IO_ERROR,D.bind(this)),f.on(o.default.DEMUX_ERROR,R.bind(this)),f.on(o.default.INIT_SEGMENT,d.bind(this)),f.on(o.default.MEDIA_SEGMENT,i.bind(this)),f.on(o.default.LOADING_COMPLETE,c.bind(this)),f.on(o.default.RECOVERED_EARLY_EOF,a.bind(this)),f.on(o.default.MEDIA_INFO,n.bind(this)),f.on(o.default.METADATA_ARRIVED,m.bind(this)),f.on(o.default.SCRIPTDATA_ARRIVED,S.bind(this)),f.on(o.default.STATISTICS_INFO,w.bind(this)),f.on(o.default.RECOMMEND_SEEKPOINT,A.bind(this));break;case"destroy":f&&(f.destroy(),f=null),s.postMessage({msg:"destroyed"});break;case"start":f.start();break;case"stop":f.stop();break;case"seek":f.seek(C.data.param);break;case"pause":f.pause();break;case"resume":f.resume();break;case"logging_config":{var O=C.data.param;b.default.applyConfig(O),O.enableCallback===!0?b.default.addLogListener(p):b.default.removeLogListener(p);break}}});function d(C,O){var F={msg:o.default.INIT_SEGMENT,data:{type:C,data:O}};s.postMessage(F,[O.data])}function i(C,O){var F={msg:o.default.MEDIA_SEGMENT,data:{type:C,data:O}};s.postMessage(F,[O.data])}function c(){var C={msg:o.default.LOADING_COMPLETE};s.postMessage(C)}function a(){var C={msg:o.default.RECOVERED_EARLY_EOF};s.postMessage(C)}function n(C){var O={msg:o.default.MEDIA_INFO,data:C};s.postMessage(O)}function m(C){var O={msg:o.default.METADATA_ARRIVED,data:C};s.postMessage(O)}function S(C){var O={msg:o.default.SCRIPTDATA_ARRIVED,data:C};s.postMessage(O)}function w(C){var O={msg:o.default.STATISTICS_INFO,data:C};s.postMessage(O)}function D(C,O){s.postMessage({msg:o.default.IO_ERROR,data:{type:C,info:O}})}function R(C,O){s.postMessage({msg:o.default.DEMUX_ERROR,data:{type:C,info:O}})}function A(C){s.postMessage({msg:o.default.RECOMMEND_SEEKPOINT,data:C})}function L(C,O){s.postMessage({msg:"logcat_callback",data:{type:C,logcat:O}})}};y.default=v},"./src/demux/amf-parser.js":function(x,y,E){E.r(y);var b=E("./src/utils/logger.js"),u=E("./src/utils/utf8-conv.js"),l=E("./src/utils/exception.js"),o=function(){var s=new ArrayBuffer(2);return new DataView(s).setInt16(0,256,!0),new Int16Array(s)[0]===256}(),v=function(){function s(){}return s.parseScriptData=function(f,p,d){var i={};try{var c=s.parseValue(f,p,d),a=s.parseValue(f,p+c.size,d-c.size);i[c.data]=a.data}catch(n){b.default.e("AMF",n.toString())}return i},s.parseObject=function(f,p,d){if(d<3)throw new l.IllegalStateException("Data not enough when parse ScriptDataObject");var i=s.parseString(f,p,d),c=s.parseValue(f,p+i.size,d-i.size),a=c.objectEnd;return{data:{name:i.data,value:c.data},size:i.size+c.size,objectEnd:a}},s.parseVariable=function(f,p,d){return s.parseObject(f,p,d)},s.parseString=function(f,p,d){if(d<2)throw new l.IllegalStateException("Data not enough when parse String");var i=new DataView(f,p,d),c=i.getUint16(0,!o),a;return c>0?a=(0,u.default)(new Uint8Array(f,p+2,c)):a="",{data:a,size:2+c}},s.parseLongString=function(f,p,d){if(d<4)throw new l.IllegalStateException("Data not enough when parse LongString");var i=new DataView(f,p,d),c=i.getUint32(0,!o),a;return c>0?a=(0,u.default)(new Uint8Array(f,p+4,c)):a="",{data:a,size:4+c}},s.parseDate=function(f,p,d){if(d<10)throw new l.IllegalStateException("Data size invalid when parse Date");var i=new DataView(f,p,d),c=i.getFloat64(0,!o),a=i.getInt16(8,!o);return c+=a*60*1e3,{data:new Date(c),size:8+2}},s.parseValue=function(f,p,d){if(d<1)throw new l.IllegalStateException("Data not enough when parse Value");var i=new DataView(f,p,d),c=1,a=i.getUint8(0),n,m=!1;try{switch(a){case 0:n=i.getFloat64(1,!o),c+=8;break;case 1:{var S=i.getUint8(1);n=!!S,c+=1;break}case 2:{var w=s.parseString(f,p+1,d-1);n=w.data,c+=w.size;break}case 3:{n={};var D=0;for((i.getUint32(d-4,!o)&16777215)==9&&(D=3);c<d-4;){var R=s.parseObject(f,p+c,d-c-D);if(R.objectEnd)break;n[R.data.name]=R.data.value,c+=R.size}if(c<=d-3){var A=i.getUint32(c-1,!o)&16777215;A===9&&(c+=3)}break}case 8:{n={},c+=4;var D=0;for((i.getUint32(d-4,!o)&16777215)==9&&(D=3);c<d-8;){var L=s.parseVariable(f,p+c,d-c-D);if(L.objectEnd)break;n[L.data.name]=L.data.value,c+=L.size}if(c<=d-3){var A=i.getUint32(c-1,!o)&16777215;A===9&&(c+=3)}break}case 9:n=void 0,c=1,m=!0;break;case 10:{n=[];var C=i.getUint32(1,!o);c+=4;for(var O=0;O<C;O++){var F=s.parseValue(f,p+c,d-c);n.push(F.data),c+=F.size}break}case 11:{var P=s.parseDate(f,p+1,d-1);n=P.data,c+=P.size;break}case 12:{var M=s.parseString(f,p+1,d-1);n=M.data,c+=M.size;break}default:c=d,b.default.w("AMF","Unsupported AMF value type "+a)}}catch(V){b.default.e("AMF",V.toString())}return{data:n,size:c,objectEnd:m}},s}();y.default=v},"./src/demux/demux-errors.js":function(x,y,E){E.r(y);var b={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};y.default=b},"./src/demux/exp-golomb.js":function(x,y,E){E.r(y);var b=E("./src/utils/exception.js"),u=function(){function l(o){this.TAG="ExpGolomb",this._buffer=o,this._buffer_index=0,this._total_bytes=o.byteLength,this._total_bits=o.byteLength*8,this._current_word=0,this._current_word_bits_left=0}return l.prototype.destroy=function(){this._buffer=null},l.prototype._fillCurrentWord=function(){var o=this._total_bytes-this._buffer_index;if(o<=0)throw new b.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var v=Math.min(4,o),s=new Uint8Array(4);s.set(this._buffer.subarray(this._buffer_index,this._buffer_index+v)),this._current_word=new DataView(s.buffer).getUint32(0,!1),this._buffer_index+=v,this._current_word_bits_left=v*8},l.prototype.readBits=function(o){if(o>32)throw new b.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(o<=this._current_word_bits_left){var v=this._current_word>>>32-o;return this._current_word<<=o,this._current_word_bits_left-=o,v}var s=this._current_word_bits_left?this._current_word:0;s=s>>>32-this._current_word_bits_left;var f=o-this._current_word_bits_left;this._fillCurrentWord();var p=Math.min(f,this._current_word_bits_left),d=this._current_word>>>32-p;return this._current_word<<=p,this._current_word_bits_left-=p,s=s<<p|d,s},l.prototype.readBool=function(){return this.readBits(1)===1},l.prototype.readByte=function(){return this.readBits(8)},l.prototype._skipLeadingZero=function(){var o;for(o=0;o<this._current_word_bits_left;o++)if((this._current_word&2147483648>>>o)!=0)return this._current_word<<=o,this._current_word_bits_left-=o,o;return this._fillCurrentWord(),o+this._skipLeadingZero()},l.prototype.readUEG=function(){var o=this._skipLeadingZero();return this.readBits(o+1)-1},l.prototype.readSEG=function(){var o=this.readUEG();return o&1?o+1>>>1:-1*(o>>>1)},l}();y.default=u},"./src/demux/flv-demuxer.js":function(x,y,E){E.r(y);var b=E("./src/utils/logger.js"),u=E("./src/demux/amf-parser.js"),l=E("./src/demux/sps-parser.js"),o=E("./src/demux/demux-errors.js"),v=E("./src/core/media-info.js"),s=E("./src/utils/exception.js");function f(d,i){return d[i]<<24|d[i+1]<<16|d[i+2]<<8|d[i+3]}var p=function(){function d(i,c){this.TAG="FLVDemuxer",this._config=c,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=i.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=i.hasAudioTrack,this._hasVideo=i.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new v.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var a=new ArrayBuffer(2);return new DataView(a).setInt16(0,256,!0),new Int16Array(a)[0]===256}()}return d.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},d.probe=function(i){var c=new Uint8Array(i),a={match:!1};if(c[0]!==70||c[1]!==76||c[2]!==86||c[3]!==1)return a;var n=(c[4]&4)>>>2!=0,m=(c[4]&1)!=0,S=f(c,5);return S<9?a:{match:!0,consumed:S,dataOffset:S,hasAudioTrack:n,hasVideoTrack:m}},d.prototype.bindDataSource=function(i){return i.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(d.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(i){this._onTrackMetadata=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(i){this._onMediaInfo=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(i){this._onMetaDataArrived=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(i){this._onScriptDataArrived=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onError",{get:function(){return this._onError},set:function(i){this._onError=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(i){this._onDataAvailable=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(i){this._timestampBase=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"overridedDuration",{get:function(){return this._duration},set:function(i){this._durationOverrided=!0,this._duration=i,this._mediaInfo.duration=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"overridedHasAudio",{set:function(i){this._hasAudioFlagOverrided=!0,this._hasAudio=i,this._mediaInfo.hasAudio=i},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"overridedHasVideo",{set:function(i){this._hasVideoFlagOverrided=!0,this._hasVideo=i,this._mediaInfo.hasVideo=i},enumerable:!1,configurable:!0}),d.prototype.resetMediaInfo=function(){this._mediaInfo=new v.default},d.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:!1},d.prototype.parseChunks=function(i,c){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new s.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var a=0,n=this._littleEndian;if(c===0)if(i.byteLength>13){var m=d.probe(i);a=m.dataOffset}else return 0;if(this._firstParse){this._firstParse=!1,c+a!==this._dataOffset&&b.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var S=new DataView(i,a),w=S.getUint32(0,!n);w!==0&&b.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),a+=4}for(;a<i.byteLength;){this._dispatch=!0;var S=new DataView(i,a);if(a+11+4>i.byteLength)break;var D=S.getUint8(0),R=S.getUint32(0,!n)&16777215;if(a+11+R+4>i.byteLength)break;if(D!==8&&D!==9&&D!==18){b.default.w(this.TAG,"Unsupported tag type "+D+", skipped"),a+=11+R+4;continue}var A=S.getUint8(4),L=S.getUint8(5),C=S.getUint8(6),O=S.getUint8(7),F=C|L<<8|A<<16|O<<24,P=S.getUint32(7,!n)&16777215;P!==0&&b.default.w(this.TAG,"Meet tag which has StreamID != 0!");var M=a+11;switch(D){case 8:this._parseAudioData(i,M,R,F);break;case 9:this._parseVideoData(i,M,R,F,c+a);break;case 18:this._parseScriptData(i,M,R);break}var V=S.getUint32(11+R,!n);V!==11+R&&b.default.w(this.TAG,"Invalid PrevTagSize "+V),a+=11+R+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),a},d.prototype._parseScriptData=function(i,c,a){var n=u.default.parseScriptData(i,c,a);if(n.hasOwnProperty("onMetaData")){if(n.onMetaData==null||typeof n.onMetaData!="object"){b.default.w(this.TAG,"Invalid onMetaData structure!");return}this._metadata&&b.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=n;var m=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},m)),typeof m.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=m.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof m.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=m.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof m.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=m.audiodatarate),typeof m.videodatarate=="number"&&(this._mediaInfo.videoDataRate=m.videodatarate),typeof m.width=="number"&&(this._mediaInfo.width=m.width),typeof m.height=="number"&&(this._mediaInfo.height=m.height),typeof m.duration=="number"){if(!this._durationOverrided){var S=Math.floor(m.duration*this._timescale);this._duration=S,this._mediaInfo.duration=S}}else this._mediaInfo.duration=0;if(typeof m.framerate=="number"){var w=Math.floor(m.framerate*1e3);if(w>0){var D=w/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=D,this._referenceFrameRate.fps_num=w,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=D}}if(typeof m.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var R=m.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(R),m.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=m,b.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(n).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},n))},d.prototype._parseKeyframesIndex=function(i){for(var c=[],a=[],n=1;n<i.times.length;n++){var m=this._timestampBase+Math.floor(i.times[n]*1e3);c.push(m),a.push(i.filepositions[n])}return{times:c,filepositions:a}},d.prototype._parseAudioData=function(i,c,a,n){if(a<=1){b.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");return}if(!(this._hasAudioFlagOverrided===!0&&this._hasAudio===!1)){this._littleEndian;var m=new DataView(i,c,a),S=m.getUint8(0),w=S>>>4;if(w!==2&&w!==10){this._onError(o.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+w);return}var D=0,R=(S&12)>>>2;if(R>=0&&R<=4)D=this._flvSoundRateTable[R];else{this._onError(o.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+R);return}var A=S&1,L=this._audioMetadata,C=this._audioTrack;if(L||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),L=this._audioMetadata={},L.type="audio",L.id=C.id,L.timescale=this._timescale,L.duration=this._duration,L.audioSampleRate=D,L.channelCount=A===0?1:2),w===10){var O=this._parseAACAudioData(i,c+1,a-1);if(O==null)return;if(O.packetType===0){L.config&&b.default.w(this.TAG,"Found another AudioSpecificConfig!");var F=O.data;L.audioSampleRate=F.samplingRate,L.channelCount=F.channelCount,L.codec=F.codec,L.originalCodec=F.originalCodec,L.config=F.config,L.refSampleDuration=1024/L.audioSampleRate*L.timescale,b.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",L);var P=this._mediaInfo;P.audioCodec=L.originalCodec,P.audioSampleRate=L.audioSampleRate,P.audioChannelCount=L.channelCount,P.hasVideo?P.videoCodec!=null&&(P.mimeType='video/x-flv; codecs="'+P.videoCodec+","+P.audioCodec+'"'):P.mimeType='video/x-flv; codecs="'+P.audioCodec+'"',P.isComplete()&&this._onMediaInfo(P)}else if(O.packetType===1){var M=this._timestampBase+n,V={unit:O.data,length:O.data.byteLength,dts:M,pts:M};C.samples.push(V),C.length+=O.data.length}else b.default.e(this.TAG,"Flv: Unsupported AAC data type "+O.packetType)}else if(w===2){if(!L.codec){var F=this._parseMP3AudioData(i,c+1,a-1,!0);if(F==null)return;L.audioSampleRate=F.samplingRate,L.channelCount=F.channelCount,L.codec=F.codec,L.originalCodec=F.originalCodec,L.refSampleDuration=1152/L.audioSampleRate*L.timescale,b.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",L);var P=this._mediaInfo;P.audioCodec=L.codec,P.audioSampleRate=L.audioSampleRate,P.audioChannelCount=L.channelCount,P.audioDataRate=F.bitRate,P.hasVideo?P.videoCodec!=null&&(P.mimeType='video/x-flv; codecs="'+P.videoCodec+","+P.audioCodec+'"'):P.mimeType='video/x-flv; codecs="'+P.audioCodec+'"',P.isComplete()&&this._onMediaInfo(P)}var K=this._parseMP3AudioData(i,c+1,a-1,!1);if(K==null)return;var M=this._timestampBase+n,z={unit:K,length:K.byteLength,dts:M,pts:M};C.samples.push(z),C.length+=K.length}}},d.prototype._parseAACAudioData=function(i,c,a){if(a<=1){b.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");return}var n={},m=new Uint8Array(i,c,a);return n.packetType=m[0],m[0]===0?n.data=this._parseAACAudioSpecificConfig(i,c+1,a-1):n.data=m.subarray(1),n},d.prototype._parseAACAudioSpecificConfig=function(i,c,a){var n=new Uint8Array(i,c,a),m=null,S=0,w=0,D=0,R=null;if(S=w=n[0]>>>3,D=(n[0]&7)<<1|n[1]>>>7,D<0||D>=this._mpegSamplingRates.length){this._onError(o.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");return}var A=this._mpegSamplingRates[D],L=(n[1]&120)>>>3;if(L<0||L>=8){this._onError(o.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");return}S===5&&(R=(n[1]&7)<<1|n[2]>>>7,(n[2]&124)>>>2);var C=self.navigator.userAgent.toLowerCase();return C.indexOf("firefox")!==-1?D>=6?(S=5,m=new Array(4),R=D-3):(S=2,m=new Array(2),R=D):C.indexOf("android")!==-1?(S=2,m=new Array(2),R=D):(S=5,R=D,m=new Array(4),D>=6?R=D-3:L===1&&(S=2,m=new Array(2),R=D)),m[0]=S<<3,m[0]|=(D&15)>>>1,m[1]=(D&15)<<7,m[1]|=(L&15)<<3,S===5&&(m[1]|=(R&15)>>>1,m[2]=(R&1)<<7,m[2]|=2<<2,m[3]=0),{config:m,samplingRate:A,channelCount:L,codec:"mp4a.40."+S,originalCodec:"mp4a.40."+w}},d.prototype._parseMP3AudioData=function(i,c,a,n){if(a<4){b.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");return}this._littleEndian;var m=new Uint8Array(i,c,a),S=null;if(n){if(m[0]!==255)return;var w=m[1]>>>3&3,D=(m[1]&6)>>1,R=(m[2]&240)>>>4,A=(m[2]&12)>>>2,L=m[3]>>>6&3,C=L!==3?2:1,O=0,F=0,P="mp3";switch(w){case 0:O=this._mpegAudioV25SampleRateTable[A];break;case 2:O=this._mpegAudioV20SampleRateTable[A];break;case 3:O=this._mpegAudioV10SampleRateTable[A];break}switch(D){case 1:R<this._mpegAudioL3BitRateTable.length&&(F=this._mpegAudioL3BitRateTable[R]);break;case 2:R<this._mpegAudioL2BitRateTable.length&&(F=this._mpegAudioL2BitRateTable[R]);break;case 3:R<this._mpegAudioL1BitRateTable.length&&(F=this._mpegAudioL1BitRateTable[R]);break}S={bitRate:F,samplingRate:O,channelCount:C,codec:P,originalCodec:P}}else S=m;return S},d.prototype._parseVideoData=function(i,c,a,n,m){if(a<=1){b.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");return}if(!(this._hasVideoFlagOverrided===!0&&this._hasVideo===!1)){var S=new Uint8Array(i,c,a)[0],w=(S&240)>>>4,D=S&15;if(D!==7){this._onError(o.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+D);return}this._parseAVCVideoPacket(i,c+1,a-1,n,m,w)}},d.prototype._parseAVCVideoPacket=function(i,c,a,n,m,S){if(a<4){b.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");return}var w=this._littleEndian,D=new DataView(i,c,a),R=D.getUint8(0),A=D.getUint32(0,!w)&16777215,L=A<<8>>8;if(R===0)this._parseAVCDecoderConfigurationRecord(i,c+4,a-4);else if(R===1)this._parseAVCVideoData(i,c+4,a-4,n,m,S,L);else if(R!==2){this._onError(o.default.FORMAT_ERROR,"Flv: Invalid video packet type "+R);return}},d.prototype._parseAVCDecoderConfigurationRecord=function(i,c,a){if(a<7){b.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");return}var n=this._videoMetadata,m=this._videoTrack,S=this._littleEndian,w=new DataView(i,c,a);n?typeof n.avcc!="undefined"&&b.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),n=this._videoMetadata={},n.type="video",n.id=m.id,n.timescale=this._timescale,n.duration=this._duration);var D=w.getUint8(0),R=w.getUint8(1);if(w.getUint8(2),w.getUint8(3),D!==1||R===0){this._onError(o.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(w.getUint8(4)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(o.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}var A=w.getUint8(5)&31;if(A===0){this._onError(o.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");return}else A>1&&b.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+A);for(var L=6,C=0;C<A;C++){var O=w.getUint16(L,!S);if(L+=2,O!==0){var F=new Uint8Array(i,c+L,O);L+=O;var P=l.default.parseSPS(F);if(C===0){n.codecWidth=P.codec_size.width,n.codecHeight=P.codec_size.height,n.presentWidth=P.present_size.width,n.presentHeight=P.present_size.height,n.profile=P.profile_string,n.level=P.level_string,n.bitDepth=P.bit_depth,n.chromaFormat=P.chroma_format,n.sarRatio=P.sar_ratio,n.frameRate=P.frame_rate,(P.frame_rate.fixed===!1||P.frame_rate.fps_num===0||P.frame_rate.fps_den===0)&&(n.frameRate=this._referenceFrameRate);var M=n.frameRate.fps_den,V=n.frameRate.fps_num;n.refSampleDuration=n.timescale*(M/V);for(var K=F.subarray(1,4),z="avc1.",Q=0;Q<3;Q++){var X=K[Q].toString(16);X.length<2&&(X="0"+X),z+=X}n.codec=z;var N=this._mediaInfo;N.width=n.codecWidth,N.height=n.codecHeight,N.fps=n.frameRate.fps,N.profile=n.profile,N.level=n.level,N.refFrames=P.ref_frames,N.chromaFormat=P.chroma_format_string,N.sarNum=n.sarRatio.width,N.sarDen=n.sarRatio.height,N.videoCodec=z,N.hasAudio?N.audioCodec!=null&&(N.mimeType='video/x-flv; codecs="'+N.videoCodec+","+N.audioCodec+'"'):N.mimeType='video/x-flv; codecs="'+N.videoCodec+'"',N.isComplete()&&this._onMediaInfo(N)}}}var q=w.getUint8(L);if(q===0){this._onError(o.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");return}else q>1&&b.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+q);L++;for(var C=0;C<q;C++){var O=w.getUint16(L,!S);L+=2,O!==0&&(L+=O)}n.avcc=new Uint8Array(a),n.avcc.set(new Uint8Array(i,c,a),0),b.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",n)},d.prototype._parseAVCVideoData=function(i,c,a,n,m,S,w){for(var D=this._littleEndian,R=new DataView(i,c,a),A=[],L=0,C=0,O=this._naluLengthSize,F=this._timestampBase+n,P=S===1;C<a;){if(C+4>=a){b.default.w(this.TAG,"Malformed Nalu near timestamp "+F+", offset = "+C+", dataSize = "+a);break}var M=R.getUint32(C,!D);if(O===3&&(M>>>=8),M>a-O){b.default.w(this.TAG,"Malformed Nalus near timestamp "+F+", NaluSize > DataSize!");return}var V=R.getUint8(C+O)&31;V===5&&(P=!0);var K=new Uint8Array(i,c+C,O+M),z={type:V,data:K};A.push(z),L+=K.byteLength,C+=O+M}if(A.length){var Q=this._videoTrack,X={units:A,length:L,isKeyframe:P,dts:F,cts:w,pts:F+w};P&&(X.fileposition=m),Q.samples.push(X),Q.length+=L}},d}();y.default=p},"./src/demux/sps-parser.js":function(x,y,E){E.r(y);var b=E("./src/demux/exp-golomb.js"),u=function(){function l(){}return l._ebsp2rbsp=function(o){for(var v=o,s=v.byteLength,f=new Uint8Array(s),p=0,d=0;d<s;d++)d>=2&&v[d]===3&&v[d-1]===0&&v[d-2]===0||(f[p]=v[d],p++);return new Uint8Array(f.buffer,0,p)},l.parseSPS=function(o){var v=l._ebsp2rbsp(o),s=new b.default(v);s.readByte();var f=s.readByte();s.readByte();var p=s.readByte();s.readUEG();var d=l.getProfileString(f),i=l.getLevelString(p),c=1,a=420,n=[0,420,422,444],m=8;if((f===100||f===110||f===122||f===244||f===44||f===83||f===86||f===118||f===128||f===138||f===144)&&(c=s.readUEG(),c===3&&s.readBits(1),c<=3&&(a=n[c]),m=s.readUEG()+8,s.readUEG(),s.readBits(1),s.readBool()))for(var S=c!==3?8:12,w=0;w<S;w++)s.readBool()&&(w<6?l._skipScalingList(s,16):l._skipScalingList(s,64));s.readUEG();var D=s.readUEG();if(D===0)s.readUEG();else if(D===1){s.readBits(1),s.readSEG(),s.readSEG();for(var R=s.readUEG(),w=0;w<R;w++)s.readSEG()}var A=s.readUEG();s.readBits(1);var L=s.readUEG(),C=s.readUEG(),O=s.readBits(1);O===0&&s.readBits(1),s.readBits(1);var F=0,P=0,M=0,V=0,K=s.readBool();K&&(F=s.readUEG(),P=s.readUEG(),M=s.readUEG(),V=s.readUEG());var z=1,Q=1,X=0,N=!0,q=0,ye=0,ie=s.readBool();if(ie){if(s.readBool()){var ne=s.readByte(),he=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ue=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];ne>0&&ne<16?(z=he[ne-1],Q=ue[ne-1]):ne===255&&(z=s.readByte()<<8|s.readByte(),Q=s.readByte()<<8|s.readByte())}if(s.readBool()&&s.readBool(),s.readBool()&&(s.readBits(4),s.readBool()&&s.readBits(24)),s.readBool()&&(s.readUEG(),s.readUEG()),s.readBool()){var le=s.readBits(32),ve=s.readBits(32);N=s.readBool(),q=ve,ye=le*2,X=q/ye}}var Z=1;(z!==1||Q!==1)&&(Z=z/Q);var j=0,ce=0;if(c===0)j=1,ce=2-O;else{var U=c===3?1:2,Y=c===1?2:1;j=U,ce=Y*(2-O)}var ee=(L+1)*16,de=(2-O)*((C+1)*16);ee-=(F+P)*j,de-=(M+V)*ce;var be=Math.ceil(ee*Z);return s.destroy(),s=null,{profile_string:d,level_string:i,bit_depth:m,ref_frames:A,chroma_format:a,chroma_format_string:l.getChromaFormatString(a),frame_rate:{fixed:N,fps:X,fps_den:ye,fps_num:q},sar_ratio:{width:z,height:Q},codec_size:{width:ee,height:de},present_size:{width:be,height:de}}},l._skipScalingList=function(o,v){for(var s=8,f=8,p=0,d=0;d<v;d++)f!==0&&(p=o.readSEG(),f=(s+p+256)%256),s=f===0?s:f},l.getProfileString=function(o){switch(o){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},l.getLevelString=function(o){return(o/10).toFixed(1)},l.getChromaFormatString=function(o){switch(o){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},l}();y.default=u},"./src/flv.js":function(x,y,E){E.r(y);var b=E("./src/utils/polyfill.js"),u=E("./src/core/features.js"),l=E("./src/io/loader.js"),o=E("./src/player/flv-player.js"),v=E("./src/player/native-player.js"),s=E("./src/player/player-events.js"),f=E("./src/player/player-errors.js"),p=E("./src/utils/logging-control.js"),d=E("./src/utils/exception.js");b.default.install();function i(m,S){var w=m;if(w==null||typeof w!="object")throw new d.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!w.hasOwnProperty("type"))throw new d.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(w.type){case"flv":return new o.default(w,S);default:return new v.default(w,S)}}function c(){return u.default.supportMSEH264Playback()}function a(){return u.default.getFeatureList()}var n={};n.createPlayer=i,n.isSupported=c,n.getFeatureList=a,n.BaseLoader=l.BaseLoader,n.LoaderStatus=l.LoaderStatus,n.LoaderErrors=l.LoaderErrors,n.Events=s.default,n.ErrorTypes=f.ErrorTypes,n.ErrorDetails=f.ErrorDetails,n.FlvPlayer=o.default,n.NativePlayer=v.default,n.LoggingControl=p.default,Object.defineProperty(n,"version",{enumerable:!0,get:function(){return"1.6.2"}}),y.default=n},"./src/index.js":function(x,y,E){x.exports=E("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(x,y,E){E.r(y);var b=E("./src/utils/browser.js"),u=E("./src/io/loader.js"),l=E("./src/utils/exception.js"),o=function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,i){d.__proto__=i}||function(d,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(d[c]=i[c])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),v=function(s){o(f,s);function f(p,d){var i=s.call(this,"fetch-stream-loader")||this;return i.TAG="FetchStreamLoader",i._seekHandler=p,i._config=d,i._needStash=!0,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i}return f.isSupported=function(){try{var p=b.default.msedge&&b.default.version.minor>=15048,d=b.default.msedge?p:!0;return self.fetch&&self.ReadableStream&&d}catch{return!1}},f.prototype.destroy=function(){this.isWorking()&&this.abort(),s.prototype.destroy.call(this)},f.prototype.open=function(p,d){var i=this;this._dataSource=p,this._range=d;var c=p.url;this._config.reuseRedirectedURL&&p.redirectedURL!=null&&(c=p.redirectedURL);var a=this._seekHandler.getConfig(c,d),n=new self.Headers;if(typeof a.headers=="object"){var m=a.headers;for(var S in m)m.hasOwnProperty(S)&&n.append(S,m[S])}var w={method:"GET",headers:n,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var S in this._config.headers)n.append(S,this._config.headers[S]);p.cors===!1&&(w.mode="same-origin"),p.withCredentials&&(w.credentials="include"),p.referrerPolicy&&(w.referrerPolicy=p.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,w.signal=this._abortController.signal),this._status=u.LoaderStatus.kConnecting,self.fetch(a.url,w).then(function(D){if(i._requestAbort){i._status=u.LoaderStatus.kIdle,D.body.cancel();return}if(D.ok&&D.status>=200&&D.status<=299){if(D.url!==a.url&&i._onURLRedirect){var R=i._seekHandler.removeURLParameters(D.url);i._onURLRedirect(R)}var A=D.headers.get("Content-Length");return A!=null&&(i._contentLength=parseInt(A),i._contentLength!==0&&i._onContentLengthKnown&&i._onContentLengthKnown(i._contentLength)),i._pump.call(i,D.body.getReader())}else if(i._status=u.LoaderStatus.kError,i._onError)i._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:D.status,msg:D.statusText});else throw new l.RuntimeException("FetchStreamLoader: Http code invalid, "+D.status+" "+D.statusText)}).catch(function(D){if(!(i._abortController&&i._abortController.signal.aborted))if(i._status=u.LoaderStatus.kError,i._onError)i._onError(u.LoaderErrors.EXCEPTION,{code:-1,msg:D.message});else throw D})},f.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==u.LoaderStatus.kBuffering||!b.default.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},f.prototype._pump=function(p){var d=this;return p.read().then(function(i){if(i.done)if(d._contentLength!==null&&d._receivedLength<d._contentLength){d._status=u.LoaderStatus.kError;var c=u.LoaderErrors.EARLY_EOF,a={code:-1,msg:"Fetch stream meet Early-EOF"};if(d._onError)d._onError(c,a);else throw new l.RuntimeException(a.msg)}else d._status=u.LoaderStatus.kComplete,d._onComplete&&d._onComplete(d._range.from,d._range.from+d._receivedLength-1);else{if(d._abortController&&d._abortController.signal.aborted){d._status=u.LoaderStatus.kComplete;return}else if(d._requestAbort===!0)return d._status=u.LoaderStatus.kComplete,p.cancel();d._status=u.LoaderStatus.kBuffering;var n=i.value.buffer,m=d._range.from+d._receivedLength;d._receivedLength+=n.byteLength,d._onDataArrival&&d._onDataArrival(n,m,d._receivedLength),d._pump(p)}}).catch(function(i){if(d._abortController&&d._abortController.signal.aborted){d._status=u.LoaderStatus.kComplete;return}if(!(i.code===11&&b.default.msedge)){d._status=u.LoaderStatus.kError;var c=0,a=null;if((i.code===19||i.message==="network error")&&(d._contentLength===null||d._contentLength!==null&&d._receivedLength<d._contentLength)?(c=u.LoaderErrors.EARLY_EOF,a={code:i.code,msg:"Fetch stream meet Early-EOF"}):(c=u.LoaderErrors.EXCEPTION,a={code:i.code,msg:i.message}),d._onError)d._onError(c,a);else throw new l.RuntimeException(a.msg)}})},f}(u.BaseLoader);y.default=v},"./src/io/io-controller.js":function(x,y,E){E.r(y);var b=E("./src/utils/logger.js"),u=E("./src/io/speed-sampler.js"),l=E("./src/io/loader.js"),o=E("./src/io/fetch-stream-loader.js"),v=E("./src/io/xhr-moz-chunked-loader.js"),s=E("./src/io/xhr-range-loader.js"),f=E("./src/io/websocket-loader.js"),p=E("./src/io/range-seek-handler.js"),d=E("./src/io/param-seek-handler.js"),i=E("./src/utils/exception.js"),c=function(){function a(n,m,S){this.TAG="IOController",this._config=m,this._extraData=S,this._stashInitialSize=1024*384,m.stashInitialSize!=null&&m.stashInitialSize>0&&(this._stashInitialSize=m.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=1024*1024*3,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,m.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=n,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(n.url),this._refTotalLength=n.filesize?n.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new u.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return a.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},a.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},a.prototype.isPaused=function(){return this._paused},Object.defineProperty(a.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"extraData",{get:function(){return this._extraData},set:function(n){this._extraData=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(n){this._onDataArrival=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(n){this._onSeeked=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onError",{get:function(){return this._onError},set:function(n){this._onError=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onComplete",{get:function(){return this._onComplete},set:function(n){this._onComplete=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(n){this._onRedirect=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(n){this._onRecoveredEarlyEof=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentSpeed",{get:function(){return this._loaderClass===s.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),a.prototype._selectSeekHandler=function(){var n=this._config;if(n.seekType==="range")this._seekHandler=new p.default(this._config.rangeLoadZeroStart);else if(n.seekType==="param"){var m=n.seekParamStart||"bstart",S=n.seekParamEnd||"bend";this._seekHandler=new d.default(m,S)}else if(n.seekType==="custom"){if(typeof n.customSeekHandler!="function")throw new i.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new n.customSeekHandler}else throw new i.InvalidArgumentException("Invalid seekType in config: "+n.seekType)},a.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=f.default;else if(o.default.isSupported())this._loaderClass=o.default;else if(v.default.isSupported())this._loaderClass=v.default;else if(s.default.isSupported())this._loaderClass=s.default;else throw new i.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!")},a.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},a.prototype.open=function(n){this._currentRange={from:0,to:-1},n&&(this._currentRange.from=n),this._speedSampler.reset(),n||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},a.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},a.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},a.prototype.resume=function(){if(this._paused){this._paused=!1;var n=this._resumeFrom;this._resumeFrom=0,this._internalSeek(n,!0)}},a.prototype.seek=function(n){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(n,!0)},a.prototype._internalSeek=function(n,m){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(m),this._loader.destroy(),this._loader=null;var S={from:n,to:-1};this._currentRange={from:S.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,S),this._onSeeked&&this._onSeeked()},a.prototype.updateUrl=function(n){if(!n||typeof n!="string"||n.length===0)throw new i.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=n},a.prototype._expandBuffer=function(n){for(var m=this._stashSize;m+1024*1024*1<n;)m*=2;if(m+=1024*1024*1,m!==this._bufferSize){var S=new ArrayBuffer(m);if(this._stashUsed>0){var w=new Uint8Array(this._stashBuffer,0,this._stashUsed),D=new Uint8Array(S,0,m);D.set(w,0)}this._stashBuffer=S,this._bufferSize=m}},a.prototype._normalizeSpeed=function(n){var m=this._speedNormalizeList,S=m.length-1,w=0,D=0,R=S;if(n<m[0])return m[0];for(;D<=R;){if(w=D+Math.floor((R-D)/2),w===S||n>=m[w]&&n<m[w+1])return m[w];m[w]<n?D=w+1:R=w-1}},a.prototype._adjustStashSize=function(n){var m=0;this._config.isLive||n<512?m=n:n>=512&&n<=1024?m=Math.floor(n*1.5):m=n*2,m>8192&&(m=8192);var S=m*1024+1024*1024*1;this._bufferSize<S&&this._expandBuffer(S),this._stashSize=m*1024},a.prototype._dispatchChunks=function(n,m){return this._currentRange.to=m+n.byteLength-1,this._onDataArrival(n,m)},a.prototype._onURLRedirect=function(n){this._redirectedURL=n,this._onRedirect&&this._onRedirect(n)},a.prototype._onContentLengthKnown=function(n){n&&this._fullRequestFlag&&(this._totalLength=n,this._fullRequestFlag=!1)},a.prototype._onLoaderChunkArrival=function(n,m,S){if(!this._onDataArrival)throw new i.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(n.byteLength);var w=this._speedSampler.lastSecondKBps;if(w!==0){var D=this._normalizeSpeed(w);this._speedNormalized!==D&&(this._speedNormalized=D,this._adjustStashSize(D))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=m),this._stashUsed+n.byteLength<=this._stashSize){var L=new Uint8Array(this._stashBuffer,0,this._stashSize);L.set(new Uint8Array(n),this._stashUsed),this._stashUsed+=n.byteLength}else{var L=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var O=this._stashBuffer.slice(0,this._stashUsed),R=this._dispatchChunks(O,this._stashByteStart);if(R<O.byteLength){if(R>0){var C=new Uint8Array(O,R);L.set(C,0),this._stashUsed=C.byteLength,this._stashByteStart+=R}}else this._stashUsed=0,this._stashByteStart+=R;this._stashUsed+n.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+n.byteLength),L=new Uint8Array(this._stashBuffer,0,this._bufferSize)),L.set(new Uint8Array(n),this._stashUsed),this._stashUsed+=n.byteLength}else{var R=this._dispatchChunks(n,m);if(R<n.byteLength){var A=n.byteLength-R;A>this._bufferSize&&(this._expandBuffer(A),L=new Uint8Array(this._stashBuffer,0,this._bufferSize)),L.set(new Uint8Array(n,R),0),this._stashUsed+=A,this._stashByteStart=m+R}}}else if(this._stashUsed===0){var R=this._dispatchChunks(n,m);if(R<n.byteLength){var A=n.byteLength-R;A>this._bufferSize&&this._expandBuffer(A);var L=new Uint8Array(this._stashBuffer,0,this._bufferSize);L.set(new Uint8Array(n,R),0),this._stashUsed+=A,this._stashByteStart=m+R}}else{this._stashUsed+n.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+n.byteLength);var L=new Uint8Array(this._stashBuffer,0,this._bufferSize);L.set(new Uint8Array(n),this._stashUsed),this._stashUsed+=n.byteLength;var R=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(R<this._stashUsed&&R>0){var C=new Uint8Array(this._stashBuffer,R);L.set(C,0)}this._stashUsed-=R,this._stashByteStart+=R}}},a.prototype._flushStashBuffer=function(n){if(this._stashUsed>0){var m=this._stashBuffer.slice(0,this._stashUsed),S=this._dispatchChunks(m,this._stashByteStart),w=m.byteLength-S;if(S<m.byteLength)if(n)b.default.w(this.TAG,w+" bytes unconsumed data remain when flush buffer, dropped");else{if(S>0){var D=new Uint8Array(this._stashBuffer,0,this._bufferSize),R=new Uint8Array(m,S);D.set(R,0),this._stashUsed=R.byteLength,this._stashByteStart+=S}return 0}return this._stashUsed=0,this._stashByteStart=0,w}return 0},a.prototype._onLoaderComplete=function(n,m){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},a.prototype._onLoaderError=function(n,m){switch(b.default.e(this.TAG,"Loader error, code = "+m.code+", msg = "+m.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,n=l.LoaderErrors.UNRECOVERABLE_EARLY_EOF),n){case l.LoaderErrors.EARLY_EOF:{if(!this._config.isLive&&this._totalLength){var S=this._currentRange.to+1;S<this._totalLength&&(b.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(S,!1));return}n=l.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break}case l.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case l.LoaderErrors.CONNECTING_TIMEOUT:case l.LoaderErrors.HTTP_STATUS_CODE_INVALID:case l.LoaderErrors.EXCEPTION:break}if(this._onError)this._onError(n,m);else throw new i.RuntimeException("IOException: "+m.msg)},a}();y.default=c},"./src/io/loader.js":function(x,y,E){E.r(y),E.d(y,{LoaderStatus:function(){return u},LoaderErrors:function(){return l},BaseLoader:function(){return o}});var b=E("./src/utils/exception.js"),u={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},l={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},o=function(){function v(s){this._type=s||"undefined",this._status=u.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return v.prototype.destroy=function(){this._status=u.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},v.prototype.isWorking=function(){return this._status===u.kConnecting||this._status===u.kBuffering},Object.defineProperty(v.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(s){this._onContentLengthKnown=s},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(s){this._onURLRedirect=s},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(s){this._onDataArrival=s},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onError",{get:function(){return this._onError},set:function(s){this._onError=s},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onComplete",{get:function(){return this._onComplete},set:function(s){this._onComplete=s},enumerable:!1,configurable:!0}),v.prototype.open=function(s,f){throw new b.NotImplementedException("Unimplemented abstract function!")},v.prototype.abort=function(){throw new b.NotImplementedException("Unimplemented abstract function!")},v}()},"./src/io/param-seek-handler.js":function(x,y,E){E.r(y);var b=function(){function u(l,o){this._startName=l,this._endName=o}return u.prototype.getConfig=function(l,o){var v=l;if(o.from!==0||o.to!==-1){var s=!0;v.indexOf("?")===-1&&(v+="?",s=!1),s&&(v+="&"),v+=this._startName+"="+o.from.toString(),o.to!==-1&&(v+="&"+this._endName+"="+o.to.toString())}return{url:v,headers:{}}},u.prototype.removeURLParameters=function(l){var o=l.split("?")[0],v=void 0,s=l.indexOf("?");s!==-1&&(v=l.substring(s+1));var f="";if(v!=null&&v.length>0)for(var p=v.split("&"),d=0;d<p.length;d++){var i=p[d].split("="),c=d>0;i[0]!==this._startName&&i[0]!==this._endName&&(c&&(f+="&"),f+=p[d])}return f.length===0?o:o+"?"+f},u}();y.default=b},"./src/io/range-seek-handler.js":function(x,y,E){E.r(y);var b=function(){function u(l){this._zeroStart=l||!1}return u.prototype.getConfig=function(l,o){var v={};if(o.from!==0||o.to!==-1){var s=void 0;o.to!==-1?s="bytes="+o.from.toString()+"-"+o.to.toString():s="bytes="+o.from.toString()+"-",v.Range=s}else this._zeroStart&&(v.Range="bytes=0-");return{url:l,headers:v}},u.prototype.removeURLParameters=function(l){return l},u}();y.default=b},"./src/io/speed-sampler.js":function(x,y,E){E.r(y);var b=function(){function u(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return u.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},u.prototype.addBytes=function(l){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=l,this._totalBytes+=l):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=l,this._totalBytes+=l):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=l,this._totalBytes+=l,this._lastCheckpoint=this._now())},Object.defineProperty(u.prototype,"currentKBps",{get:function(){this.addBytes(0);var l=(this._now()-this._lastCheckpoint)/1e3;return l==0&&(l=1),this._intervalBytes/l/1024},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"averageKBps",{get:function(){var l=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/l/1024},enumerable:!1,configurable:!0}),u}();y.default=b},"./src/io/websocket-loader.js":function(x,y,E){E.r(y);var b=E("./src/io/loader.js"),u=E("./src/utils/exception.js"),l=function(){var v=function(s,f){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&(p[i]=d[i])},v(s,f)};return function(s,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");v(s,f);function p(){this.constructor=s}s.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),o=function(v){l(s,v);function s(){var f=v.call(this,"websocket-loader")||this;return f.TAG="WebSocketLoader",f._needStash=!0,f._ws=null,f._requestAbort=!1,f._receivedLength=0,f}return s.isSupported=function(){try{return typeof self.WebSocket!="undefined"}catch{return!1}},s.prototype.destroy=function(){this._ws&&this.abort(),v.prototype.destroy.call(this)},s.prototype.open=function(f){try{var p=this._ws=new self.WebSocket(f.url);p.binaryType="arraybuffer",p.onopen=this._onWebSocketOpen.bind(this),p.onclose=this._onWebSocketClose.bind(this),p.onmessage=this._onWebSocketMessage.bind(this),p.onerror=this._onWebSocketError.bind(this),this._status=b.LoaderStatus.kConnecting}catch(i){this._status=b.LoaderStatus.kError;var d={code:i.code,msg:i.message};if(this._onError)this._onError(b.LoaderErrors.EXCEPTION,d);else throw new u.RuntimeException(d.msg)}},s.prototype.abort=function(){var f=this._ws;f&&(f.readyState===0||f.readyState===1)&&(this._requestAbort=!0,f.close()),this._ws=null,this._status=b.LoaderStatus.kComplete},s.prototype._onWebSocketOpen=function(f){this._status=b.LoaderStatus.kBuffering},s.prototype._onWebSocketClose=function(f){if(this._requestAbort===!0){this._requestAbort=!1;return}this._status=b.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)},s.prototype._onWebSocketMessage=function(f){var p=this;if(f.data instanceof ArrayBuffer)this._dispatchArrayBuffer(f.data);else if(f.data instanceof Blob){var d=new FileReader;d.onload=function(){p._dispatchArrayBuffer(d.result)},d.readAsArrayBuffer(f.data)}else{this._status=b.LoaderStatus.kError;var i={code:-1,msg:"Unsupported WebSocket message type: "+f.data.constructor.name};if(this._onError)this._onError(b.LoaderErrors.EXCEPTION,i);else throw new u.RuntimeException(i.msg)}},s.prototype._dispatchArrayBuffer=function(f){var p=f,d=this._receivedLength;this._receivedLength+=p.byteLength,this._onDataArrival&&this._onDataArrival(p,d,this._receivedLength)},s.prototype._onWebSocketError=function(f){this._status=b.LoaderStatus.kError;var p={code:f.code,msg:f.message};if(this._onError)this._onError(b.LoaderErrors.EXCEPTION,p);else throw new u.RuntimeException(p.msg)},s}(b.BaseLoader);y.default=o},"./src/io/xhr-moz-chunked-loader.js":function(x,y,E){E.r(y);var b=E("./src/utils/logger.js"),u=E("./src/io/loader.js"),l=E("./src/utils/exception.js"),o=function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,i){d.__proto__=i}||function(d,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(d[c]=i[c])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),v=function(s){o(f,s);function f(p,d){var i=s.call(this,"xhr-moz-chunked-loader")||this;return i.TAG="MozChunkedLoader",i._seekHandler=p,i._config=d,i._needStash=!0,i._xhr=null,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i}return f.isSupported=function(){try{var p=new XMLHttpRequest;return p.open("GET","https://example.com",!0),p.responseType="moz-chunked-arraybuffer",p.responseType==="moz-chunked-arraybuffer"}catch(d){return b.default.w("MozChunkedLoader",d.message),!1}},f.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),s.prototype.destroy.call(this)},f.prototype.open=function(p,d){this._dataSource=p,this._range=d;var i=p.url;this._config.reuseRedirectedURL&&p.redirectedURL!=null&&(i=p.redirectedURL);var c=this._seekHandler.getConfig(i,d);this._requestURL=c.url;var a=this._xhr=new XMLHttpRequest;if(a.open("GET",c.url,!0),a.responseType="moz-chunked-arraybuffer",a.onreadystatechange=this._onReadyStateChange.bind(this),a.onprogress=this._onProgress.bind(this),a.onloadend=this._onLoadEnd.bind(this),a.onerror=this._onXhrError.bind(this),p.withCredentials&&(a.withCredentials=!0),typeof c.headers=="object"){var n=c.headers;for(var m in n)n.hasOwnProperty(m)&&a.setRequestHeader(m,n[m])}if(typeof this._config.headers=="object"){var n=this._config.headers;for(var m in n)n.hasOwnProperty(m)&&a.setRequestHeader(m,n[m])}this._status=u.LoaderStatus.kConnecting,a.send()},f.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=u.LoaderStatus.kComplete},f.prototype._onReadyStateChange=function(p){var d=p.target;if(d.readyState===2){if(d.responseURL!=null&&d.responseURL!==this._requestURL&&this._onURLRedirect){var i=this._seekHandler.removeURLParameters(d.responseURL);this._onURLRedirect(i)}if(d.status!==0&&(d.status<200||d.status>299))if(this._status=u.LoaderStatus.kError,this._onError)this._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:d.status,msg:d.statusText});else throw new l.RuntimeException("MozChunkedLoader: Http code invalid, "+d.status+" "+d.statusText);else this._status=u.LoaderStatus.kBuffering}},f.prototype._onProgress=function(p){if(this._status!==u.LoaderStatus.kError){this._contentLength===null&&p.total!==null&&p.total!==0&&(this._contentLength=p.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var d=p.target.response,i=this._range.from+this._receivedLength;this._receivedLength+=d.byteLength,this._onDataArrival&&this._onDataArrival(d,i,this._receivedLength)}},f.prototype._onLoadEnd=function(p){if(this._requestAbort===!0){this._requestAbort=!1;return}else if(this._status===u.LoaderStatus.kError)return;this._status=u.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)},f.prototype._onXhrError=function(p){this._status=u.LoaderStatus.kError;var d=0,i=null;if(this._contentLength&&p.loaded<this._contentLength?(d=u.LoaderErrors.EARLY_EOF,i={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(d=u.LoaderErrors.EXCEPTION,i={code:-1,msg:p.constructor.name+" "+p.type}),this._onError)this._onError(d,i);else throw new l.RuntimeException(i.msg)},f}(u.BaseLoader);y.default=v},"./src/io/xhr-range-loader.js":function(x,y,E){E.r(y);var b=E("./src/utils/logger.js"),u=E("./src/io/speed-sampler.js"),l=E("./src/io/loader.js"),o=E("./src/utils/exception.js"),v=function(){var f=function(p,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(i[a]=c[a])},f(p,d)};return function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(p,d);function i(){this.constructor=p}p.prototype=d===null?Object.create(d):(i.prototype=d.prototype,new i)}}(),s=function(f){v(p,f);function p(d,i){var c=f.call(this,"xhr-range-loader")||this;return c.TAG="RangeLoader",c._seekHandler=d,c._config=i,c._needStash=!1,c._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],c._currentChunkSizeKB=384,c._currentSpeedNormalized=0,c._zeroSpeedChunkCount=0,c._xhr=null,c._speedSampler=new u.default,c._requestAbort=!1,c._waitForTotalLength=!1,c._totalLengthReceived=!1,c._currentRequestURL=null,c._currentRedirectedURL=null,c._currentRequestRange=null,c._totalLength=null,c._contentLength=null,c._receivedLength=0,c._lastTimeLoaded=0,c}return p.isSupported=function(){try{var d=new XMLHttpRequest;return d.open("GET","https://example.com",!0),d.responseType="arraybuffer",d.responseType==="arraybuffer"}catch(i){return b.default.w("RangeLoader",i.message),!1}},p.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),f.prototype.destroy.call(this)},Object.defineProperty(p.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),p.prototype.open=function(d,i){this._dataSource=d,this._range=i,this._status=l.LoaderStatus.kConnecting;var c=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(c=!0,this._totalLength=this._dataSource.filesize),!this._totalLengthReceived&&!c?(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1})):this._openSubRange()},p.prototype._openSubRange=function(){var d=this._currentChunkSizeKB*1024,i=this._range.from+this._receivedLength,c=i+d;this._contentLength!=null&&c-this._range.from>=this._contentLength&&(c=this._range.from+this._contentLength-1),this._currentRequestRange={from:i,to:c},this._internalOpen(this._dataSource,this._currentRequestRange)},p.prototype._internalOpen=function(d,i){this._lastTimeLoaded=0;var c=d.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?c=this._currentRedirectedURL:d.redirectedURL!=null&&(c=d.redirectedURL));var a=this._seekHandler.getConfig(c,i);this._currentRequestURL=a.url;var n=this._xhr=new XMLHttpRequest;if(n.open("GET",a.url,!0),n.responseType="arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onload=this._onLoad.bind(this),n.onerror=this._onXhrError.bind(this),d.withCredentials&&(n.withCredentials=!0),typeof a.headers=="object"){var m=a.headers;for(var S in m)m.hasOwnProperty(S)&&n.setRequestHeader(S,m[S])}if(typeof this._config.headers=="object"){var m=this._config.headers;for(var S in m)m.hasOwnProperty(S)&&n.setRequestHeader(S,m[S])}n.send()},p.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=l.LoaderStatus.kComplete},p.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},p.prototype._onReadyStateChange=function(d){var i=d.target;if(i.readyState===2){if(i.responseURL!=null){var c=this._seekHandler.removeURLParameters(i.responseURL);i.responseURL!==this._currentRequestURL&&c!==this._currentRedirectedURL&&(this._currentRedirectedURL=c,this._onURLRedirect&&this._onURLRedirect(c))}if(i.status>=200&&i.status<=299){if(this._waitForTotalLength)return;this._status=l.LoaderStatus.kBuffering}else if(this._status=l.LoaderStatus.kError,this._onError)this._onError(l.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:i.status,msg:i.statusText});else throw new o.RuntimeException("RangeLoader: Http code invalid, "+i.status+" "+i.statusText)}},p.prototype._onProgress=function(d){if(this._status!==l.LoaderStatus.kError){if(this._contentLength===null){var i=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,i=!0;var c=d.total;this._internalAbort(),c!=null&c!==0&&(this._totalLength=c)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,i){this._openSubRange();return}this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var a=d.loaded-this._lastTimeLoaded;this._lastTimeLoaded=d.loaded,this._speedSampler.addBytes(a)}},p.prototype._normalizeSpeed=function(d){var i=this._chunkSizeKBList,c=i.length-1,a=0,n=0,m=c;if(d<i[0])return i[0];for(;n<=m;){if(a=n+Math.floor((m-n)/2),a===c||d>=i[a]&&d<i[a+1])return i[a];i[a]<d?n=a+1:m=a-1}},p.prototype._onLoad=function(d){if(this._status!==l.LoaderStatus.kError){if(this._waitForTotalLength){this._waitForTotalLength=!1;return}this._lastTimeLoaded=0;var i=this._speedSampler.lastSecondKBps;if(i===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(i=this._speedSampler.currentKBps)),i!==0){var c=this._normalizeSpeed(i);this._currentSpeedNormalized!==c&&(this._currentSpeedNormalized=c,this._currentChunkSizeKB=c)}var a=d.target.response,n=this._range.from+this._receivedLength;this._receivedLength+=a.byteLength;var m=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():m=!0,this._onDataArrival&&this._onDataArrival(a,n,this._receivedLength),m&&(this._status=l.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},p.prototype._onXhrError=function(d){this._status=l.LoaderStatus.kError;var i=0,c=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(i=l.LoaderErrors.EARLY_EOF,c={code:-1,msg:"RangeLoader meet Early-Eof"}):(i=l.LoaderErrors.EXCEPTION,c={code:-1,msg:d.constructor.name+" "+d.type}),this._onError)this._onError(i,c);else throw new o.RuntimeException(c.msg)},p}(l.BaseLoader);y.default=s},"./src/player/flv-player.js":function(x,y,E){E.r(y);var b=E("./node_modules/events/events.js"),u=E.n(b),l=E("./src/utils/logger.js"),o=E("./src/utils/browser.js"),v=E("./src/player/player-events.js"),s=E("./src/core/transmuxer.js"),f=E("./src/core/transmuxing-events.js"),p=E("./src/core/mse-controller.js"),d=E("./src/core/mse-events.js"),i=E("./src/player/player-errors.js"),c=E("./src/config.js"),a=E("./src/utils/exception.js"),n=function(){function m(S,w){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(u()),this._config=(0,c.createDefaultConfig)(),typeof w=="object"&&Object.assign(this._config,w),S.type.toLowerCase()!=="flv")throw new a.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");S.isLive===!0&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=S,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var D=o.default.chrome&&(o.default.version.major<50||o.default.version.major===50&&o.default.version.build<2661);this._alwaysSeekKeyframe=!!(D||o.default.msedge||o.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return m.prototype.destroy=function(){this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},m.prototype.on=function(S,w){var D=this;S===v.default.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(function(){D._emitter.emit(v.default.MEDIA_INFO,D.mediaInfo)}):S===v.default.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(function(){D._emitter.emit(v.default.STATISTICS_INFO,D.statisticsInfo)}),this._emitter.addListener(S,w)},m.prototype.off=function(S,w){this._emitter.removeListener(S,w)},m.prototype.attachMediaElement=function(S){var w=this;if(this._mediaElement=S,S.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),S.addEventListener("seeking",this.e.onvSeeking),S.addEventListener("canplay",this.e.onvCanPlay),S.addEventListener("stalled",this.e.onvStalled),S.addEventListener("progress",this.e.onvProgress),this._msectl=new p.default(this._config),this._msectl.on(d.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(d.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(d.default.SOURCE_OPEN,function(){w._mseSourceOpened=!0,w._hasPendingLoad&&(w._hasPendingLoad=!1,w.load())}),this._msectl.on(d.default.ERROR,function(D){w._emitter.emit(v.default.ERROR,i.ErrorTypes.MEDIA_ERROR,i.ErrorDetails.MEDIA_MSE_ERROR,D)}),this._msectl.attachMediaElement(S),this._pendingSeekTime!=null)try{S.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},m.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},m.prototype.load=function(){var S=this;if(!this._mediaElement)throw new a.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new a.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&this._mseSourceOpened===!1){this._hasPendingLoad=!0;return}this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new s.default(this._mediaDataSource,this._config),this._transmuxer.on(f.default.INIT_SEGMENT,function(w,D){S._msectl.appendInitSegment(D)}),this._transmuxer.on(f.default.MEDIA_SEGMENT,function(w,D){if(S._msectl.appendMediaSegment(D),S._config.lazyLoad&&!S._config.isLive){var R=S._mediaElement.currentTime;D.info.endDts>=(R+S._config.lazyLoadMaxDuration)*1e3&&S._progressChecker==null&&(l.default.v(S.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),S._suspendTransmuxer())}}),this._transmuxer.on(f.default.LOADING_COMPLETE,function(){S._msectl.endOfStream(),S._emitter.emit(v.default.LOADING_COMPLETE)}),this._transmuxer.on(f.default.RECOVERED_EARLY_EOF,function(){S._emitter.emit(v.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(f.default.IO_ERROR,function(w,D){S._emitter.emit(v.default.ERROR,i.ErrorTypes.NETWORK_ERROR,w,D)}),this._transmuxer.on(f.default.DEMUX_ERROR,function(w,D){S._emitter.emit(v.default.ERROR,i.ErrorTypes.MEDIA_ERROR,w,{code:-1,msg:D})}),this._transmuxer.on(f.default.MEDIA_INFO,function(w){S._mediaInfo=w,S._emitter.emit(v.default.MEDIA_INFO,Object.assign({},w))}),this._transmuxer.on(f.default.METADATA_ARRIVED,function(w){S._emitter.emit(v.default.METADATA_ARRIVED,w)}),this._transmuxer.on(f.default.SCRIPTDATA_ARRIVED,function(w){S._emitter.emit(v.default.SCRIPTDATA_ARRIVED,w)}),this._transmuxer.on(f.default.STATISTICS_INFO,function(w){S._statisticsInfo=S._fillStatisticsInfo(w),S._emitter.emit(v.default.STATISTICS_INFO,Object.assign({},S._statisticsInfo))}),this._transmuxer.on(f.default.RECOMMEND_SEEKPOINT,function(w){S._mediaElement&&!S._config.accurateSeek&&(S._requestSetTime=!0,S._mediaElement.currentTime=w/1e3)}),this._transmuxer.open()}},m.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},m.prototype.play=function(){return this._mediaElement.play()},m.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(m.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(S){this._mediaElement.volume=S},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(S){this._mediaElement.muted=S},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(S){this._mediaElement?this._internalSeek(S):this._pendingSeekTime=S},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"statisticsInfo",{get:function(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),m.prototype._fillStatisticsInfo=function(S){if(S.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return S;var w=!0,D=0,R=0;if(this._mediaElement.getVideoPlaybackQuality){var A=this._mediaElement.getVideoPlaybackQuality();D=A.totalVideoFrames,R=A.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(D=this._mediaElement.webkitDecodedFrameCount,R=this._mediaElement.webkitDroppedFrameCount):w=!1;return w&&(S.decodedFrames=D,S.droppedFrames=R),S},m.prototype._onmseUpdateEnd=function(){if(!(!this._config.lazyLoad||this._config.isLive)){for(var S=this._mediaElement.buffered,w=this._mediaElement.currentTime,D=0,R=0;R<S.length;R++){var A=S.start(R),L=S.end(R);if(A<=w&&w<L){D=L;break}}D>=w+this._config.lazyLoadMaxDuration&&this._progressChecker==null&&(l.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},m.prototype._onmseBufferFull=function(){l.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()},m.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},m.prototype._checkProgressAndResume=function(){for(var S=this._mediaElement.currentTime,w=this._mediaElement.buffered,D=!1,R=0;R<w.length;R++){var A=w.start(R),L=w.end(R);if(S>=A&&S<L){S>=L-this._config.lazyLoadRecoverDuration&&(D=!0);break}}D&&(window.clearInterval(this._progressChecker),this._progressChecker=null,D&&(l.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},m.prototype._isTimepointBuffered=function(S){for(var w=this._mediaElement.buffered,D=0;D<w.length;D++){var R=w.start(D),A=w.end(D);if(S>=R&&S<A)return!0}return!1},m.prototype._internalSeek=function(S){var w=this._isTimepointBuffered(S),D=!1,R=0;if(S<1&&this._mediaElement.buffered.length>0){var A=this._mediaElement.buffered.start(0);(A<1&&S<A||o.default.safari)&&(D=!0,R=o.default.safari?.1:A)}if(D)this._requestSetTime=!0,this._mediaElement.currentTime=R;else if(w){if(!this._alwaysSeekKeyframe)this._requestSetTime=!0,this._mediaElement.currentTime=S;else{var L=this._msectl.getNearestKeyframe(Math.floor(S*1e3));this._requestSetTime=!0,L!=null?this._mediaElement.currentTime=L.dts/1e3:this._mediaElement.currentTime=S}this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(S),this._transmuxer.seek(Math.floor(S*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=S)},m.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var S=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(S)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(S),this._transmuxer.seek(Math.floor(S*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=S))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},m.prototype._checkAndResumeStuckPlayback=function(S){var w=this._mediaElement;if(S||!this._receivedCanPlay||w.readyState<2){var D=w.buffered;D.length>0&&w.currentTime<D.start(0)&&(l.default.w(this.TAG,"Playback seems stuck at "+w.currentTime+", seek to "+D.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=D.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},m.prototype._onvLoadedMetadata=function(S){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},m.prototype._onvSeeking=function(S){var w=this._mediaElement.currentTime,D=this._mediaElement.buffered;if(this._requestSetTime){this._requestSetTime=!1;return}if(w<1&&D.length>0){var R=D.start(0);if(R<1&&w<R||o.default.safari){this._requestSetTime=!0,this._mediaElement.currentTime=o.default.safari?.1:R;return}}if(this._isTimepointBuffered(w)){if(this._alwaysSeekKeyframe){var A=this._msectl.getNearestKeyframe(Math.floor(w*1e3));A!=null&&(this._requestSetTime=!0,this._mediaElement.currentTime=A.dts/1e3)}this._progressChecker!=null&&this._checkProgressAndResume();return}this._seekpointRecord={seekPoint:w,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},m.prototype._onvCanPlay=function(S){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},m.prototype._onvStalled=function(S){this._checkAndResumeStuckPlayback(!0)},m.prototype._onvProgress=function(S){this._checkAndResumeStuckPlayback()},m}();y.default=n},"./src/player/native-player.js":function(x,y,E){E.r(y);var b=E("./node_modules/events/events.js"),u=E.n(b),l=E("./src/player/player-events.js"),o=E("./src/config.js"),v=E("./src/utils/exception.js"),s=function(){function f(p,d){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(u()),this._config=(0,o.createDefaultConfig)(),typeof d=="object"&&Object.assign(this._config,d),p.type.toLowerCase()==="flv")throw new v.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(p.hasOwnProperty("segments"))throw new v.InvalidArgumentException("NativePlayer("+p.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=p,this._mediaElement=null}return f.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},f.prototype.on=function(p,d){var i=this;p===l.default.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){i._emitter.emit(l.default.MEDIA_INFO,i.mediaInfo)}):p===l.default.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){i._emitter.emit(l.default.STATISTICS_INFO,i.statisticsInfo)}),this._emitter.addListener(p,d)},f.prototype.off=function(p,d){this._emitter.removeListener(p,d)},f.prototype.attachMediaElement=function(p){if(this._mediaElement=p,p.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{p.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},f.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},f.prototype.load=function(){if(!this._mediaElement)throw new v.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},f.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},f.prototype.play=function(){return this._mediaElement.play()},f.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(f.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(p){this._mediaElement.volume=p},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(p){this._mediaElement.muted=p},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(p){this._mediaElement?this._mediaElement.currentTime=p:this._pendingSeekTime=p},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"mediaInfo",{get:function(){var p=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",d={mimeType:p+this._mediaDataSource.type};return this._mediaElement&&(d.duration=Math.floor(this._mediaElement.duration*1e3),this._mediaElement instanceof HTMLVideoElement&&(d.width=this._mediaElement.videoWidth,d.height=this._mediaElement.videoHeight)),d},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"statisticsInfo",{get:function(){var p={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return p;var d=!0,i=0,c=0;if(this._mediaElement.getVideoPlaybackQuality){var a=this._mediaElement.getVideoPlaybackQuality();i=a.totalVideoFrames,c=a.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(i=this._mediaElement.webkitDecodedFrameCount,c=this._mediaElement.webkitDroppedFrameCount):d=!1;return d&&(p.decodedFrames=i,p.droppedFrames=c),p},enumerable:!1,configurable:!0}),f.prototype._onvLoadedMetadata=function(p){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(l.default.MEDIA_INFO,this.mediaInfo)},f.prototype._reportStatisticsInfo=function(){this._emitter.emit(l.default.STATISTICS_INFO,this.statisticsInfo)},f}();y.default=s},"./src/player/player-errors.js":function(x,y,E){E.r(y),E.d(y,{ErrorTypes:function(){return l},ErrorDetails:function(){return o}});var b=E("./src/io/loader.js"),u=E("./src/demux/demux-errors.js"),l={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},o={NETWORK_EXCEPTION:b.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:b.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:b.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:b.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:u.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:u.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:u.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(x,y,E){E.r(y);var b={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};y.default=b},"./src/remux/aac-silent.js":function(x,y,E){E.r(y);var b=function(){function u(){}return u.getSilentFrame=function(l,o){if(l==="mp4a.40.2"){if(o===1)return new Uint8Array([0,200,0,128,35,128]);if(o===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(o===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(o===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(o===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(o===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(o===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(o===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(o===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},u}();y.default=b},"./src/remux/mp4-generator.js":function(x,y,E){E.r(y);var b=function(){function u(){}return u.init=function(){u.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var l in u.types)u.types.hasOwnProperty(l)&&(u.types[l]=[l.charCodeAt(0),l.charCodeAt(1),l.charCodeAt(2),l.charCodeAt(3)]);var o=u.constants={};o.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),o.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),o.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),o.STSC=o.STCO=o.STTS,o.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),o.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),o.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),o.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),o.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},u.box=function(l){for(var o=8,v=null,s=Array.prototype.slice.call(arguments,1),f=s.length,p=0;p<f;p++)o+=s[p].byteLength;v=new Uint8Array(o),v[0]=o>>>24&255,v[1]=o>>>16&255,v[2]=o>>>8&255,v[3]=o&255,v.set(l,4);for(var d=8,p=0;p<f;p++)v.set(s[p],d),d+=s[p].byteLength;return v},u.generateInitSegment=function(l){var o=u.box(u.types.ftyp,u.constants.FTYP),v=u.moov(l),s=new Uint8Array(o.byteLength+v.byteLength);return s.set(o,0),s.set(v,o.byteLength),s},u.moov=function(l){var o=u.mvhd(l.timescale,l.duration),v=u.trak(l),s=u.mvex(l);return u.box(u.types.moov,o,v,s)},u.mvhd=function(l,o){return u.box(u.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,l&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},u.trak=function(l){return u.box(u.types.trak,u.tkhd(l),u.mdia(l))},u.tkhd=function(l){var o=l.id,v=l.duration,s=l.presentWidth,f=l.presentHeight;return u.box(u.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,o&255,0,0,0,0,v>>>24&255,v>>>16&255,v>>>8&255,v&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>>8&255,s&255,0,0,f>>>8&255,f&255,0,0]))},u.mdia=function(l){return u.box(u.types.mdia,u.mdhd(l),u.hdlr(l),u.minf(l))},u.mdhd=function(l){var o=l.timescale,v=l.duration;return u.box(u.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,o&255,v>>>24&255,v>>>16&255,v>>>8&255,v&255,85,196,0,0]))},u.hdlr=function(l){var o=null;return l.type==="audio"?o=u.constants.HDLR_AUDIO:o=u.constants.HDLR_VIDEO,u.box(u.types.hdlr,o)},u.minf=function(l){var o=null;return l.type==="audio"?o=u.box(u.types.smhd,u.constants.SMHD):o=u.box(u.types.vmhd,u.constants.VMHD),u.box(u.types.minf,o,u.dinf(),u.stbl(l))},u.dinf=function(){var l=u.box(u.types.dinf,u.box(u.types.dref,u.constants.DREF));return l},u.stbl=function(l){var o=u.box(u.types.stbl,u.stsd(l),u.box(u.types.stts,u.constants.STTS),u.box(u.types.stsc,u.constants.STSC),u.box(u.types.stsz,u.constants.STSZ),u.box(u.types.stco,u.constants.STCO));return o},u.stsd=function(l){return l.type==="audio"?l.codec==="mp3"?u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp3(l)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp4a(l)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.avc1(l))},u.mp3=function(l){var o=l.channelCount,v=l.audioSampleRate,s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,o,0,16,0,0,0,0,v>>>8&255,v&255,0,0]);return u.box(u.types[".mp3"],s)},u.mp4a=function(l){var o=l.channelCount,v=l.audioSampleRate,s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,o,0,16,0,0,0,0,v>>>8&255,v&255,0,0]);return u.box(u.types.mp4a,s,u.esds(l))},u.esds=function(l){var o=l.config||[],v=o.length,s=new Uint8Array([0,0,0,0,3,23+v,0,1,0,4,15+v,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([v]).concat(o).concat([6,1,2]));return u.box(u.types.esds,s)},u.avc1=function(l){var o=l.avcc,v=l.codecWidth,s=l.codecHeight,f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,v>>>8&255,v&255,s>>>8&255,s&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return u.box(u.types.avc1,f,u.box(u.types.avcC,o))},u.mvex=function(l){return u.box(u.types.mvex,u.trex(l))},u.trex=function(l){var o=l.id,v=new Uint8Array([0,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,o&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return u.box(u.types.trex,v)},u.moof=function(l,o){return u.box(u.types.moof,u.mfhd(l.sequenceNumber),u.traf(l,o))},u.mfhd=function(l){var o=new Uint8Array([0,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,l&255]);return u.box(u.types.mfhd,o)},u.traf=function(l,o){var v=l.id,s=u.box(u.types.tfhd,new Uint8Array([0,0,0,0,v>>>24&255,v>>>16&255,v>>>8&255,v&255])),f=u.box(u.types.tfdt,new Uint8Array([0,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,o&255])),p=u.sdtp(l),d=u.trun(l,p.byteLength+16+16+8+16+8+8);return u.box(u.types.traf,s,f,d,p)},u.sdtp=function(l){for(var o=l.samples||[],v=o.length,s=new Uint8Array(4+v),f=0;f<v;f++){var p=o[f].flags;s[f+4]=p.isLeading<<6|p.dependsOn<<4|p.isDependedOn<<2|p.hasRedundancy}return u.box(u.types.sdtp,s)},u.trun=function(l,o){var v=l.samples||[],s=v.length,f=12+16*s,p=new Uint8Array(f);o+=8+f,p.set([0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255],0);for(var d=0;d<s;d++){var i=v[d].duration,c=v[d].size,a=v[d].flags,n=v[d].cts;p.set([i>>>24&255,i>>>16&255,i>>>8&255,i&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.isNonSync,0,0,n>>>24&255,n>>>16&255,n>>>8&255,n&255],12+16*d)}return u.box(u.types.trun,p)},u.mdat=function(l){return u.box(u.types.mdat,l)},u}();b.init(),y.default=b},"./src/remux/mp4-remuxer.js":function(x,y,E){E.r(y);var b=E("./src/utils/logger.js"),u=E("./src/remux/mp4-generator.js"),l=E("./src/remux/aac-silent.js"),o=E("./src/utils/browser.js"),v=E("./src/core/media-segment-info.js"),s=E("./src/utils/exception.js"),f=function(){function p(d){this.TAG="MP4Remuxer",this._config=d,this._isLive=d.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new v.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new v.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!!(o.default.chrome&&(o.default.version.major<50||o.default.version.major===50&&o.default.version.build<2661)),this._fillSilentAfterSeek=o.default.msedge||o.default.msie,this._mp3UseMpegAudio=!o.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return p.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},p.prototype.bindDataSource=function(d){return d.onDataAvailable=this.remux.bind(this),d.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(p.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(d){this._onInitSegment=d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(d){this._onMediaSegment=d},enumerable:!1,configurable:!0}),p.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},p.prototype.seek=function(d){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},p.prototype.remux=function(d,i){if(!this._onMediaSegment)throw new s.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(d,i),this._remuxVideo(i),this._remuxAudio(d)},p.prototype._onTrackMetadataReceived=function(d,i){var c=null,a="mp4",n=i.codec;if(d==="audio")this._audioMeta=i,i.codec==="mp3"&&this._mp3UseMpegAudio?(a="mpeg",n="",c=new Uint8Array):c=u.default.generateInitSegment(i);else if(d==="video")this._videoMeta=i,c=u.default.generateInitSegment(i);else return;if(!this._onInitSegment)throw new s.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(d,{type:d,data:c.buffer,codec:n,container:d+"/"+a,mediaDuration:i.duration})},p.prototype._calculateDtsBase=function(d,i){this._dtsBaseInited||(d.samples&&d.samples.length&&(this._audioDtsBase=d.samples[0].dts),i.samples&&i.samples.length&&(this._videoDtsBase=i.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},p.prototype.flushStashedSamples=function(){var d=this._videoStashedLastSample,i=this._audioStashedLastSample,c={type:"video",id:1,sequenceNumber:0,samples:[],length:0};d!=null&&(c.samples.push(d),c.length=d.length);var a={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};i!=null&&(a.samples.push(i),a.length=i.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(c,!0),this._remuxAudio(a,!0)},p.prototype._remuxAudio=function(d,i){if(this._audioMeta!=null){var c=d,a=c.samples,n=void 0,m=-1,S=-1,w=this._audioMeta.refSampleDuration,D=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,R=this._dtsBaseInited&&this._audioNextDts===void 0,A=!1;if(!(!a||a.length===0)&&!(a.length===1&&!i)){var L=0,C=null,O=0;D?(L=0,O=c.length):(L=8,O=8+c.length);var F=null;if(a.length>1&&(F=a.pop(),O-=F.length),this._audioStashedLastSample!=null){var P=this._audioStashedLastSample;this._audioStashedLastSample=null,a.unshift(P),O+=P.length}F!=null&&(this._audioStashedLastSample=F);var M=a[0].dts-this._dtsBase;if(this._audioNextDts)n=M-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())n=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(A=!0);else{var V=this._audioSegmentInfoList.getLastSampleBefore(M);if(V!=null){var K=M-(V.originalDts+V.duration);K<=3&&(K=0);var z=V.dts+V.duration+K;n=M-z}else n=0}if(A){var Q=M-n,X=this._videoSegmentInfoList.getLastSegmentBefore(M);if(X!=null&&X.beginDts<Q){var N=l.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(N){var q=X.beginDts,ye=Q-X.beginDts;b.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+q+", duration: "+ye),a.unshift({unit:N,dts:q,pts:q}),O+=N.byteLength}}else A=!1}for(var ie=[],ne=0;ne<a.length;ne++){var P=a[ne],he=P.unit,ue=P.dts-this._dtsBase,q=ue,le=!1,ve=null,Z=0;if(!(ue<-.001)){if(this._audioMeta.codec!=="mp3"){var j=ue,ce=3;if(this._audioNextDts&&(j=this._audioNextDts),n=ue-j,n<=-ce*w){b.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+ue+" ms ,curRefDts: "+j+" ms)  due to dtsCorrection: "+n+" ms overlap.");continue}else if(n>=ce*w&&this._fillAudioTimestampGap&&!o.default.safari){le=!0;var U=Math.floor(n/w);b.default.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+("originalDts: "+ue+" ms, curRefDts: "+j+" ms, ")+("dtsCorrection: "+Math.round(n)+" ms, generate: "+U+" frames")),q=Math.floor(j),Z=Math.floor(j+w)-q;var N=l.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);N==null&&(b.default.w(this.TAG,"Unable to generate silent frame for "+(this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame")),N=he),ve=[];for(var Y=0;Y<U;Y++){j=j+w;var ee=Math.floor(j),de=Math.floor(j+w)-ee,be={dts:ee,pts:ee,cts:0,unit:N,size:N.byteLength,duration:de,originalDts:ue,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};ve.push(be),O+=be.size}this._audioNextDts=j+w}else q=Math.floor(j),Z=Math.floor(j+w)-q,this._audioNextDts=j+w}else{if(q=ue-n,ne!==a.length-1){var Ae=a[ne+1].dts-this._dtsBase-n;Z=Ae-q}else if(F!=null){var Ae=F.dts-this._dtsBase-n;Z=Ae-q}else ie.length>=1?Z=ie[ie.length-1].duration:Z=Math.floor(w);this._audioNextDts=q+Z}m===-1&&(m=q),ie.push({dts:q,pts:q,cts:0,unit:P.unit,size:P.unit.byteLength,duration:Z,originalDts:ue,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),le&&ie.push.apply(ie,ve)}}if(ie.length===0){c.samples=[],c.length=0;return}D?C=new Uint8Array(O):(C=new Uint8Array(O),C[0]=O>>>24&255,C[1]=O>>>16&255,C[2]=O>>>8&255,C[3]=O&255,C.set(u.default.types.mdat,4));for(var ne=0;ne<ie.length;ne++){var he=ie[ne].unit;C.set(he,L),L+=he.byteLength}var me=ie[ie.length-1];S=me.dts+me.duration;var oe=new v.MediaSegmentInfo;oe.beginDts=m,oe.endDts=S,oe.beginPts=m,oe.endPts=S,oe.originalBeginDts=ie[0].originalDts,oe.originalEndDts=me.originalDts+me.duration,oe.firstSample=new v.SampleInfo(ie[0].dts,ie[0].pts,ie[0].duration,ie[0].originalDts,!1),oe.lastSample=new v.SampleInfo(me.dts,me.pts,me.duration,me.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(oe),c.samples=ie,c.sequenceNumber++;var re=null;D?re=new Uint8Array:re=u.default.moof(c,m),c.samples=[],c.length=0;var ge={type:"audio",data:this._mergeBoxes(re,C).buffer,sampleCount:ie.length,info:oe};D&&R&&(ge.timestampOffset=m),this._onMediaSegment("audio",ge)}}},p.prototype._remuxVideo=function(d,i){if(this._videoMeta!=null){var c=d,a=c.samples,n=void 0,m=-1,S=-1,w=-1,D=-1;if(!(!a||a.length===0)&&!(a.length===1&&!i)){var R=8,A=null,L=8+d.length,C=null;if(a.length>1&&(C=a.pop(),L-=C.length),this._videoStashedLastSample!=null){var O=this._videoStashedLastSample;this._videoStashedLastSample=null,a.unshift(O),L+=O.length}C!=null&&(this._videoStashedLastSample=C);var F=a[0].dts-this._dtsBase;if(this._videoNextDts)n=F-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())n=0;else{var P=this._videoSegmentInfoList.getLastSampleBefore(F);if(P!=null){var M=F-(P.originalDts+P.duration);M<=3&&(M=0);var V=P.dts+P.duration+M;n=F-V}else n=0}for(var K=new v.MediaSegmentInfo,z=[],Q=0;Q<a.length;Q++){var O=a[Q],X=O.dts-this._dtsBase,N=O.isKeyframe,q=X-n,ye=O.cts,ie=q+ye;m===-1&&(m=q,w=ie);var ne=0;if(Q!==a.length-1){var he=a[Q+1].dts-this._dtsBase-n;ne=he-q}else if(C!=null){var he=C.dts-this._dtsBase-n;ne=he-q}else z.length>=1?ne=z[z.length-1].duration:ne=Math.floor(this._videoMeta.refSampleDuration);if(N){var ue=new v.SampleInfo(q,ie,ne,O.dts,!0);ue.fileposition=O.fileposition,K.appendSyncPoint(ue)}z.push({dts:q,pts:ie,cts:ye,units:O.units,size:O.length,isKeyframe:N,duration:ne,originalDts:X,flags:{isLeading:0,dependsOn:N?2:1,isDependedOn:N?1:0,hasRedundancy:0,isNonSync:N?0:1}})}A=new Uint8Array(L),A[0]=L>>>24&255,A[1]=L>>>16&255,A[2]=L>>>8&255,A[3]=L&255,A.set(u.default.types.mdat,4);for(var Q=0;Q<z.length;Q++)for(var le=z[Q].units;le.length;){var ve=le.shift(),Z=ve.data;A.set(Z,R),R+=Z.byteLength}var j=z[z.length-1];if(S=j.dts+j.duration,D=j.pts+j.duration,this._videoNextDts=S,K.beginDts=m,K.endDts=S,K.beginPts=w,K.endPts=D,K.originalBeginDts=z[0].originalDts,K.originalEndDts=j.originalDts+j.duration,K.firstSample=new v.SampleInfo(z[0].dts,z[0].pts,z[0].duration,z[0].originalDts,z[0].isKeyframe),K.lastSample=new v.SampleInfo(j.dts,j.pts,j.duration,j.originalDts,j.isKeyframe),this._isLive||this._videoSegmentInfoList.append(K),c.samples=z,c.sequenceNumber++,this._forceFirstIDR){var ce=z[0].flags;ce.dependsOn=2,ce.isNonSync=0}var U=u.default.moof(c,m);c.samples=[],c.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(U,A).buffer,sampleCount:z.length,info:K})}}},p.prototype._mergeBoxes=function(d,i){var c=new Uint8Array(d.byteLength+i.byteLength);return c.set(d,0),c.set(i,d.byteLength),c},p}();y.default=f},"./src/utils/browser.js":function(x,y,E){E.r(y);var b={};function u(){var l=self.navigator.userAgent.toLowerCase(),o=/(edge)\/([\w.]+)/.exec(l)||/(opr)[\/]([\w.]+)/.exec(l)||/(chrome)[ \/]([\w.]+)/.exec(l)||/(iemobile)[\/]([\w.]+)/.exec(l)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(l)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(l)||/(webkit)[ \/]([\w.]+)/.exec(l)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(l)||/(msie) ([\w.]+)/.exec(l)||l.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(l)||l.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(l)||[],v=/(ipad)/.exec(l)||/(ipod)/.exec(l)||/(windows phone)/.exec(l)||/(iphone)/.exec(l)||/(kindle)/.exec(l)||/(android)/.exec(l)||/(windows)/.exec(l)||/(mac)/.exec(l)||/(linux)/.exec(l)||/(cros)/.exec(l)||[],s={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",majorVersion:o[4]||o[2]||"0",platform:v[0]||""},f={};if(s.browser){f[s.browser]=!0;var p=s.majorVersion.split(".");f.version={major:parseInt(s.majorVersion,10),string:s.version},p.length>1&&(f.version.minor=parseInt(p[1],10)),p.length>2&&(f.version.build=parseInt(p[2],10))}if(s.platform&&(f[s.platform]=!0),(f.chrome||f.opr||f.safari)&&(f.webkit=!0),f.rv||f.iemobile){f.rv&&delete f.rv;var d="msie";s.browser=d,f[d]=!0}if(f.edge){delete f.edge;var i="msedge";s.browser=i,f[i]=!0}if(f.opr){var c="opera";s.browser=c,f[c]=!0}if(f.safari&&f.android){var a="android";s.browser=a,f[a]=!0}f.name=s.browser,f.platform=s.platform;for(var n in b)b.hasOwnProperty(n)&&delete b[n];Object.assign(b,f)}u(),y.default=b},"./src/utils/exception.js":function(x,y,E){E.r(y),E.d(y,{RuntimeException:function(){return u},IllegalStateException:function(){return l},InvalidArgumentException:function(){return o},NotImplementedException:function(){return v}});var b=function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,i){d.__proto__=i}||function(d,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(d[c]=i[c])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),u=function(){function s(f){this._message=f}return Object.defineProperty(s.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),s.prototype.toString=function(){return this.name+": "+this.message},s}(),l=function(s){b(f,s);function f(p){return s.call(this,p)||this}return Object.defineProperty(f.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),f}(u),o=function(s){b(f,s);function f(p){return s.call(this,p)||this}return Object.defineProperty(f.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),f}(u),v=function(s){b(f,s);function f(p){return s.call(this,p)||this}return Object.defineProperty(f.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),f}(u)},"./src/utils/logger.js":function(x,y,E){E.r(y);var b=E("./node_modules/events/events.js"),u=E.n(b),l=function(){function o(){}return o.e=function(v,s){(!v||o.FORCE_GLOBAL_TAG)&&(v=o.GLOBAL_TAG);var f="["+v+"] > "+s;o.ENABLE_CALLBACK&&o.emitter.emit("log","error",f),!!o.ENABLE_ERROR&&(console.error?console.error(f):console.warn?console.warn(f):console.log(f))},o.i=function(v,s){(!v||o.FORCE_GLOBAL_TAG)&&(v=o.GLOBAL_TAG);var f="["+v+"] > "+s;o.ENABLE_CALLBACK&&o.emitter.emit("log","info",f),!!o.ENABLE_INFO&&(console.info?console.info(f):console.log(f))},o.w=function(v,s){(!v||o.FORCE_GLOBAL_TAG)&&(v=o.GLOBAL_TAG);var f="["+v+"] > "+s;o.ENABLE_CALLBACK&&o.emitter.emit("log","warn",f),!!o.ENABLE_WARN&&(console.warn?console.warn(f):console.log(f))},o.d=function(v,s){(!v||o.FORCE_GLOBAL_TAG)&&(v=o.GLOBAL_TAG);var f="["+v+"] > "+s;o.ENABLE_CALLBACK&&o.emitter.emit("log","debug",f),!!o.ENABLE_DEBUG&&(console.debug?console.debug(f):console.log(f))},o.v=function(v,s){(!v||o.FORCE_GLOBAL_TAG)&&(v=o.GLOBAL_TAG);var f="["+v+"] > "+s;o.ENABLE_CALLBACK&&o.emitter.emit("log","verbose",f),!!o.ENABLE_VERBOSE&&console.log(f)},o}();l.GLOBAL_TAG="flv.js",l.FORCE_GLOBAL_TAG=!1,l.ENABLE_ERROR=!0,l.ENABLE_INFO=!0,l.ENABLE_WARN=!0,l.ENABLE_DEBUG=!0,l.ENABLE_VERBOSE=!0,l.ENABLE_CALLBACK=!1,l.emitter=new(u()),y.default=l},"./src/utils/logging-control.js":function(x,y,E){E.r(y);var b=E("./node_modules/events/events.js"),u=E.n(b),l=E("./src/utils/logger.js"),o=function(){function v(){}return Object.defineProperty(v,"forceGlobalTag",{get:function(){return l.default.FORCE_GLOBAL_TAG},set:function(s){l.default.FORCE_GLOBAL_TAG=s,v._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(v,"globalTag",{get:function(){return l.default.GLOBAL_TAG},set:function(s){l.default.GLOBAL_TAG=s,v._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(v,"enableAll",{get:function(){return l.default.ENABLE_VERBOSE&&l.default.ENABLE_DEBUG&&l.default.ENABLE_INFO&&l.default.ENABLE_WARN&&l.default.ENABLE_ERROR},set:function(s){l.default.ENABLE_VERBOSE=s,l.default.ENABLE_DEBUG=s,l.default.ENABLE_INFO=s,l.default.ENABLE_WARN=s,l.default.ENABLE_ERROR=s,v._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(v,"enableDebug",{get:function(){return l.default.ENABLE_DEBUG},set:function(s){l.default.ENABLE_DEBUG=s,v._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(v,"enableVerbose",{get:function(){return l.default.ENABLE_VERBOSE},set:function(s){l.default.ENABLE_VERBOSE=s,v._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(v,"enableInfo",{get:function(){return l.default.ENABLE_INFO},set:function(s){l.default.ENABLE_INFO=s,v._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(v,"enableWarn",{get:function(){return l.default.ENABLE_WARN},set:function(s){l.default.ENABLE_WARN=s,v._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(v,"enableError",{get:function(){return l.default.ENABLE_ERROR},set:function(s){l.default.ENABLE_ERROR=s,v._notifyChange()},enumerable:!1,configurable:!0}),v.getConfig=function(){return{globalTag:l.default.GLOBAL_TAG,forceGlobalTag:l.default.FORCE_GLOBAL_TAG,enableVerbose:l.default.ENABLE_VERBOSE,enableDebug:l.default.ENABLE_DEBUG,enableInfo:l.default.ENABLE_INFO,enableWarn:l.default.ENABLE_WARN,enableError:l.default.ENABLE_ERROR,enableCallback:l.default.ENABLE_CALLBACK}},v.applyConfig=function(s){l.default.GLOBAL_TAG=s.globalTag,l.default.FORCE_GLOBAL_TAG=s.forceGlobalTag,l.default.ENABLE_VERBOSE=s.enableVerbose,l.default.ENABLE_DEBUG=s.enableDebug,l.default.ENABLE_INFO=s.enableInfo,l.default.ENABLE_WARN=s.enableWarn,l.default.ENABLE_ERROR=s.enableError,l.default.ENABLE_CALLBACK=s.enableCallback},v._notifyChange=function(){var s=v.emitter;if(s.listenerCount("change")>0){var f=v.getConfig();s.emit("change",f)}},v.registerListener=function(s){v.emitter.addListener("change",s)},v.removeListener=function(s){v.emitter.removeListener("change",s)},v.addLogListener=function(s){l.default.emitter.addListener("log",s),l.default.emitter.listenerCount("log")>0&&(l.default.ENABLE_CALLBACK=!0,v._notifyChange())},v.removeLogListener=function(s){l.default.emitter.removeListener("log",s),l.default.emitter.listenerCount("log")===0&&(l.default.ENABLE_CALLBACK=!1,v._notifyChange())},v}();o.emitter=new(u()),y.default=o},"./src/utils/polyfill.js":function(x,y,E){E.r(y);var b=function(){function u(){}return u.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(l,o){return l.__proto__=o,l},Object.assign=Object.assign||function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(l),v=1;v<arguments.length;v++){var s=arguments[v];if(s!=null)for(var f in s)s.hasOwnProperty(f)&&(o[f]=s[f])}return o},typeof self.Promise!="function"&&E("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},u}();b.install(),y.default=b},"./src/utils/utf8-conv.js":function(x,y,E){E.r(y);function b(l,o,v){var s=l;if(o+v<s.length){for(;v--;)if((s[++o]&192)!=128)return!1;return!0}else return!1}function u(l){for(var o=[],v=l,s=0,f=l.length;s<f;){if(v[s]<128){o.push(String.fromCharCode(v[s])),++s;continue}else if(!(v[s]<192)){if(v[s]<224){if(b(v,s,1)){var p=(v[s]&31)<<6|v[s+1]&63;if(p>=128){o.push(String.fromCharCode(p&65535)),s+=2;continue}}}else if(v[s]<240){if(b(v,s,2)){var p=(v[s]&15)<<12|(v[s+1]&63)<<6|v[s+2]&63;if(p>=2048&&(p&63488)!=55296){o.push(String.fromCharCode(p&65535)),s+=3;continue}}}else if(v[s]<248&&b(v,s,3)){var p=(v[s]&7)<<18|(v[s+1]&63)<<12|(v[s+2]&63)<<6|v[s+3]&63;if(p>65536&&p<1114112){p-=65536,o.push(String.fromCharCode(p>>>10|55296)),o.push(String.fromCharCode(p&1023|56320)),s+=4;continue}}}o.push(String.fromCharCode(65533)),++s}return o.join("")}y.default=u}},_={};function r(x){var y=_[x];if(y!==void 0)return y.exports;var E=_[x]={exports:{}};return t[x].call(E.exports,E,E.exports,r),E.exports}r.m=t,function(){r.n=function(x){var y=x&&x.__esModule?function(){return x.default}:function(){return x};return r.d(y,{a:y}),y}}(),function(){r.d=function(x,y){for(var E in y)r.o(y,E)&&!r.o(x,E)&&Object.defineProperty(x,E,{enumerable:!0,get:y[E]})}}(),function(){r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){r.o=function(x,y){return Object.prototype.hasOwnProperty.call(x,y)}}(),function(){r.r=function(x){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})}}();var h=r("./src/index.js");return h}()})})(zt);var at=Ar(zt.exports);const Fr={class:"w-100 h-100 m-auto"},Mr={key:0,class:"position-absolute w-100 h-100 bg-dark",style:{left:"0%",right:"0%",top:"0%",bottom:"0%","min-width":"100%","min-height":"100%","z-index":"5"}},Br=T("div",{class:"d-flex flex-column justify-content-center"},[T("h3",{class:"h3 text-light align-self-center"},"\u4E0D\u652F\u6301\u8BE5\u6D4F\u89C8\u5668")],-1),kr=[Br],Gt=Be({props:{video_src:null,volume:null,playing:{type:Boolean}},setup(g){const e=g;var t;const _=H(),r=H(!1);return We(()=>{Ne(()=>{at.isSupported()?(t=at.createPlayer({type:"flv",url:e.video_src}),t.attachMediaElement(_.value),t.load(),t.volume=e.volume):r.value=!0})}),Qe(()=>e.video_src,()=>{console.log(e.video_src),at.isSupported()?(t=at.createPlayer({type:"flv",url:e.video_src,isLive:!0,cors:!0}),t.attachMediaElement(_.value),t.load()):r.value=!0}),Qe(()=>e.volume,()=>{t.volume=e.volume}),Qe(()=>e.playing,()=>{e.playing?t.play():t.pause(),console.log(e.video_src)}),Nt(()=>{}),(h,x)=>(te(),se("div",Fr,[T("video",{class:"w-100 m-0",style:{"min-height":"100%","z-index":"1"},ref:(y,E)=>{E.videoElement=y,_.value=y}},null,512),r.value?(te(),se("div",Mr,kr)):Oe("",!0)]))}});const Ur={class:"overflow-hidden"},jr={class:"card-body px-2 py-0"},Nr={class:"card-title mb-1"},Vr={class:"d-flex justify-content-between"},Wr={class:"small director"},zr=Be({props:{liveId:null,playAddress:null,title:null,director:null},setup(g){const e=g,t=H(!0),_=H(0);We(()=>{Ne(()=>{})});function r(){t.value=!0}function h(){t.value=!1}function x(){rt.push("/live/"+e.liveId.toString())}return(y,E)=>(te(),se("div",{class:"card tv-card p-0 border-0",onClick:x},[T("div",Ur,[T("div",{class:"min-player",onMouseover:r,onMouseleave:h},[Me(Gt,{video_src:g.playAddress,playing:t.value,volume:_.value},null,8,["video_src","playing","volume"])],32)]),T("div",jr,[T("div",Nr,we(g.title),1),T("div",Vr,[T("div",Wr,we(g.director),1)])])]))}});var Gr=Ke(zr,[["__scopeId","data-v-13d4e222"]]),St={exports:{}},$t=function(e,t){return function(){for(var r=new Array(arguments.length),h=0;h<r.length;h++)r[h]=arguments[h];return e.apply(t,r)}},$r=$t,ze=Object.prototype.toString;function At(g){return ze.call(g)==="[object Array]"}function wt(g){return typeof g=="undefined"}function Kr(g){return g!==null&&!wt(g)&&g.constructor!==null&&!wt(g.constructor)&&typeof g.constructor.isBuffer=="function"&&g.constructor.isBuffer(g)}function Hr(g){return ze.call(g)==="[object ArrayBuffer]"}function Jr(g){return typeof FormData!="undefined"&&g instanceof FormData}function Xr(g){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(g):e=g&&g.buffer&&g.buffer instanceof ArrayBuffer,e}function Yr(g){return typeof g=="string"}function qr(g){return typeof g=="number"}function Kt(g){return g!==null&&typeof g=="object"}function ut(g){if(ze.call(g)!=="[object Object]")return!1;var e=Object.getPrototypeOf(g);return e===null||e===Object.prototype}function Zr(g){return ze.call(g)==="[object Date]"}function Qr(g){return ze.call(g)==="[object File]"}function en(g){return ze.call(g)==="[object Blob]"}function Ht(g){return ze.call(g)==="[object Function]"}function tn(g){return Kt(g)&&Ht(g.pipe)}function rn(g){return typeof URLSearchParams!="undefined"&&g instanceof URLSearchParams}function nn(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function sn(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Lt(g,e){if(!(g===null||typeof g=="undefined"))if(typeof g!="object"&&(g=[g]),At(g))for(var t=0,_=g.length;t<_;t++)e.call(null,g[t],t,g);else for(var r in g)Object.prototype.hasOwnProperty.call(g,r)&&e.call(null,g[r],r,g)}function Ct(){var g={};function e(r,h){ut(g[h])&&ut(r)?g[h]=Ct(g[h],r):ut(r)?g[h]=Ct({},r):At(r)?g[h]=r.slice():g[h]=r}for(var t=0,_=arguments.length;t<_;t++)Lt(arguments[t],e);return g}function on(g,e,t){return Lt(e,function(r,h){t&&typeof r=="function"?g[h]=$r(r,t):g[h]=r}),g}function an(g){return g.charCodeAt(0)===65279&&(g=g.slice(1)),g}var Le={isArray:At,isArrayBuffer:Hr,isBuffer:Kr,isFormData:Jr,isArrayBufferView:Xr,isString:Yr,isNumber:qr,isObject:Kt,isPlainObject:ut,isUndefined:wt,isDate:Zr,isFile:Qr,isBlob:en,isFunction:Ht,isStream:tn,isURLSearchParams:rn,isStandardBrowserEnv:sn,forEach:Lt,merge:Ct,extend:on,trim:nn,stripBOM:an},He=Le;function Jt(g){return encodeURIComponent(g).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Xt=function(e,t,_){if(!t)return e;var r;if(_)r=_(t);else if(He.isURLSearchParams(t))r=t.toString();else{var h=[];He.forEach(t,function(E,b){E===null||typeof E=="undefined"||(He.isArray(E)?b=b+"[]":E=[E],He.forEach(E,function(l){He.isDate(l)?l=l.toISOString():He.isObject(l)&&(l=JSON.stringify(l)),h.push(Jt(b)+"="+Jt(l))}))}),r=h.join("&")}if(r){var x=e.indexOf("#");x!==-1&&(e=e.slice(0,x)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},un=Le;function lt(){this.handlers=[]}lt.prototype.use=function(e,t,_){return this.handlers.push({fulfilled:e,rejected:t,synchronous:_?_.synchronous:!1,runWhen:_?_.runWhen:null}),this.handlers.length-1};lt.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};lt.prototype.forEach=function(e){un.forEach(this.handlers,function(_){_!==null&&e(_)})};var ln=lt,dn=Le,fn=function(e,t){dn.forEach(e,function(r,h){h!==t&&h.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[h])})},Yt=function(e,t,_,r,h){return e.config=t,_&&(e.code=_),e.request=r,e.response=h,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},cn=Yt,qt=function(e,t,_,r,h){var x=new Error(e);return cn(x,t,_,r,h)},hn=qt,_n=function(e,t,_){var r=_.config.validateStatus;!_.status||!r||r(_.status)?e(_):t(hn("Request failed with status code "+_.status,_.config,null,_.request,_))},dt=Le,pn=dt.isStandardBrowserEnv()?function(){return{write:function(t,_,r,h,x,y){var E=[];E.push(t+"="+encodeURIComponent(_)),dt.isNumber(r)&&E.push("expires="+new Date(r).toGMTString()),dt.isString(h)&&E.push("path="+h),dt.isString(x)&&E.push("domain="+x),y===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(t){var _=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return _?decodeURIComponent(_[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),vn=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},mn=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},gn=vn,xn=mn,En=function(e,t){return e&&!gn(t)?xn(e,t):t},Rt=Le,yn=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],bn=function(e){var t={},_,r,h;return e&&Rt.forEach(e.split(`
`),function(y){if(h=y.indexOf(":"),_=Rt.trim(y.substr(0,h)).toLowerCase(),r=Rt.trim(y.substr(h+1)),_){if(t[_]&&yn.indexOf(_)>=0)return;_==="set-cookie"?t[_]=(t[_]?t[_]:[]).concat([r]):t[_]=t[_]?t[_]+", "+r:r}}),t},Zt=Le,Sn=Zt.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),_;function r(h){var x=h;return e&&(t.setAttribute("href",x),x=t.href),t.setAttribute("href",x),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return _=r(window.location.href),function(x){var y=Zt.isString(x)?r(x):x;return y.protocol===_.protocol&&y.host===_.host}}():function(){return function(){return!0}}();function Dt(g){this.message=g}Dt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Dt.prototype.__CANCEL__=!0;var ft=Dt,ct=Le,An=_n,wn=pn,Ln=Xt,Cn=En,Rn=bn,Dn=Sn,Ot=qt,On=_t,Tn=ft,Qt=function(e){return new Promise(function(_,r){var h=e.data,x=e.headers,y=e.responseType,E;function b(){e.cancelToken&&e.cancelToken.unsubscribe(E),e.signal&&e.signal.removeEventListener("abort",E)}ct.isFormData(h)&&delete x["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",o=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";x.Authorization="Basic "+btoa(l+":"+o)}var v=Cn(e.baseURL,e.url);u.open(e.method.toUpperCase(),Ln(v,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function s(){if(!!u){var p="getAllResponseHeaders"in u?Rn(u.getAllResponseHeaders()):null,d=!y||y==="text"||y==="json"?u.responseText:u.response,i={data:d,status:u.status,statusText:u.statusText,headers:p,config:e,request:u};An(function(a){_(a),b()},function(a){r(a),b()},i),u=null}}if("onloadend"in u?u.onloadend=s:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(s)},u.onabort=function(){!u||(r(Ot("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){r(Ot("Network Error",e,null,u)),u=null},u.ontimeout=function(){var d=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||On.transitional;e.timeoutErrorMessage&&(d=e.timeoutErrorMessage),r(Ot(d,e,i.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},ct.isStandardBrowserEnv()){var f=(e.withCredentials||Dn(v))&&e.xsrfCookieName?wn.read(e.xsrfCookieName):void 0;f&&(x[e.xsrfHeaderName]=f)}"setRequestHeader"in u&&ct.forEach(x,function(d,i){typeof h=="undefined"&&i.toLowerCase()==="content-type"?delete x[i]:u.setRequestHeader(i,d)}),ct.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),y&&y!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(E=function(p){!u||(r(!p||p&&p.type?new Tn("canceled"):p),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(E),e.signal&&(e.signal.aborted?E():e.signal.addEventListener("abort",E))),h||(h=null),u.send(h)})},xe=Le,er=fn,Pn=Yt,In={"Content-Type":"application/x-www-form-urlencoded"};function tr(g,e){!xe.isUndefined(g)&&xe.isUndefined(g["Content-Type"])&&(g["Content-Type"]=e)}function Fn(){var g;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(g=Qt),g}function Mn(g,e,t){if(xe.isString(g))try{return(e||JSON.parse)(g),xe.trim(g)}catch(_){if(_.name!=="SyntaxError")throw _}return(t||JSON.stringify)(g)}var ht={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Fn(),transformRequest:[function(e,t){return er(t,"Accept"),er(t,"Content-Type"),xe.isFormData(e)||xe.isArrayBuffer(e)||xe.isBuffer(e)||xe.isStream(e)||xe.isFile(e)||xe.isBlob(e)?e:xe.isArrayBufferView(e)?e.buffer:xe.isURLSearchParams(e)?(tr(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):xe.isObject(e)||t&&t["Content-Type"]==="application/json"?(tr(t,"application/json"),Mn(e)):e}],transformResponse:[function(e){var t=this.transitional||ht.transitional,_=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,h=!_&&this.responseType==="json";if(h||r&&xe.isString(e)&&e.length)try{return JSON.parse(e)}catch(x){if(h)throw x.name==="SyntaxError"?Pn(x,this,"E_JSON_PARSE"):x}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};xe.forEach(["delete","get","head"],function(e){ht.headers[e]={}});xe.forEach(["post","put","patch"],function(e){ht.headers[e]=xe.merge(In)});var _t=ht,Bn=Le,kn=_t,Un=function(e,t,_){var r=this||kn;return Bn.forEach(_,function(x){e=x.call(r,e,t)}),e},rr=function(e){return!!(e&&e.__CANCEL__)},nr=Le,Tt=Un,jn=rr,Nn=_t,Vn=ft;function Pt(g){if(g.cancelToken&&g.cancelToken.throwIfRequested(),g.signal&&g.signal.aborted)throw new Vn("canceled")}var Wn=function(e){Pt(e),e.headers=e.headers||{},e.data=Tt.call(e,e.data,e.headers,e.transformRequest),e.headers=nr.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),nr.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var t=e.adapter||Nn.adapter;return t(e).then(function(r){return Pt(e),r.data=Tt.call(e,r.data,r.headers,e.transformResponse),r},function(r){return jn(r)||(Pt(e),r&&r.response&&(r.response.data=Tt.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},Ce=Le,ir=function(e,t){t=t||{};var _={};function r(u,l){return Ce.isPlainObject(u)&&Ce.isPlainObject(l)?Ce.merge(u,l):Ce.isPlainObject(l)?Ce.merge({},l):Ce.isArray(l)?l.slice():l}function h(u){if(Ce.isUndefined(t[u])){if(!Ce.isUndefined(e[u]))return r(void 0,e[u])}else return r(e[u],t[u])}function x(u){if(!Ce.isUndefined(t[u]))return r(void 0,t[u])}function y(u){if(Ce.isUndefined(t[u])){if(!Ce.isUndefined(e[u]))return r(void 0,e[u])}else return r(void 0,t[u])}function E(u){if(u in t)return r(e[u],t[u]);if(u in e)return r(void 0,e[u])}var b={url:x,method:x,data:x,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:E};return Ce.forEach(Object.keys(e).concat(Object.keys(t)),function(l){var o=b[l]||h,v=o(l);Ce.isUndefined(v)&&o!==E||(_[l]=v)}),_},sr={version:"0.24.0"},zn=sr.version,It={};["object","boolean","number","function","string","symbol"].forEach(function(g,e){It[g]=function(_){return typeof _===g||"a"+(e<1?"n ":" ")+g}});var or={};It.transitional=function(e,t,_){function r(h,x){return"[Axios v"+zn+"] Transitional option '"+h+"'"+x+(_?". "+_:"")}return function(h,x,y){if(e===!1)throw new Error(r(x," has been removed"+(t?" in "+t:"")));return t&&!or[x]&&(or[x]=!0,console.warn(r(x," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(h,x,y):!0}};function Gn(g,e,t){if(typeof g!="object")throw new TypeError("options must be an object");for(var _=Object.keys(g),r=_.length;r-- >0;){var h=_[r],x=e[h];if(x){var y=g[h],E=y===void 0||x(y,h,g);if(E!==!0)throw new TypeError("option "+h+" must be "+E);continue}if(t!==!0)throw Error("Unknown option "+h)}}var $n={assertOptions:Gn,validators:It},ar=Le,Kn=Xt,ur=ln,lr=Wn,pt=ir,dr=$n,Je=dr.validators;function et(g){this.defaults=g,this.interceptors={request:new ur,response:new ur}}et.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=pt(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&dr.assertOptions(t,{silentJSONParsing:Je.transitional(Je.boolean),forcedJSONParsing:Je.transitional(Je.boolean),clarifyTimeoutError:Je.transitional(Je.boolean)},!1);var _=[],r=!0;this.interceptors.request.forEach(function(o){typeof o.runWhen=="function"&&o.runWhen(e)===!1||(r=r&&o.synchronous,_.unshift(o.fulfilled,o.rejected))});var h=[];this.interceptors.response.forEach(function(o){h.push(o.fulfilled,o.rejected)});var x;if(!r){var y=[lr,void 0];for(Array.prototype.unshift.apply(y,_),y=y.concat(h),x=Promise.resolve(e);y.length;)x=x.then(y.shift(),y.shift());return x}for(var E=e;_.length;){var b=_.shift(),u=_.shift();try{E=b(E)}catch(l){u(l);break}}try{x=lr(E)}catch(l){return Promise.reject(l)}for(;h.length;)x=x.then(h.shift(),h.shift());return x};et.prototype.getUri=function(e){return e=pt(this.defaults,e),Kn(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};ar.forEach(["delete","get","head","options"],function(e){et.prototype[e]=function(t,_){return this.request(pt(_||{},{method:e,url:t,data:(_||{}).data}))}});ar.forEach(["post","put","patch"],function(e){et.prototype[e]=function(t,_,r){return this.request(pt(r||{},{method:e,url:t,data:_}))}});var Hn=et,Jn=ft;function Xe(g){if(typeof g!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(r){e=r});var t=this;this.promise.then(function(_){if(!!t._listeners){var r,h=t._listeners.length;for(r=0;r<h;r++)t._listeners[r](_);t._listeners=null}}),this.promise.then=function(_){var r,h=new Promise(function(x){t.subscribe(x),r=x}).then(_);return h.cancel=function(){t.unsubscribe(r)},h},g(function(r){t.reason||(t.reason=new Jn(r),e(t.reason))})}Xe.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Xe.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Xe.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};Xe.source=function(){var e,t=new Xe(function(r){e=r});return{token:t,cancel:e}};var Xn=Xe,Yn=function(e){return function(_){return e.apply(null,_)}},qn=function(e){return typeof e=="object"&&e.isAxiosError===!0},fr=Le,Zn=$t,vt=Hn,Qn=ir,ei=_t;function cr(g){var e=new vt(g),t=Zn(vt.prototype.request,e);return fr.extend(t,vt.prototype,e),fr.extend(t,e),t.create=function(r){return cr(Qn(g,r))},t}var Ie=cr(ei);Ie.Axios=vt;Ie.Cancel=ft;Ie.CancelToken=Xn;Ie.isCancel=rr;Ie.VERSION=sr.version;Ie.all=function(e){return Promise.all(e)};Ie.spread=Yn;Ie.isAxiosError=qn;St.exports=Ie;St.exports.default=Ie;var tt=St.exports;class Ft{constructor(e,t){this.jsonParseReviver=void 0,this.instance=t||tt.create(),this.baseUrl=e!=null?e:"http://106.52.238.70:5000"}all(e){let t=this.baseUrl+"/api/Live";t=t.replace(/[?&]$/,"");let _={method:"GET",url:t,headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(_).catch(r=>{if(Ee(r)&&r.response)return r.response;throw r}).then(r=>this.processAll(r))}processAll(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;if(Array.isArray(x)){h=[];for(let y of x)h.push(mt.fromJS(y))}else h=null;return Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}get(e,t){let _=this.baseUrl+"/api/Live/{name}";if(e==null)throw new Error("The parameter 'name' must be defined.");_=_.replace("{name}",encodeURIComponent(""+e)),_=_.replace(/[?&]$/,"");let r={method:"GET",url:_,headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(h=>{if(Ee(h)&&h.response)return h.response;throw h}).then(h=>this.processGet(h))}processGet(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;return h=mt.fromJS(x),Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}nginxRtmpPush(e,t,_,r,h,x){let y=this.baseUrl+"/api/Live/nginx/push";y=y.replace(/[?&]$/,"");const E=new FormData;e!=null&&E.append("addr",e.toString()),t!=null&&E.append("app",t.toString()),_!=null&&E.append("name",_.toString()),r!=null&&E.append("txSecret",r.toString()),h!=null&&E.append("txTime",h.toString());let b={data:E,method:"POST",url:y,headers:{},cancelToken:x};return this.instance.request(b).catch(u=>{if(Ee(u)&&u.response)return u.response;throw u}).then(u=>this.processNginxRtmpPush(u))}processNginxRtmpPush(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200)return e.data,Promise.resolve(null);if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}nginxRtmpPushDone(e,t,_,r,h,x){let y=this.baseUrl+"/api/Live/nginx/push_done";y=y.replace(/[?&]$/,"");const E=new FormData;e!=null&&E.append("addr",e.toString()),t!=null&&E.append("app",t.toString()),_!=null&&E.append("name",_.toString()),r!=null&&E.append("txSecret",r.toString()),h!=null&&E.append("txTime",h.toString());let b={data:E,method:"POST",url:y,headers:{},cancelToken:x};return this.instance.request(b).catch(u=>{if(Ee(u)&&u.response)return u.response;throw u}).then(u=>this.processNginxRtmpPushDone(u))}processNginxRtmpPushDone(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200)return e.data,Promise.resolve(null);if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}tencentStreamPush(e,t){let _=this.baseUrl+"/api/Live/tencentStreamPush";_=_.replace(/[?&]$/,"");let h={data:JSON.stringify(e),method:"POST",url:_,headers:{"Content-Type":"application/json"},cancelToken:t};return this.instance.request(h).catch(x=>{if(Ee(x)&&x.response)return x.response;throw x}).then(x=>this.processTencentStreamPush(x))}processTencentStreamPush(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200)return e.data,Promise.resolve(null);if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}tencentStreamPushDone(e,t){let _=this.baseUrl+"/api/Live/tencentStreamPushDone";_=_.replace(/[?&]$/,"");let h={data:JSON.stringify(e),method:"POST",url:_,headers:{"Content-Type":"application/json"},cancelToken:t};return this.instance.request(h).catch(x=>{if(Ee(x)&&x.response)return x.response;throw x}).then(x=>this.processTencentStreamPushDone(x))}processTencentStreamPushDone(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200)return e.data,Promise.resolve(null);if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}pushAddress(e,t){let _=this.baseUrl+"/api/Live/address/push?";if(e===null)throw new Error("The parameter 'id' cannot be null.");e!==void 0&&(_+="id="+encodeURIComponent(""+e)+"&"),_=_.replace(/[?&]$/,"");let r={method:"GET",url:_,headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(h=>{if(Ee(h)&&h.response)return h.response;throw h}).then(h=>this.processPushAddress(h))}processPushAddress(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;return h=x!==void 0?x:null,Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}}class Ye{constructor(e,t){this.jsonParseReviver=void 0,this.instance=t||tt.create(),this.baseUrl=e!=null?e:"http://106.52.238.70:5000"}signup(e,t){let _=this.baseUrl+"/api/User/signup";_=_.replace(/[?&]$/,"");let h={data:JSON.stringify(e),method:"POST",url:_,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(h).catch(x=>{if(Ee(x)&&x.response)return x.response;throw x}).then(x=>this.processSignup(x))}processSignup(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;return h=x!==void 0?x:null,Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}login(e,t){let _=this.baseUrl+"/api/User/login";_=_.replace(/[?&]$/,"");let h={data:JSON.stringify(e),method:"POST",url:_,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(h).catch(x=>{if(Ee(x)&&x.response)return x.response;throw x}).then(x=>this.processLogin(x))}processLogin(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;return h=x!==void 0?x:null,Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}refreshToken(e,t){let _=this.baseUrl+"/api/User/token?";if(e===null)throw new Error("The parameter 'id' cannot be null.");e!==void 0&&(_+="id="+encodeURIComponent(""+e)+"&"),_=_.replace(/[?&]$/,"");let r={method:"GET",url:_,headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(h=>{if(Ee(h)&&h.response)return h.response;throw h}).then(h=>this.processRefreshToken(h))}processRefreshToken(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;return h=x!==void 0?x:null,Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}get(e,t){let _=this.baseUrl+"/api/User?";if(e===null)throw new Error("The parameter 'id' cannot be null.");e!==void 0&&(_+="id="+encodeURIComponent(""+e)+"&"),_=_.replace(/[?&]$/,"");let r={method:"GET",url:_,headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(h=>{if(Ee(h)&&h.response)return h.response;throw h}).then(h=>this.processGet(h))}processGet(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;return h=Mt.fromJS(x),Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}validName(e,t){let _=this.baseUrl+"/api/User/valid-name?";e!=null&&(_+="name="+encodeURIComponent(""+e)+"&"),_=_.replace(/[?&]$/,"");let r={method:"GET",url:_,headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(h=>{if(Ee(h)&&h.response)return h.response;throw h}).then(h=>this.processValidName(h))}processValidName(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;return h=x!==void 0?x:null,Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}validEmail(e,t){let _=this.baseUrl+"/api/User/valid-email?";e!=null&&(_+="email="+encodeURIComponent(""+e)+"&"),_=_.replace(/[?&]$/,"");let r={method:"GET",url:_,headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(h=>{if(Ee(h)&&h.response)return h.response;throw h}).then(h=>this.processValidEmail(h))}processValidEmail(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200){const r=e.data;let h=null,x=r;return h=x!==void 0?x:null,Promise.resolve(h)}else if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}sendGuestEmailAuthCode(e,t){let _=this.baseUrl+"/api/User/guest-email-auth-code?";e!=null&&(_+="email="+encodeURIComponent(""+e)+"&"),_=_.replace(/[?&]$/,"");let r={method:"GET",url:_,headers:{},cancelToken:t};return this.instance.request(r).catch(h=>{if(Ee(h)&&h.response)return h.response;throw h}).then(h=>this.processSendGuestEmailAuthCode(h))}processSendGuestEmailAuthCode(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200)return e.data,Promise.resolve(null);if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}sendUserEmailAuthCode(e,t){let _=this.baseUrl+"/api/User/user-email-auth-code?";if(e===null)throw new Error("The parameter 'id' cannot be null.");e!==void 0&&(_+="id="+encodeURIComponent(""+e)+"&"),_=_.replace(/[?&]$/,"");let r={method:"GET",url:_,headers:{},cancelToken:t};return this.instance.request(r).catch(h=>{if(Ee(h)&&h.response)return h.response;throw h}).then(h=>this.processSendUserEmailAuthCode(h))}processSendUserEmailAuthCode(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200)return e.data,Promise.resolve(null);if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}userCoreAlteration(e,t,_){let r=this.baseUrl+"/api/User/core-alteration?";if(e===null)throw new Error("The parameter 'id' cannot be null.");e!==void 0&&(r+="id="+encodeURIComponent(""+e)+"&"),r=r.replace(/[?&]$/,"");let x={data:JSON.stringify(t),method:"POST",url:r,headers:{"Content-Type":"application/json"},cancelToken:_};return this.instance.request(x).catch(y=>{if(Ee(y)&&y.response)return y.response;throw y}).then(y=>this.processUserCoreAlteration(y))}processUserCoreAlteration(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200)return e.data,Promise.resolve(null);if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}userAlteration(e,t,_){let r=this.baseUrl+"/api/User/alteration?";if(e===null)throw new Error("The parameter 'id' cannot be null.");e!==void 0&&(r+="id="+encodeURIComponent(""+e)+"&"),r=r.replace(/[?&]$/,"");let x={data:JSON.stringify(t),method:"POST",url:r,headers:{"Content-Type":"application/json"},cancelToken:_};return this.instance.request(x).catch(y=>{if(Ee(y)&&y.response)return y.response;throw y}).then(y=>this.processUserAlteration(y))}processUserAlteration(e){const t=e.status;let _={};if(e.headers&&typeof e.headers=="object")for(let r in e.headers)e.headers.hasOwnProperty(r)&&(_[r]=e.headers[r]);if(t===200)return e.data,Promise.resolve(null);if(t===400){const r=e.data;let h=null,x=r;return h=_e.fromJS(x),$("\u8BF7\u6C42\u7684\u53C2\u6570\u65E0\u6548\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t===500){const r=e.data;let h=null,x=r;return h=pe.fromJS(x),$("\u670D\u52A1\u5668\u5185\u90E8\u53D1\u751F\u9519\u8BEF\u65F6\u8FD4\u56DE\u6B64\u6A21\u578B\u3002",t,r,_,h)}else if(t!==200&&t!==204){const r=e.data;return $("An unexpected server error occurred.",t,r,_)}return Promise.resolve(null)}}class mt{constructor(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}init(e){e&&(this.id=e.id,this.director=e.director,this.name=e.name,this.flvAddress=e.flvAddress,this.hlsAddress=e.hlsAddress)}static fromJS(e){e=typeof e=="object"?e:{};let t=new mt;return t.init(e),t}toJSON(e){return e=typeof e=="object"?e:{},e.id=this.id,e.director=this.director,e.name=this.name,e.flvAddress=this.flvAddress,e.hlsAddress=this.hlsAddress,e}}class Mt{constructor(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}init(e){e&&(this.id=e.id,this.email=e.email,this.name=e.name,this.image=e.image,this.lastLive=e.lastLive?new Date(e.lastLive.toString()):void 0,this.tvName=e.tvName,this.tvImage=e.tvImage)}static fromJS(e){e=typeof e=="object"?e:{};let t=new Mt;return t.init(e),t}toJSON(e){return e=typeof e=="object"?e:{},e.id=this.id,e.email=this.email,e.name=this.name,e.image=this.image,e.lastLive=this.lastLive?this.lastLive.toISOString():void 0,e.tvName=this.tvName,e.tvImage=this.tvImage,e}}class _e{constructor(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e||(this.type="",this.title="",this.status=400,this.traceId="")}init(e){if(e&&(this.type=e.type!==void 0?e.type:"",this.title=e.title!==void 0?e.title:"",this.status=e.status!==void 0?e.status:400,this.traceId=e.traceId!==void 0?e.traceId:"",e.errors)){this.errors={};for(let t in e.errors)e.errors.hasOwnProperty(t)&&(this.errors[t]=e.errors[t]!==void 0?e.errors[t]:[])}}static fromJS(e){e=typeof e=="object"?e:{};let t=new _e;return t.init(e),t}toJSON(e){if(e=typeof e=="object"?e:{},e.type=this.type,e.title=this.title,e.status=this.status,e.traceId=this.traceId,this.errors){e.errors={};for(let t in this.errors)this.errors.hasOwnProperty(t)&&(e.errors[t]=this.errors[t])}return e}}class pe{constructor(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e||(this.title="\u5185\u90E8\u670D\u52A1\u5668\u9519\u8BEF\u3002",this.traceId="")}init(e){e&&(this.title=e.title!==void 0?e.title:"\u5185\u90E8\u670D\u52A1\u5668\u9519\u8BEF\u3002",this.traceId=e.traceId!==void 0?e.traceId:"")}static fromJS(e){e=typeof e=="object"?e:{};let t=new pe;return t.init(e),t}toJSON(e){return e=typeof e=="object"?e:{},e.title=this.title,e.traceId=this.traceId,e}}class ti extends Error{constructor(e,t,_,r,h){super();this.isApiException=!0,this.message=e,this.status=t,this.response=_,this.headers=r,this.result=h}static isApiException(e){return e.isApiException===!0}}function $(g,e,t,_,r){throw r!=null?r:new ti(g,e,t,_,null)}function Ee(g){return g&&g.isAxiosError===!0}const ri={class:"row"},ni={key:0,class:"col-12 text-center"},ii=Be({setup(g){const e=H(),t=H(!0);return We(()=>{Ne(()=>{new Ft().all().then(r=>{e.value=r,t.value=r.length==0})})}),(_,r)=>(te(),se("div",ri,[t.value?(te(),se("div",ni,"\u4EC0\u4E48\u90FD\u6CA1\u6709~~~")):(te(!0),se(Vt,{key:1},wr(e.value,(h,x)=>(te(),yt(Gr,{class:"col-3",liveId:h.id,attendance:"2000",playAddress:h.flvAddress,title:h.name,director:h.director,key:x},null,8,["liveId","playAddress","title","director"]))),128))]))}}),si={class:"px-4 py-3 d-flex flex-column justify-content-center needs-validation",novalidate:"",style:{"min-width":"20em"}},oi={class:"form-row"},ai=T("label",{for:"userInputBox"},"\u7528\u6237",-1),ui={class:"invalid-feedback"},li=T("div",{class:"valid-feedback"},null,-1),di={class:"form-row"},fi=T("label",{for:"userPasswordInputBox"},"\u5BC6\u7801",-1),ci={class:"invalid-feedback"},hi=T("div",{class:"valid-feedback"},null,-1),_i=T("a",{class:"form-text",href:"javascript:;"},"\u5FD8\u8BB0\u5BC6\u7801\uFF1F",-1),pi=T("br",null,null,-1),vi=["disabled"],mi={key:0},gi={key:1,class:"spinner-border text-light small",role:"status"},xi=T("span",{class:"sr-only"},"Loading...",-1),Ei=[xi],yi=Be({emits:["logined"],setup(g,{emit:e}){const t=new Ye,_=H(""),r=H("");We(()=>{Ne(()=>{localStorage.getItem("token")!=null&&(tt.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),e("logined"))})}),Lr(()=>{});function h(){rt.push("/signup")}const x=H(!1),y=H(!1),E=H(!1),b=H(),u=H();function l(){x.value=!0,t.login({name:_.value,password:r.value}).then(o=>{tt.defaults.headers.common.Authorization="Bearer "+o,localStorage.setItem("token",o),e("logined")}).catch(o=>{o.errors.Name!==void 0&&(y.value=!0,b.value=o.errors.Name[0]),o.errors.Password!==void 0&&(E.value=!0,u.value=o.errors.Password[0])}).catch(o=>{}).finally(()=>{x.value=!1})}return(o,v)=>(te(),se("form",si,[T("div",oi,[ai,ke(T("input",{type:"text",class:Pe(["form-control",{"is-invalid":y.value}]),"onUpdate:modelValue":v[0]||(v[0]=s=>_.value=s),id:"userInputBox",required:"",onChange:v[1]||(v[1]=s=>y.value=!1)},null,34),[[Ue,_.value]]),T("div",ui,we(b.value),1),li]),T("div",di,[fi,ke(T("input",{type:"password",class:Pe(["form-control",{"is-invalid":E.value}]),"onUpdate:modelValue":v[2]||(v[2]=s=>r.value=s),id:"userPasswordInputBox",required:"",onChange:v[3]||(v[3]=s=>E.value=!1)},null,34),[[Ue,r.value]]),T("div",ci,we(u.value),1),hi]),T("div",{class:"d-flex flex-row justify-content-between"},[_i,T("a",{class:"form-text",href:"javascript:;",onClick:h},"\u6CE8\u518C")]),pi,T("button",{type:"submit",class:"btn btn-primary w-25",onClick:l,disabled:x.value},[x.value?(te(),se("div",gi,Ei)):(te(),se("span",mi,"\u767B\u5F55"))],8,vi)]))}});const qe=g=>(it("data-v-10ef4952"),g=g(),st(),g),bi={class:"px-4 py-3"},Si={class:"d-flex flex-column justify-content-center"},Ai=qe(()=>T("svg",{t:"1636988377253",class:"icon align-self-center",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2875",width:"4em",height:"4em"},[T("path",{d:"M761.8 600.9c-64 57.6-147.2 96-243.2 96s-179.2-38.4-249.6-96C108.8 684.2 0 793 0 991.4H1024.2c0-198.4-108.8-300.8-262.4-390.5z m-249.7 19.2c160 0 288.1-134.4 288.1-294.5 0-160-128-294.5-288.1-294.5s-288 134.6-288 294.6c0 166.4 134.4 294.4 288 294.4z m0 0",fill:"#8a8a8a","p-id":"2876"})],-1)),wi={class:"align-self-center"},Li={class:"table table-borderless table-sm mt-3"},Ci=qe(()=>T("td",{align:"right"},"id:",-1)),Ri=qe(()=>T("td",{align:"right"},"email:",-1)),Di=qe(()=>T("div",{class:"dropdown-divider"},null,-1)),Oi={key:0,class:"position-fixed w-100 h-100 bg-translucent"},Ti={class:"modal-dialog"},Pi={class:"modal-content"},Ii={class:"modal-header"},Fi=qe(()=>T("span",{"aria-hidden":"true"},"\xD7",-1)),Mi=[Fi],Bi=qe(()=>T("div",{class:"modal-body"},"\u9000\u51FA\u767B\u5F55\u5C06\u65E0\u6CD5\u4EAB\u53D7\u67D0\u4E9B\u529F\u80FD\uFF0C\u786E\u5B9A\u9000\u51FA\uFF1F",-1)),ki={class:"modal-footer"},Ui=Be({emits:["logout"],setup(g,{emit:e}){const t=H(""),_=H(null),r=H();new Ye().get(0).then(b=>{t.value=b.name,_.value=b.id,r.value=b.email});function x(){localStorage.removeItem("token"),tt.defaults.headers.common.Authorization="",e("logout")}const y=H(!1);function E(){y.value=!0}return(b,u)=>(te(),se("div",null,[T("div",bi,[T("div",Si,[Ai,T("span",wi,we(t.value),1),T("table",Li,[T("tbody",null,[T("tr",null,[Ci,T("td",null,we(_.value),1)]),T("tr",null,[Ri,T("td",null,we(r.value),1)])])])])]),Di,T("button",{class:"btn dropdown-item text-center",onClick:E}," \u767B\u51FA "),y.value?(te(),se("div",Oi,[T("div",Ti,[T("div",Pi,[T("div",Ii,[T("button",{type:"button",class:"close",onClick:u[0]||(u[0]=l=>y.value=!1)},Mi)]),Bi,T("div",ki,[T("button",{type:"button",class:"btn btn-secondary",onClick:u[1]||(u[1]=l=>y.value=!1)}," \u53D6\u6D88 "),T("button",{type:"button",class:"btn btn-primary",onClick:x}," \u786E\u5B9A ")])])])])):Oe("",!0)]))}});var ji=Ke(Ui,[["__scopeId","data-v-10ef4952"]]);const Ni=bt('<div class="h5">\u5F00\u59CB\u4F60\u7684Live</div><div class="dropdown-divider mt-4 mb-3"></div><div class="text-secondary mb-2">\u4ECE\u4E13\u5C5E\u4E8E Link TV \u7684\u63A8\u6D41\u5668\u5F00\u59CB\u3002</div><button class="btn btn-primary btn-sm">\u4E0B\u8F7DLinkme</button><div class="my-2"><br></div><div class="text-secondary">\u4ECE\u5176\u4ED6\u63A8\u6D41\u8F6F\u4EF6\uFF0C\u5982OBS\u5F00\u59CB\u3002</div>',6),Vi={key:0,class:"text-danger"},Wi={key:1},zi=T("div",{class:"text-secondary mb-2"},"\u590D\u5236\u4EE5\u4E0B\u63A8\u6D41\u5730\u5740\u5230\u63A8\u6D41\u8F6F\u4EF6\uFF1A",-1),Gi={class:"input-group"},$i=T("div",{class:"small text-secondary"},"\u8BE5\u5730\u5740\u4EC524\u5C0F\u65F6\u5185\u6709\u6548\u3002",-1),Ki=Be({props:{logined:Boolean},setup(g){const e=g,t=H("");Qe(()=>e.logined,()=>{e.logined?new Ft().pushAddress(0).then(x=>{t.value=x}):t.value=""});const _=H(null);function r(){_.value.select(),document.execCommand("Copy"),console.log("\u590D\u5236\u6210\u529F")}return(h,x)=>(te(),se(Vt,null,[Ni,t.value==""?(te(),se("div",Vi,"\u767B\u5F55\u4EE5\u83B7\u53D6\u63A8\u6D41\u5730\u5740")):(te(),se("div",Wi,[zi,T("div",Gi,[ke(T("input",{type:"text",readonly:"true","onUpdate:modelValue":x[0]||(x[0]=y=>t.value=y),class:"form-control",ref:(y,E)=>{E.pushUrlElement=y,_.value=y}},null,512),[[Ue,t.value]]),T("span",{class:"input-group-append"},[T("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:r}," \u590D\u5236 ")])]),$i]))],64))}}),Hi={class:"navbar navbar-expand-sm navbar-light"},Ji=T("a",{class:"navbar-brand",href:"javascript:;"},[T("strong",null,"Link TV")],-1),Xi=T("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggle","aria-controls":"navbarToggle","aria-expanded":"false","aria-label":"Toggle navigation"},[T("span",{class:"navbar-toggler-icon"})],-1),Yi={id:"navbarToggle",class:"collapse navbar-collapse"},qi=bt('<ul class="navbar-nav mr-auto"><li class="nav-item"><form class="form-inline"><input class="form-control"><button class="btn">\u67E5\u627E</button></form></li></ul>',1),Zi=T("button",{type:"button",class:"btn"},[T("svg",{t:"1634997811697",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6372",width:"1.5em",height:"1.5em"},[T("path",{d:"M511.73808594 93.19941406c-140.67070313 0-264.92695313 69.1453125-341.01035156 175.08955078v-70.47597656c0-21.66767578-17.61679688-39.22998047-39.346875-39.22998047s-39.346875 17.56318359-39.346875 39.22998047v156.91992188c0 21.66240234 17.61679688 39.22998047 39.346875 39.22998047h170.50341796c21.73007813 0 39.346875-17.56669922 39.346875-39.22998047 0-21.66767578-17.61679688-39.22998047-39.346875-39.22998047h-68.4421875c61.73085937-86.98798828 163.28496094-143.84267578 278.296875-143.84267578 188.32851562 0 341.00507812 152.22128906 341.00507813 339.99345703 0 187.76865234-152.6765625 339.99345703-341.00507813 339.99345703-158.73574219 0-291.74589844-108.29179688-329.75771484-254.70439453l-0.68291016 0.21269531c-5.3015625-15.41162109-19.54248047-26.65986328-36.8024414-26.65986328-21.73007813 0-39.346875 17.56318359-39.346875 39.22558594 0 3.86630859 1.16367187 7.36875 2.20605469 10.89316406l-0.40957032 0.12919922c0.25839844 0.95009766 0.73212891 1.8 0.99580078 2.74482422 0.28916016 0.76201172 0.48164063 1.52314453 0.81650391 2.2640625 49.92539062 175.47011719 210.98935547 304.35380859 402.98378906 304.35380859 231.79394531 0 419.69970703-187.35029297 419.69970703-418.45341797-0.00175781-231.10751953-187.90839844-418.45429688-419.70322265-418.45429687z m0 176.53183594c-21.73007813 0-39.346875 17.56318359-39.346875 39.22998047v235.37988281c0 21.66767578 17.61679688 39.22998047 39.346875 39.22998047h170.50253906c21.73007813 0 39.346875-17.56318359 39.346875-39.22558594 0-21.67119141-17.61679688-39.22998047-39.346875-39.22998047H551.08496094v-196.15429687c0-21.66767578-17.61767578-39.22998047-39.34775391-39.22998047z","p-id":"6373"})])],-1),Qi={class:"dropdown"},es=T("button",{type:"button",class:"btn",role:"button","data-toggle":"dropdown","aria-expanded":"false"},[T("svg",{t:"1634997536655",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4087",width:"1.5em",height:"1.5em"},[T("path",{d:"M800 330.9V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v512c0 35.3 28.7 64 64 64h672c35.3 0 64-28.7 64-64v-74.9c0-11.6 11.9-19.3 22.5-14.6L934 728c42.3 18.8 90-12.2 90-58.5v-315c0-46.3-47.7-77.3-90-58.5l-111.5 49.6c-10.6 4.7-22.5-3.1-22.5-14.7zM720 768H80c-8.8 0-16-7.2-16-16V272c0-8.8 7.2-16 16-16h640c8.8 0 16 7.2 16 16v480c0 8.8-7.2 16-16 16z m217.5-108.5l-128-56.9c-5.8-2.6-9.5-8.3-9.5-14.6V436c0-6.3 3.7-12.1 9.5-14.6l128-56.9c10.6-4.7 22.5 3 22.5 14.6v265.8c0 11.6-11.9 19.3-22.5 14.6z","p-id":"4088"}),T("path",{d:"M332.4 445.4L447.9 512l-115.4 66.6V445.4m-16-75.8c-25.1 0-48.1 20-48.1 48.1v188.7c0 28 23 48.1 48.1 48.1 8 0 16.2-2 23.9-6.5l163.4-94.4c32-18.5 32-64.7 0-83.1l-163.4-94.4c-7.7-4.5-15.9-6.5-23.9-6.5z","p-id":"4089"})])],-1),ts={class:"dropdown-menu dropdown-menu-right p-4",style:{"min-width":"20em"}},rs={class:"dropdown"},ns=T("button",{class:"btn",id:"userDropdown",role:"button","data-toggle":"dropdown","aria-expanded":"false"},[T("svg",{t:"1634873118556",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2728",width:"1.5em",height:"1.5em"},[T("path",{d:"M500 128.8c-95.2 5.6-173.6 83.2-180 178.4-7.2 112 80.8 205.6 191.2 205.6 106.4 0 192-86.4 192-192 0.8-110.4-92-198.4-203.2-192zM512 575.2c-128 0-383.2 64-383.2 192v96c0 17.6 14.4 32 32 32h702.4c17.6 0 32-14.4 32-32V766.4c0-127.2-255.2-191.2-383.2-191.2z","p-id":"2729"})])],-1),is={class:"dropdown-menu dropdown-menu-right"},hr={emits:["logined"],setup(g,{emit:e}){const t=H(!1);We(()=>{Ne(()=>{localStorage.getItem("token")!=null&&(t.value=!0,e("logined"))})});function _(){e("logined"),t.value=!0}function r(){t.value=!1}return(h,x)=>(te(),se("nav",Hi,[Ji,Xi,T("div",Yi,[qi,Zi,T("div",Qi,[es,T("div",ts,[Me(Ki,{logined:t.value},null,8,["logined"])])]),T("div",rs,[ns,T("div",is,[t.value?(te(),yt(ji,{key:1,onLogout:r})):(te(),yt(yi,{key:0,onLogined:_,onLogout:r}))])])])]))}},ss={class:"container"},os=T("div",{class:"row"},[T("br")],-1),as=T("h4",{class:"row"},"\u6B63\u5728\u76F4\u64AD",-1),us={setup(g){return H(!1),H(!0),(e,t)=>(te(),se("div",null,[Me(hr),T("div",ss,[os,as,Me(ii)])]))}};var _r={exports:{}};/*!
 * element-resize-detector 1.2.3
 * Copyright (c) 2016 Lucas Wiener
 * https://github.com/wnr/element-resize-detector
 * Licensed under MIT
 */(function(g,e){(function(t){g.exports=t()})(function(){return function(){function t(_,r,h){function x(b,u){if(!r[b]){if(!_[b]){var l=typeof ot=="function"&&ot;if(!u&&l)return l(b,!0);if(y)return y(b,!0);var o=new Error("Cannot find module '"+b+"'");throw o.code="MODULE_NOT_FOUND",o}var v=r[b]={exports:{}};_[b][0].call(v.exports,function(s){var f=_[b][1][s];return x(f||s)},v,v.exports,t,_,r,h)}return r[b].exports}for(var y=typeof ot=="function"&&ot,E=0;E<h.length;E++)x(h[E]);return x}return t}()({1:[function(t,_,r){var h=t("./utils");_.exports=function(E){E=E||{};var b=E.reporter,u=h.getOption(E,"async",!0),l=h.getOption(E,"auto",!0);l&&!u&&(b&&b.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),u=!0);var o=x(),v,s=!1;function f(n,m){!s&&l&&u&&o.size()===0&&i(),o.add(n,m)}function p(){for(s=!0;o.size();){var n=o;o=x(),n.process()}s=!1}function d(n){s||(n===void 0&&(n=u),v&&(c(v),v=null),n?i():p())}function i(){v=a(p)}function c(n){var m=clearTimeout;return m(n)}function a(n){var m=function(S){return setTimeout(S,0)};return m(n)}return{add:f,force:d}};function x(){var y={},E=0,b=0,u=0;function l(s,f){f||(f=s,s=0),s>b?b=s:s<u&&(u=s),y[s]||(y[s]=[]),y[s].push(f),E++}function o(){for(var s=u;s<=b;s++)for(var f=y[s],p=0;p<f.length;p++){var d=f[p];d()}}function v(){return E}return{add:l,process:o,size:v}}},{"./utils":2}],2:[function(t,_,r){var h=_.exports={};h.getOption=x;function x(y,E,b){var u=y[E];return u==null&&b!==void 0?b:u}},{}],3:[function(t,_,r){var h=_.exports={};h.isIE=function(x){function y(){var b=navigator.userAgent.toLowerCase();return b.indexOf("msie")!==-1||b.indexOf("trident")!==-1||b.indexOf(" edge/")!==-1}if(!y())return!1;if(!x)return!0;var E=function(){var b,u=3,l=document.createElement("div"),o=l.getElementsByTagName("i");do l.innerHTML="<!--[if gt IE "+ ++u+"]><i></i><![endif]-->";while(o[0]);return u>4?u:b}();return x===E},h.isLegacyOpera=function(){return!!window.opera}},{}],4:[function(t,_,r){var h=_.exports={};h.forEach=function(x,y){for(var E=0;E<x.length;E++){var b=y(x[E]);if(b)return b}}},{}],5:[function(t,_,r){var h=t("../browser-detector");_.exports=function(x){x=x||{};var y=x.reporter,E=x.batchProcessor,b=x.stateHandler.getState;if(!y)throw new Error("Missing required dependency: reporter.");function u(f,p){function d(){p(f)}if(h.isIE(8))b(f).object={proxy:d},f.attachEvent("onresize",d);else{var i=v(f);if(!i)throw new Error("Element is not detectable by this strategy.");i.contentDocument.defaultView.addEventListener("resize",d)}}function l(f){var p=x.important?" !important; ":"; ";return(f.join(p)+p).trim()}function o(f,p,d){d||(d=p,p=f,f=null),f=f||{},f.debug;function i(c,a){var n=l(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),m=!1,S=window.getComputedStyle(c),w=c.offsetWidth,D=c.offsetHeight;b(c).startSize={width:w,height:D};function R(){function A(){if(S.position==="static"){c.style.setProperty("position","relative",f.important?"important":"");var O=function(F,P,M,V){function K(Q){return Q.replace(/[^-\d\.]/g,"")}var z=M[V];z!=="auto"&&K(z)!=="0"&&(F.warn("An element that is positioned static has style."+V+"="+z+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+V+" will be set to 0. Element: ",P),P.style.setProperty(V,"0",f.important?"important":""))};O(y,c,S,"top"),O(y,c,S,"right"),O(y,c,S,"bottom"),O(y,c,S,"left")}}function L(){m||A();function O(P,M){if(!P.contentDocument){var V=b(P);V.checkForObjectDocumentTimeoutId&&window.clearTimeout(V.checkForObjectDocumentTimeoutId),V.checkForObjectDocumentTimeoutId=setTimeout(function(){V.checkForObjectDocumentTimeoutId=0,O(P,M)},100);return}M(P.contentDocument)}var F=this;O(F,function(M){a(c)})}S.position!==""&&(A(),m=!0);var C=document.createElement("object");C.style.cssText=n,C.tabIndex=-1,C.type="text/html",C.setAttribute("aria-hidden","true"),C.onload=L,h.isIE()||(C.data="about:blank"),!!b(c)&&(c.appendChild(C),b(c).object=C,h.isIE()&&(C.data="about:blank"))}E?E.add(R):R()}h.isIE(8)?d(p):i(p,d)}function v(f){return b(f).object}function s(f){if(!!b(f)){var p=v(f);!p||(h.isIE(8)?f.detachEvent("onresize",p.proxy):f.removeChild(p),b(f).checkForObjectDocumentTimeoutId&&window.clearTimeout(b(f).checkForObjectDocumentTimeoutId),delete b(f).object)}}return{makeDetectable:o,addListener:u,uninstall:s}}},{"../browser-detector":3}],6:[function(t,_,r){var h=t("../collection-utils").forEach;_.exports=function(x){x=x||{};var y=x.reporter,E=x.batchProcessor,b=x.stateHandler.getState;x.stateHandler.hasState;var u=x.idHandler;if(!E)throw new Error("Missing required dependency: batchProcessor");if(!y)throw new Error("Missing required dependency: reporter.");var l=p(),o="erd_scroll_detection_scrollbar_style",v="erd_scroll_detection_container";function s(R){d(R,o,v)}s(window.document);function f(R){var A=x.important?" !important; ":"; ";return(R.join(A)+A).trim()}function p(){var R=500,A=500,L=document.createElement("div");L.style.cssText=f(["position: absolute","width: "+R*2+"px","height: "+A*2+"px","visibility: hidden","margin: 0","padding: 0"]);var C=document.createElement("div");C.style.cssText=f(["position: absolute","width: "+R+"px","height: "+A+"px","overflow: scroll","visibility: none","top: "+-R*3+"px","left: "+-A*3+"px","visibility: hidden","margin: 0","padding: 0"]),C.appendChild(L),document.body.insertBefore(C,document.body.firstChild);var O=R-C.clientWidth,F=A-C.clientHeight;return document.body.removeChild(C),{width:O,height:F}}function d(R,A,L){function C(M,V){V=V||function(z){R.head.appendChild(z)};var K=R.createElement("style");return K.innerHTML=M,K.id=A,V(K),K}if(!R.getElementById(A)){var O=L+"_animation",F=L+"_animation_active",P=`/* Created by the element-resize-detector library. */
`;P+="."+L+" > div::-webkit-scrollbar { "+f(["display: none"])+` }

`,P+="."+F+" { "+f(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+O,"animation-name: "+O])+` }
`,P+="@-webkit-keyframes "+O+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,P+="@keyframes "+O+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",C(P)}}function i(R){R.className+=" "+v+"_animation_active"}function c(R,A,L){if(R.addEventListener)R.addEventListener(A,L);else if(R.attachEvent)R.attachEvent("on"+A,L);else return y.error("[scroll] Don't know how to add event listeners.")}function a(R,A,L){if(R.removeEventListener)R.removeEventListener(A,L);else if(R.detachEvent)R.detachEvent("on"+A,L);else return y.error("[scroll] Don't know how to remove event listeners.")}function n(R){return b(R).container.childNodes[0].childNodes[0].childNodes[0]}function m(R){return b(R).container.childNodes[0].childNodes[0].childNodes[1]}function S(R,A){var L=b(R).listeners;if(!L.push)throw new Error("Cannot add listener to an element that is not detectable.");b(R).listeners.push(A)}function w(R,A,L){L||(L=A,A=R,R=null),R=R||{};function C(){if(R.debug){var U=Array.prototype.slice.call(arguments);if(U.unshift(u.get(A),"Scroll: "),y.log.apply)y.log.apply(null,U);else for(var Y=0;Y<U.length;Y++)y.log(U[Y])}}function O(U){function Y(ee){var de=ee.getRootNode&&ee.getRootNode().contains(ee);return ee===ee.ownerDocument.body||ee.ownerDocument.body.contains(ee)||de}return!Y(U)||window.getComputedStyle(U)===null}function F(U){var Y=b(U).container.childNodes[0],ee=window.getComputedStyle(Y);return!ee.width||ee.width.indexOf("px")===-1}function P(){var U=window.getComputedStyle(A),Y={};return Y.position=U.position,Y.width=A.offsetWidth,Y.height=A.offsetHeight,Y.top=U.top,Y.right=U.right,Y.bottom=U.bottom,Y.left=U.left,Y.widthCSS=U.width,Y.heightCSS=U.height,Y}function M(){var U=P();b(A).startSize={width:U.width,height:U.height},C("Element start size",b(A).startSize)}function V(){b(A).listeners=[]}function K(){if(C("storeStyle invoked."),!b(A)){C("Aborting because element has been uninstalled");return}var U=P();b(A).style=U}function z(U,Y,ee){b(U).lastWidth=Y,b(U).lastHeight=ee}function Q(U){return n(U).childNodes[0]}function X(){return 2*l.width+1}function N(){return 2*l.height+1}function q(U){return U+10+X()}function ye(U){return U+10+N()}function ie(U){return U*2+X()}function ne(U){return U*2+N()}function he(U,Y,ee){var de=n(U),be=m(U),Ae=q(Y),me=ye(ee),oe=ie(Y),re=ne(ee);de.scrollLeft=Ae,de.scrollTop=me,be.scrollLeft=oe,be.scrollTop=re}function ue(){var U=b(A).container;if(!U){U=document.createElement("div"),U.className=v,U.style.cssText=f(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),b(A).container=U,i(U),A.appendChild(U);var Y=function(){b(A).onRendered&&b(A).onRendered()};c(U,"animationstart",Y),b(A).onAnimationStart=Y}return U}function le(){function U(){var G=b(A).style;if(G.position==="static"){A.style.setProperty("position","relative",R.important?"important":"");var J=function(ae,Se,$e,je){function Ze(br){return br.replace(/[^-\d\.]/g,"")}var Et=$e[je];Et!=="auto"&&Ze(Et)!=="0"&&(ae.warn("An element that is positioned static has style."+je+"="+Et+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+je+" will be set to 0. Element: ",Se),Se.style[je]=0)};J(y,A,G,"top"),J(y,A,G,"right"),J(y,A,G,"bottom"),J(y,A,G,"left")}}function Y(G,J,ae,Se){return G=G?G+"px":"0",J=J?J+"px":"0",ae=ae?ae+"px":"0",Se=Se?Se+"px":"0",["left: "+G,"top: "+J,"right: "+Se,"bottom: "+ae]}if(C("Injecting elements"),!b(A)){C("Aborting because element has been uninstalled");return}U();var ee=b(A).container;ee||(ee=ue());var de=l.width,be=l.height,Ae=f(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),me=f(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Y(-(1+de),-(1+be),-be,-de))),oe=f(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),re=f(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),ge=f(["position: absolute","left: 0","top: 0"]),Fe=f(["position: absolute","width: 200%","height: 200%"]),Re=document.createElement("div"),De=document.createElement("div"),fe=document.createElement("div"),nt=document.createElement("div"),I=document.createElement("div"),B=document.createElement("div");Re.dir="ltr",Re.style.cssText=Ae,Re.className=v,De.className=v,De.style.cssText=me,fe.style.cssText=oe,nt.style.cssText=ge,I.style.cssText=re,B.style.cssText=Fe,fe.appendChild(nt),I.appendChild(B),De.appendChild(fe),De.appendChild(I),Re.appendChild(De),ee.appendChild(Re);function k(){b(A).onExpand&&b(A).onExpand()}function W(){b(A).onShrink&&b(A).onShrink()}c(fe,"scroll",k),c(I,"scroll",W),b(A).onExpandScroll=k,b(A).onShrinkScroll=W}function ve(){function U(oe,re,ge){var Fe=Q(oe),Re=q(re),De=ye(ge);Fe.style.setProperty("width",Re+"px",R.important?"important":""),Fe.style.setProperty("height",De+"px",R.important?"important":"")}function Y(oe){var re=A.offsetWidth,ge=A.offsetHeight,Fe=re!==b(A).lastWidth||ge!==b(A).lastHeight;C("Storing current size",re,ge),z(A,re,ge),E.add(0,function(){if(!!Fe){if(!b(A)){C("Aborting because element has been uninstalled");return}if(!ee()){C("Aborting because element container has not been initialized");return}if(R.debug){var De=A.offsetWidth,fe=A.offsetHeight;(De!==re||fe!==ge)&&y.warn(u.get(A),"Scroll: Size changed before updating detector elements.")}U(A,re,ge)}}),E.add(1,function(){if(!b(A)){C("Aborting because element has been uninstalled");return}if(!ee()){C("Aborting because element container has not been initialized");return}he(A,re,ge)}),Fe&&oe&&E.add(2,function(){if(!b(A)){C("Aborting because element has been uninstalled");return}if(!ee()){C("Aborting because element container has not been initialized");return}oe()})}function ee(){return!!b(A).container}function de(){function oe(){return b(A).lastNotifiedWidth===void 0}C("notifyListenersIfNeeded invoked");var re=b(A);if(oe()&&re.lastWidth===re.startSize.width&&re.lastHeight===re.startSize.height)return C("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(re.lastWidth===re.lastNotifiedWidth&&re.lastHeight===re.lastNotifiedHeight)return C("Not notifying: Size already notified");C("Current size not notified, notifying..."),re.lastNotifiedWidth=re.lastWidth,re.lastNotifiedHeight=re.lastHeight,h(b(A).listeners,function(ge){ge(A)})}function be(){if(C("startanimation triggered."),F(A)){C("Ignoring since element is still unrendered...");return}C("Element rendered.");var oe=n(A),re=m(A);(oe.scrollLeft===0||oe.scrollTop===0||re.scrollLeft===0||re.scrollTop===0)&&(C("Scrollbars out of sync. Updating detector elements..."),Y(de))}function Ae(){if(C("Scroll detected."),F(A)){C("Scroll event fired while unrendered. Ignoring...");return}Y(de)}if(C("registerListenersAndPositionElements invoked."),!b(A)){C("Aborting because element has been uninstalled");return}b(A).onRendered=be,b(A).onExpand=Ae,b(A).onShrink=Ae;var me=b(A).style;U(A,me.width,me.height)}function Z(){if(C("finalizeDomMutation invoked."),!b(A)){C("Aborting because element has been uninstalled");return}var U=b(A).style;z(A,U.width,U.height),he(A,U.width,U.height)}function j(){L(A)}function ce(){C("Installing..."),V(),M(),E.add(0,K),E.add(1,le),E.add(2,ve),E.add(3,Z),E.add(4,j)}C("Making detectable..."),O(A)?(C("Element is detached"),ue(),C("Waiting until element is attached..."),b(A).onRendered=function(){C("Element is now attached"),ce()}):ce()}function D(R){var A=b(R);!A||(A.onExpandScroll&&a(n(R),"scroll",A.onExpandScroll),A.onShrinkScroll&&a(m(R),"scroll",A.onShrinkScroll),A.onAnimationStart&&a(A.container,"animationstart",A.onAnimationStart),A.container&&R.removeChild(A.container))}return{makeDetectable:w,addListener:S,uninstall:D,initDocument:s}}},{"../collection-utils":4}],7:[function(t,_,r){var h=t("./collection-utils").forEach,x=t("./element-utils"),y=t("./listener-handler"),E=t("./id-generator"),b=t("./id-handler"),u=t("./reporter"),l=t("./browser-detector"),o=t("batch-processor"),v=t("./state-handler"),s=t("./detection-strategy/object.js"),f=t("./detection-strategy/scroll.js");function p(a){return Array.isArray(a)||a.length!==void 0}function d(a){if(Array.isArray(a))return a;var n=[];return h(a,function(m){n.push(m)}),n}function i(a){return a&&a.nodeType===1}_.exports=function(a){a=a||{};var n;if(a.idHandler)n={get:function(X){return a.idHandler.get(X,!0)},set:a.idHandler.set};else{var m=E(),S=b({idGenerator:m,stateHandler:v});n=S}var w=a.reporter;if(!w){var D=w===!1;w=u(D)}var R=c(a,"batchProcessor",o({reporter:w})),A={};A.callOnAdd=!!c(a,"callOnAdd",!0),A.debug=!!c(a,"debug",!1);var L=y(n),C=x({stateHandler:v}),O,F=c(a,"strategy","object"),P=c(a,"important",!1),M={reporter:w,batchProcessor:R,stateHandler:v,idHandler:n,important:P};if(F==="scroll"&&(l.isLegacyOpera()?(w.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),F="object"):l.isIE(9)&&(w.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),F="object")),F==="scroll")O=f(M);else if(F==="object")O=s(M);else throw new Error("Invalid strategy name: "+F);var V={};function K(X,N,q){function ye(ve){var Z=L.get(ve);h(Z,function(ce){ce(ve)})}function ie(ve,Z,j){L.add(Z,j),ve&&j(Z)}if(q||(q=N,N=X,X={}),!N)throw new Error("At least one element required.");if(!q)throw new Error("Listener required.");if(i(N))N=[N];else if(p(N))N=d(N);else return w.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var ne=0,he=c(X,"callOnAdd",A.callOnAdd),ue=c(X,"onReady",function(){}),le=c(X,"debug",A.debug);h(N,function(Z){v.getState(Z)||(v.initState(Z),n.set(Z));var j=n.get(Z);if(le&&w.log("Attaching listener to element",j,Z),!C.isDetectable(Z)){if(le&&w.log(j,"Not detectable."),C.isBusy(Z)){le&&w.log(j,"System busy making it detectable"),ie(he,Z,q),V[j]=V[j]||[],V[j].push(function(){ne++,ne===N.length&&ue()});return}return le&&w.log(j,"Making detectable..."),C.markBusy(Z,!0),O.makeDetectable({debug:le,important:P},Z,function(U){if(le&&w.log(j,"onElementDetectable"),v.getState(U)){C.markAsDetectable(U),C.markBusy(U,!1),O.addListener(U,ye),ie(he,U,q);var Y=v.getState(U);if(Y&&Y.startSize){var ee=U.offsetWidth,de=U.offsetHeight;(Y.startSize.width!==ee||Y.startSize.height!==de)&&ye(U)}V[j]&&h(V[j],function(be){be()})}else le&&w.log(j,"Element uninstalled before being detectable.");delete V[j],ne++,ne===N.length&&ue()})}le&&w.log(j,"Already detecable, adding listener."),ie(he,Z,q),ne++}),ne===N.length&&ue()}function z(X){if(!X)return w.error("At least one element is required.");if(i(X))X=[X];else if(p(X))X=d(X);else return w.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");h(X,function(N){L.removeAllListeners(N),O.uninstall(N),v.cleanState(N)})}function Q(X){O.initDocument&&O.initDocument(X)}return{listenTo:K,removeListener:L.removeListener,removeAllListeners:L.removeAllListeners,uninstall:z,initDocument:Q}};function c(a,n,m){var S=a[n];return S==null&&m!==void 0?m:S}},{"./browser-detector":3,"./collection-utils":4,"./detection-strategy/object.js":5,"./detection-strategy/scroll.js":6,"./element-utils":8,"./id-generator":9,"./id-handler":10,"./listener-handler":11,"./reporter":12,"./state-handler":13,"batch-processor":1}],8:[function(t,_,r){_.exports=function(h){var x=h.stateHandler.getState;function y(l){var o=x(l);return o&&!!o.isDetectable}function E(l){x(l).isDetectable=!0}function b(l){return!!x(l).busy}function u(l,o){x(l).busy=!!o}return{isDetectable:y,markAsDetectable:E,isBusy:b,markBusy:u}}},{}],9:[function(t,_,r){_.exports=function(){var h=1;function x(){return h++}return{generate:x}}},{}],10:[function(t,_,r){_.exports=function(h){var x=h.idGenerator,y=h.stateHandler.getState;function E(u){var l=y(u);return l&&l.id!==void 0?l.id:null}function b(u){var l=y(u);if(!l)throw new Error("setId required the element to have a resize detection state.");var o=x.generate();return l.id=o,o}return{get:E,set:b}}},{}],11:[function(t,_,r){_.exports=function(h){var x={};function y(l){var o=h.get(l);return o===void 0?[]:x[o]||[]}function E(l,o){var v=h.get(l);x[v]||(x[v]=[]),x[v].push(o)}function b(l,o){for(var v=y(l),s=0,f=v.length;s<f;++s)if(v[s]===o){v.splice(s,1);break}}function u(l){var o=y(l);!o||(o.length=0)}return{get:y,add:E,removeListener:b,removeAllListeners:u}}},{}],12:[function(t,_,r){_.exports=function(h){function x(){}var y={log:x,warn:x,error:x};if(!h&&window.console){var E=function(b,u){b[u]=function(){var o=console[u];if(o.apply)o.apply(console,arguments);else for(var v=0;v<arguments.length;v++)o(arguments[v])}};E(y,"log"),E(y,"warn"),E(y,"error")}return y}},{}],13:[function(t,_,r){var h="_erd";function x(b){return b[h]={},y(b)}function y(b){return b[h]}function E(b){delete b[h]}_.exports={initState:x,getState:y,cleanState:E}},{}]},{},[7])(7)})})(_r);var ls=_r.exports,ds=function(){for(var g=["oTransform","msTransform","mozTransform","webkitTransform","transform"],e=document.createElement("div").style,t=0;t<g.length;t++)if(g[t]in e)return g[t];return"transform"}();function fs(g){var e=document.createElement("div");if(e.style.cssText="position:absolute;",typeof g.render=="function"){var t=g.render();if(t instanceof HTMLElement)return e.appendChild(t),e}if(e.textContent=g.text,g.style)for(var _ in g.style)e.style[_]=g.style[_];return e}function cs(){var g=document.createElement("div");return g.style.cssText="overflow:hidden;white-space:nowrap;transform:translateZ(0);",g}function hs(g){for(var e=g.lastChild;e;)g.removeChild(e),e=g.lastChild}function _s(g){g.style.width=g.width+"px",g.style.height=g.height+"px"}function ps(){}function vs(g,e){var t=document.createDocumentFragment(),_=0,r=null;for(_=0;_<e.length;_++)r=e[_],r.node=r.node||fs(r),t.appendChild(r.node);for(e.length&&g.appendChild(t),_=0;_<e.length;_++)r=e[_],r.width=r.width||r.node.offsetWidth,r.height=r.height||r.node.offsetHeight}function ms(g,e){e.node.style[ds]="translate("+e.x+"px,"+e.y+"px)"}function gs(g,e){g.removeChild(e.node),this.media||(e.node=null)}var xs={name:"dom",init:cs,clear:hs,resize:_s,framing:ps,setup:vs,render:ms,remove:gs},Bt=Object.create(null);function Es(g,e){if(Bt[g])return Bt[g];var t=12,_=/(\d+(?:\.\d+)?)(px|%|em|rem)(?:\s*\/\s*(\d+(?:\.\d+)?)(px|%|em|rem)?)?/,r=g.match(_);if(r){var h=r[1]*1||10,x=r[2],y=r[3]*1||1.2,E=r[4];x==="%"&&(h*=e.container/100),x==="em"&&(h*=e.container),x==="rem"&&(h*=e.root),E==="px"&&(t=y),E==="%"&&(t=h*y/100),E==="em"&&(t=h*y),E==="rem"&&(t=e.root*y),E===void 0&&(t=h*y)}return Bt[g]=t,t}function ys(g,e){if(typeof g.render=="function"){var t=g.render();if(t instanceof HTMLCanvasElement)return g.width=t.width,g.height=t.height,t}var _=document.createElement("canvas"),r=_.getContext("2d"),h=g.style||{};h.font=h.font||"10px sans-serif",h.textBaseline=h.textBaseline||"bottom";var x=h.lineWidth*1;x=x>0&&x!==1/0?Math.ceil(x):!!h.strokeStyle*1,r.font=h.font,g.width=g.width||Math.max(1,Math.ceil(r.measureText(g.text).width)+x*2),g.height=g.height||Math.ceil(Es(h.font,e))+x*2,_.width=g.width,_.height=g.height;for(var y in h)r[y]=h[y];var E=0;switch(h.textBaseline){case"top":case"hanging":E=x;break;case"middle":E=g.height>>1;break;default:E=g.height-x}return h.strokeStyle&&r.strokeText(g.text,x,E),r.fillText(g.text,x,E),_}function pr(g){return window.getComputedStyle(g,null).getPropertyValue("font-size").match(/(.+)px/)[1]*1}function bs(g){var e=document.createElement("canvas");return e.context=e.getContext("2d"),e._fontSize={root:pr(document.getElementsByTagName("html")[0]),container:pr(g)},e}function Ss(g,e){g.context.clearRect(0,0,g.width,g.height);for(var t=0;t<e.length;t++)e[t].canvas=null}function As(){}function ws(g){g.context.clearRect(0,0,g.width,g.height)}function Ls(g,e){for(var t=0;t<e.length;t++){var _=e[t];_.canvas=ys(_,g._fontSize)}}function Cs(g,e){g.context.drawImage(e.canvas,e.x,e.y)}function Rs(g,e){e.canvas=null}var Ds={name:"canvas",init:bs,clear:Ss,resize:As,framing:ws,setup:Ls,render:Cs,remove:Rs};function Os(g){var e=this,t=this.media?this.media.currentTime:Date.now()/1e3,_=this.media?this.media.playbackRate:1;function r(v,s){if(s.mode==="top"||s.mode==="bottom")return t-v.time<e._.duration;var f=e._.stage.width+v.width,p=f*(t-v.time)*_/e._.duration;if(v.width>p)return!0;var d=e._.duration+v.time-t,i=e._.stage.width+s.width,c=e.media?s.time:s._utc,a=i*(t-c)*_/e._.duration,n=e._.stage.width-a,m=e._.duration*n/(e._.stage.width+s.width);return d>m}for(var h=this._.space[g.mode],x=0,y=0,E=1;E<h.length;E++){var b=h[E],u=g.height;if((g.mode==="top"||g.mode==="bottom")&&(u+=b.height),b.range-b.height-h[x].range>=u){y=E;break}r(b,g)&&(x=E)}var l=h[x].range,o={range:l+g.height,time:this.media?g.time:g._utc,width:g.width,height:g.height};return h.splice(x+1,y-x-1,o),g.mode==="bottom"?this._.stage.height-g.height-l%this._.stage.height:l%(this._.stage.height-g.height)}function Ts(g,e,t,_){return function(){g(this._.stage);var r=Date.now()/1e3,h=this.media?this.media.currentTime:r,x=this.media?this.media.playbackRate:1,y=null,E=0,b=0;for(b=this._.runningList.length-1;b>=0;b--)y=this._.runningList[b],E=this.media?y.time:y._utc,h-E>this._.duration&&(_(this._.stage,y),this._.runningList.splice(b,1));for(var u=[];this._.position<this.comments.length&&(y=this.comments[this._.position],E=this.media?y.time:y._utc,!(E>=h));){if(h-E>this._.duration){++this._.position;continue}this.media&&(y._utc=r-(this.media.currentTime-y.time)),u.push(y),++this._.position}for(e(this._.stage,u),b=0;b<u.length;b++)y=u[b],y.y=Os.call(this,y),(y.mode==="top"||y.mode==="bottom")&&(y.x=this._.stage.width-y.width>>1),this._.runningList.push(y);for(b=0;b<this._.runningList.length;b++){y=this._.runningList[b];var l=this._.stage.width+y.width,o=l*(r-y._utc)*x/this._.duration;y.mode==="ltr"&&(y.x=o-y.width+.5|0),y.mode==="rtl"&&(y.x=this._.stage.width-o+.5|0),t(this._.stage,y)}}}var vr=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(g){return setTimeout(g,50/3)},Ps=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||clearTimeout;function mr(g,e,t){for(var _=0,r=0,h=g.length;r<h-1;)_=r+h>>1,t>=g[_][e]?r=_:h=_;return g[r]&&t<g[r][e]?r:h}function gr(g){return/^(ltr|top|bottom)$/i.test(g)?g.toLowerCase():"rtl"}function gt(){var g=9007199254740991;return[{range:0,time:-g,width:g,height:0},{range:g,time:g,width:0,height:0}]}function xr(g){g.ltr=gt(),g.rtl=gt(),g.top=gt(),g.bottom=gt()}function kt(){if(!this._.visible||!this._.paused)return this;if(this._.paused=!1,this.media)for(var g=0;g<this._.runningList.length;g++){var e=this._.runningList[g];e._utc=Date.now()/1e3-(this.media.currentTime-e.time)}var t=this,_=Ts(this._.engine.framing.bind(this),this._.engine.setup.bind(this),this._.engine.render.bind(this),this._.engine.remove.bind(this));function r(){_.call(t),t._.requestID=vr(r)}return this._.requestID=vr(r),this}function Ut(){return!this._.visible||this._.paused?this:(this._.paused=!0,Ps(this._.requestID),this._.requestID=0,this)}function jt(){if(!this.media)return this;this.clear(),xr(this._.space);var g=mr(this.comments,"time",this.media.currentTime);return this._.position=Math.max(0,g-1),this}function Is(g){g.play=kt.bind(this),g.pause=Ut.bind(this),g.seeking=jt.bind(this),this.media.addEventListener("play",g.play),this.media.addEventListener("pause",g.pause),this.media.addEventListener("playing",g.play),this.media.addEventListener("waiting",g.pause),this.media.addEventListener("seeking",g.seeking)}function Fs(g){this.media.removeEventListener("play",g.play),this.media.removeEventListener("pause",g.pause),this.media.removeEventListener("playing",g.play),this.media.removeEventListener("waiting",g.pause),this.media.removeEventListener("seeking",g.seeking),g.play=null,g.pause=null,g.seeking=null}function Ms(g){this._={},this.container=g.container||document.createElement("div"),this.media=g.media,this._.visible=!0,this.engine=(g.engine||"DOM").toLowerCase(),this._.engine=this.engine==="canvas"?Ds:xs,this._.requestID=0,this._.speed=Math.max(0,g.speed)||144,this._.duration=4,this.comments=g.comments||[],this.comments.sort(function(t,_){return t.time-_.time});for(var e=0;e<this.comments.length;e++)this.comments[e].mode=gr(this.comments[e].mode);return this._.runningList=[],this._.position=0,this._.paused=!0,this.media&&(this._.listener={},Is.call(this,this._.listener)),this._.stage=this._.engine.init(this.container),this._.stage.style.cssText+="position:relative;pointer-events:none;",this.resize(),this.container.appendChild(this._.stage),this._.space={},xr(this._.space),(!this.media||!this.media.paused)&&(jt.call(this),kt.call(this)),this}function Bs(){if(!this.container)return this;Ut.call(this),this.clear(),this.container.removeChild(this._.stage),this.media&&Fs.call(this,this._.listener);for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&(this[g]=null);return this}var xt=["mode","time","text","render","style"];function ks(g){if(!g||Object.prototype.toString.call(g)!=="[object Object]")return this;for(var e={},t=0;t<xt.length;t++)g[xt[t]]!==void 0&&(e[xt[t]]=g[xt[t]]);if(e.text=(e.text||"").toString(),e.mode=gr(e.mode),e._utc=Date.now()/1e3,this.media){var _=0;e.time===void 0?(e.time=this.media.currentTime,_=this._.position):(_=mr(this.comments,"time",e.time),_<this._.position&&(this._.position+=1)),this.comments.splice(_,0,e)}else this.comments.push(e);return this}function Us(){return this._.visible?this:(this._.visible=!0,this.media&&this.media.paused?this:(jt.call(this),kt.call(this),this))}function js(){return this._.visible?(Ut.call(this),this.clear(),this._.visible=!1,this):this}function Ns(){return this._.engine.clear(this._.stage,this._.runningList),this._.runningList=[],this}function Vs(){return this._.stage.width=this.container.offsetWidth,this._.stage.height=this.container.offsetHeight,this._.engine.resize(this._.stage),this._.duration=this._.stage.width/this._.speed,this}var Ws={get:function(){return this._.speed},set:function(g){return typeof g!="number"||isNaN(g)||!isFinite(g)||g<=0?this._.speed:(this._.speed=g,this._.stage.width&&(this._.duration=this._.stage.width/g),g)}};function Ve(g){g&&Ms.call(this,g)}Ve.prototype.destroy=function(){return Bs.call(this)};Ve.prototype.emit=function(g){return ks.call(this,g)};Ve.prototype.show=function(){return Us.call(this)};Ve.prototype.hide=function(){return js.call(this)};Ve.prototype.clear=function(){return Ns.call(this)};Ve.prototype.resize=function(){return Vs.call(this)};Object.defineProperty(Ve.prototype,"speed",Ws);const Er=g=>(it("data-v-9e15ec20"),g=g(),st(),g),zs={class:"volume-control"},Gs={key:0,t:"1638282830550",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4100",width:"1.2em",height:"1.2em"},$s=Er(()=>T("path",{d:"M128 420.576v200.864h149.12l175.456 140.064V284.288l-169.792 136.288H128z m132.256-64l204.288-163.968a32 32 0 0 1 52.032 24.96v610.432a32 32 0 0 1-51.968 24.992l-209.92-167.552H96a32 32 0 0 1-32-32v-264.864a32 32 0 0 1 32-32h164.256zM670.784 720.128a32 32 0 0 1-44.832-45.664 214.08 214.08 0 0 0 64.32-153.312 213.92 213.92 0 0 0-55.776-144.448 32 32 0 1 1 47.36-43.04 277.92 277.92 0 0 1 72.416 187.488 278.08 278.08 0 0 1-83.488 198.976zM822.912 858.88a32 32 0 1 1-45.888-44.608A419.008 419.008 0 0 0 896 521.152c0-108.704-41.376-210.848-114.432-288.384a32 32 0 0 1 46.592-43.872c84.16 89.28 131.84 207.04 131.84 332.256 0 127.84-49.76 247.904-137.088 337.728z","p-id":"4101"},null,-1)),Ks=[$s],Hs={key:1,t:"1638360948682",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7834",width:"1.2em",height:"1.2em"},Js=Er(()=>T("path",{d:"M128 420.576v200.864h149.12l175.456 140.064V284.288l-169.792 136.288H128z m132.256-64l204.288-163.968a32 32 0 0 1 52.032 24.96v610.432a32 32 0 0 1-51.968 24.992l-209.92-167.552H96a32 32 0 0 1-32-32v-264.864a32 32 0 0 1 32-32h164.256zM752 458.656L870.4 300.8a32 32 0 1 1 51.2 38.4L792 512l129.6 172.8a32 32 0 0 1-51.2 38.4l-118.4-157.856-118.4 157.856a32 32 0 0 1-51.2-38.4l129.6-172.8-129.6-172.8a32 32 0 0 1 51.2-38.4l118.4 157.856z","p-id":"7835"},null,-1)),Xs=[Js],Ys={class:"bg-dark volume-drop"},qs=Be({props:{volume:{type:Number,required:!0,default:100}},emits:["volumeChange"],setup(g,{emit:e}){const t=g,_=H(t.volume),r=H({"background-size":t.volume+"% 100%"}),h=H(!1);Qe(_,function(){r.value["background-size"]=_.value+"% 100%",h.value=_.value==0,e("volumeChange",_.value)});function x(){h.value=!h.value,_.value=h.value==!1?_.value:0}return(y,E)=>(te(),se("div",zs,[T("button",{type:"button",class:"btn volume-btn",onClick:x},[h.value?(te(),se("svg",Hs,Xs)):(te(),se("svg",Gs,Ks))]),T("div",Ys,[ke(T("input",{type:"range",style:Wt(r.value),"onUpdate:modelValue":E[0]||(E[0]=b=>_.value=b)},null,4),[[Ue,_.value]])])]))}});var Zs=Ke(qs,[["__scopeId","data-v-9e15ec20"]]);const Te=g=>(it("data-v-6161bfd3"),g=g(),st(),g),Qs={class:"w-100 h-100 d-flex flex-column justify-content-between"},eo=Te(()=>T("div",null,null,-1)),to={key:0,class:"align-self-center"},ro=Te(()=>T("button",{class:"btn btn-outline-secondary text-light align-self-center"}," \u8FDB\u5165\u76F4\u64AD\u95F4 ",-1)),no=[ro],io={class:"d-flex align-items-center"},so=Te(()=>T("svg",{t:"1634957175455",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2427",width:"1.2em",height:"1.2em"},[T("path",{d:"M426.666667 138.666667v746.666666a53.393333 53.393333 0 0 1-53.333334 53.333334H266.666667a53.393333 53.393333 0 0 1-53.333334-53.333334V138.666667a53.393333 53.393333 0 0 1 53.333334-53.333334h106.666666a53.393333 53.393333 0 0 1 53.333334 53.333334z m330.666666-53.333334H650.666667a53.393333 53.393333 0 0 0-53.333334 53.333334v746.666666a53.393333 53.393333 0 0 0 53.333334 53.333334h106.666666a53.393333 53.393333 0 0 0 53.333334-53.333334V138.666667a53.393333 53.393333 0 0 0-53.333334-53.333334z","p-id":"2428"})],-1)),oo=[so],ao=Te(()=>T("svg",{t:"1635335854612",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2419",width:"1.2em",height:"1.2em"},[T("path",{d:"M870.2 466.333333l-618.666667-373.28a53.333333 53.333333 0 0 0-80.866666 45.666667v746.56a53.206667 53.206667 0 0 0 80.886666 45.666667l618.666667-373.28a53.333333 53.333333 0 0 0 0-91.333334z","p-id":"2420"})],-1)),uo=[ao],lo=Te(()=>T("button",{class:"btn"},[T("svg",{t:"1634959851381",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3539",width:"1.2em",height:"1.2em"},[T("path",{d:"M968.604 366.465H762.475c-26.297 0-47.567-21.306-47.567-47.57 0-26.26 21.271-47.567 47.567-47.567h82.748C770.58 165.856 647.837 96.912 508.776 96.912c-227.685 0-412.26 184.576-412.26 412.257 0 227.685 184.576 412.26 412.26 412.26 227.685 0 412.26-184.577 412.26-412.26 0-26.26 21.27-47.567 47.566-47.567 26.263 0 47.57 21.307 47.57 47.567 0 280.226-227.191 507.397-507.396 507.397-280.21 0-507.398-227.17-507.398-507.397 0-280.224 227.189-507.395 507.398-507.395 170.062 0 320.27 83.846 412.259 212.306v-85.457c0-26.263 21.27-47.568 47.566-47.568 26.263 0 47.57 21.305 47.57 47.568v190.273c0.004 26.263-21.307 47.57-47.567 47.57z","p-id":"3540"})])],-1)),fo={class:"d-flex flex-row-reverse align-items-center"},co=Te(()=>T("svg",{t:"1635421603466",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3153",width:"1.2em",height:"1.2em"},[T("path",{d:"M983.04 727.04a40.96 40.96 0 0 0-40.96 40.96v173.592381h-174.08a40.96 40.96 0 1 0 0 82.407619h173.592381A82.407619 82.407619 0 0 0 1024 941.592381v-173.592381a40.96 40.96 0 0 0-40.96-40.96zM941.592381 0h-173.592381a40.96 40.96 0 1 0 0 82.407619h173.592381v173.592381a40.96 40.96 0 1 0 82.407619 0V82.407619A82.407619 82.407619 0 0 0 941.592381 0zM256 941.592381H82.407619v-173.592381a40.96 40.96 0 1 0-82.407619 0v173.592381A82.407619 82.407619 0 0 0 82.407619 1024h173.592381a40.96 40.96 0 1 0 0-82.407619zM40.96 296.96a40.96 40.96 0 0 0 40.96-40.96V82.407619h174.08a40.96 40.96 0 1 0 0-82.407619H82.407619A82.407619 82.407619 0 0 0 0 82.407619v173.592381a40.96 40.96 0 0 0 40.96 40.96z","p-id":"3154"}),T("path",{d:"M219.428571 219.428571m82.407619 0l420.32762 0q82.407619 0 82.407619 82.407619l0 420.32762q0 82.407619-82.407619 82.407619l-420.32762 0q-82.407619 0-82.407619-82.407619l0-420.32762q0-82.407619 82.407619-82.407619Z","p-id":"3155"})],-1)),ho=[co],_o=Te(()=>T("svg",{t:"1635575410904",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2536",width:"1.2em",height:"1.2em"},[T("path",{d:"M379.336 697.237L153.362 921.55c-14.11 14.007-36.905 13.922-50.912-0.188-14.007-14.11-13.922-36.905 0.188-50.912l227.6-225.927H138.645c-18.99 0-34.385-15.446-34.385-34.5 0-19.053 15.395-34.5 34.385-34.5H413.72c18.99 0 34.384 15.447 34.384 34.5v276c0 9.15-3.622 17.926-10.07 24.396a34.326 34.326 0 0 1-24.314 10.104 34.326 34.326 0 0 1-24.314-10.104 34.559 34.559 0 0 1-10.071-24.396V697.237z m263.395-366.88l227.813-227.813c14.059-14.059 36.853-14.059 50.912 0 14.059 14.059 14.059 36.853 0 50.912l-225.18 225.18h187.147c18.99 0 34.385 15.445 34.385 34.5 0 19.053-15.395 34.5-34.385 34.5H608.346c-18.99 0-34.384-15.447-34.384-34.5v-276c0-9.15 3.622-17.926 10.07-24.396a34.326 34.326 0 0 1 24.314-10.105c9.12 0 17.865 3.635 24.314 10.105a34.559 34.559 0 0 1 10.07 24.395v193.223zM99.385 410a34.326 34.326 0 0 1-24.314-10.105A34.559 34.559 0 0 1 65 375.5v-276C65 80.446 80.395 65 99.385 65h275.077c18.99 0 34.384 15.446 34.384 34.5 0 19.054-15.394 34.5-34.384 34.5H133.769v241.5c0 9.15-3.622 17.925-10.07 24.395A34.326 34.326 0 0 1 99.384 410z m825.23 552H649.538c-18.99 0-34.384-15.446-34.384-34.5 0-19.054 15.394-34.5 34.384-34.5h240.693V651.5c0-19.054 15.394-34.5 34.384-34.5 18.99 0 34.385 15.446 34.385 34.5v276c0 19.054-15.395 34.5-34.385 34.5z","p-id":"2537"})],-1)),po=[_o],vo=Te(()=>T("svg",{t:"1635669877743",class:"icon fill-light",viewBox:"0 0 1280 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5386",width:"1.2em",height:"1.2em"},[T("path",{d:"M1088 0a192 192 0 0 1 191.68 180.736L1280 192v640a192 192 0 0 1-180.736 191.68L1088 1024H192a192 192 0 0 1-191.68-180.736L0 832V192A192 192 0 0 1 180.736 0.32L192 0h896z m0 128H192a64 64 0 0 0-63.552 56.512L128 192v640a64 64 0 0 0 56.512 63.552L192 896h896a64 64 0 0 0 63.552-56.512L1152 832V192a64 64 0 0 0-56.512-63.552L1088 128zM444.224 341.824A12.8 12.8 0 0 1 448 350.912v322.176a12.8 12.8 0 0 1-21.824 9.088L264.96 520.96a12.8 12.8 0 0 1 0-18.048L426.24 341.76a12.8 12.8 0 0 1 18.048 0z m391.552 0a12.8 12.8 0 0 1 14.72-2.368l3.328 2.368L1015.04 503.04a12.8 12.8 0 0 1 2.368 14.72l-2.368 3.328-161.152 161.152a12.8 12.8 0 0 1-21.376-5.696L832 673.088V350.912a12.8 12.8 0 0 1 3.776-9.088z","p-id":"5387"})],-1)),mo=[vo],go=Te(()=>T("svg",{t:"1635670372868",class:"icon fill-light",viewBox:"0 0 1170 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5631",width:"1.2em",height:"1.2em"},[T("path",{d:"M950.838629 1023.9802H219.424714C99.052065 1023.9802 0 924.928495 0 804.555486V219.424714C0 99.052065 99.051705 0 219.424714 0h731.413915c120.372469 0 219.424714 99.051705 219.424714 219.424714v585.130772c0 120.372649-99.051705 219.424714-219.424714 219.424714zM221.055483 99.665853c-39.458469-1.828944-126.235314 47.798246-119.84076 121.200633l-0.51911 583.689c-2.786526 45.333915 75.619943 124.659085 118.727841 119.080634l729.972143 0.407332c43.883503 6.211859 122.34523-71.850457 117.666402-119.705942l-0.054539-583.852796c5.147179-43.160817-71.739939-123.128215-117.066834-120.058735l-728.884963-0.760306z","p-id":"5632"}),T("path",{d:"M897.444472 713.129872a54.139703 54.139703 0 0 1-36.570786-13.896989l-166.031097-146.282783c-11.926567-10.411717-18.780473-25.492902-18.780473-41.324853s6.853906-30.913316 18.780473-41.325033l166.031097-146.282782a55.197182 55.197182 0 0 1 36.570786-13.85811c30.272529 0 55.182962 24.910433 55.182962 55.182962 0 15.796491-6.782808 30.856437-18.612356 41.325033l-119.951818 105.323503 119.220492 105.323683c11.677632 10.403437 18.365941 25.319745 18.365941 40.95928 0 30.093252-24.762836 54.856089-54.856089 54.856089h-0.080638 0.731506z m-604.879986 0h-0.080639c-30.093072 0-54.856089-24.762836-54.856088-54.856089 0-15.639535 6.688309-30.555843 18.365941-40.95928l119.951997-105.323683-119.951997-105.323503c-11.829549-10.468596-18.612176-25.528541-18.612176-41.325033 0-30.272529 24.910433-55.182962 55.182962-55.182962a55.196462 55.196462 0 0 1 36.570606 13.85811l166.031097 146.282782c11.926747 10.411717 18.780653 25.493082 18.780653 41.325033s-6.853906 30.913136-18.780653 41.324853l-166.031097 146.282783a54.869588 54.869588 0 0 1-36.570606 13.896989z","p-id":"5633"})],-1)),xo=[go],Eo=Te(()=>T("svg",{t:"1635680402410",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1394",width:"1.2em",height:"1.2em"},[T("path",{d:"M908.8 896H115.2c-22.4 0-40-17.6-40-40v-688C75.2 145.6 92.8 128 115.2 128h792c22.4 0 40 17.6 40 40v688c1.6 22.4-16 40-38.4 40zM155.2 816h712V208H155.2v608z","p-id":"1395"}),T("path",{d:"M257.6 524.8c-22.4 0-40-17.6-40-40v-176c0-22.4 17.6-40 40-40h176c22.4 0 40 17.6 40 40s-17.6 40-40 40h-136v136c0 22.4-17.6 40-40 40zM766.4 755.2h-176c-22.4 0-40-17.6-40-40s17.6-40 40-40h136v-136c0-22.4 17.6-40 40-40s40 17.6 40 40v176c0 22.4-17.6 40-40 40z","p-id":"1396"})],-1)),yo=[Eo],bo=Te(()=>T("svg",{t:"1635680173087",class:"icon fill-light",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1194",width:"1.2em",height:"1.2em"},[T("path",{d:"M908.8 896H115.2c-22.4 0-40-17.6-40-40v-688C75.2 145.6 92.8 128 115.2 128h792c22.4 0 40 17.6 40 40v688c1.6 22.4-16 40-38.4 40zM155.2 816h712V208H155.2v608z","p-id":"1195"}),T("path",{d:"M433.6 268.8c22.4 0 40 17.6 40 40v176c0 22.4-17.6 40-40 40h-176c-22.4 0-40-17.6-40-40s17.6-40 40-40h136v-136c0-22.4 17.6-40 40-40zM590.4 499.2h176c22.4 0 40 17.6 40 40s-17.6 40-40 40h-136v136c0 22.4-17.6 40-40 40s-40-17.6-40-40v-176c0-22.4 17.6-40 40-40z","p-id":"1196"})],-1)),So=[bo],Ao=bt('<div class="btn dropup" data-v-6161bfd3><button type="button" class="btn text-light btn-sm" data-toggle="dropdown" data-v-6161bfd3> 1080P </button><div class="dropdown-menu dropdown-menu-right bg-dark" data-v-6161bfd3><button class="dropdown-item text-light small" data-v-6161bfd3> 1080P60 </button><button class="dropdown-item active text-light small" data-v-6161bfd3> 1080P </button><button class="dropdown-item text-light small" data-v-6161bfd3>720P</button><button class="dropdown-item text-light small" data-v-6161bfd3>480P</button></div></div>',1),wo={props:{title:String,anchor:String,video_src:String,display_mode:String,danmakus:[]},emits:["switchWidescreen"],setup(g,{emit:e}){var t=null,_=ls();const r=H(!1),h=H(!1);H(!1);const x=H(!1),y=H(!1),E=H(!0),b=H(100),u=H(null),l=H(null);We(()=>{Ne(()=>{t=new Ve({container:l.value,comments:[]}),_.listenTo(u.value,()=>{Ne(()=>{t.resize()})}),window.addEventListener("fullscreenchange",()=>{document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||(h.value=!1)})})});function o(a){b.value=Number(a)}Nt(()=>{t.destroy(),_.uninstall()});function v(){r.value=!1}function s(a){e("switchWidescreen",a),x.value=a}function f(a){h.value=a,a?u.value.requestFullscreen?u.value.requestFullscreen():u.value.mozRequestFullScreen?u.value.mozRequestFullScreen():u.value.msRequestFullscreen?u.value.msRequestFullscreen():u.value.oRequestFullscreen&&u.value.oRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oRequestFullscreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function p(){r.value=!0}let d=null;function i(){d!=null&&c(),E.value=!0,d=setTimeout(()=>{E.value=!1,d=null},3e3)}function c(){clearTimeout(d),d=null,E.value=!1}return(a,n)=>(te(),se("div",null,[T("div",{ref:(m,S)=>{S.playerContainerElement=m,u.value=m},class:Pe(["w-100 h-100",{"page-fullscreen":y.value}]),style:Wt({position:y.value?"fixed":"relative"})},[Me(Gt,{volume:b.value/100,playing:r.value,video_src:g.video_src},null,8,["volume","playing","video_src"]),T("div",{class:"position-absolute m-0",style:{"z-index":"1",left:"0",top:"0%",bottom:"0%",right:"0%"},ref:(m,S)=>{S.danmakuContainerElement=m,l.value=m}},null,512),T("div",{class:"position-absolute m-0 overflow-hidden",style:{"z-index":"2",left:"0",top:"0%",bottom:"0%",right:"0%"},onMousemove:i,onMouseleave:c},[T("div",Qs,[eo,g.display_mode=="top tv"?(te(),se("div",to,no)):Oe("",!0),T("div",{class:Pe(["d-flex justify-content-between player-bottom-controls",{"player-bottom-controls-show":E.value}])},[T("div",io,[r.value?(te(),se("button",{key:0,class:"btn",onClick:v},oo)):Oe("",!0),r.value?Oe("",!0):(te(),se("button",{key:1,class:"btn",onClick:p},uo)),lo,Me(Zs,{volume:b.value,onVolumeChange:o},null,8,["volume"])]),T("div",fo,[h.value?Oe("",!0):(te(),se("button",{key:0,class:"btn",onClick:n[0]||(n[0]=m=>f(!0))},ho)),h.value?(te(),se("button",{key:1,class:"btn",onClick:n[1]||(n[1]=m=>f(!1))},po)):Oe("",!0),x.value?Oe("",!0):(te(),se("button",{key:2,class:"btn",onClick:n[2]||(n[2]=m=>s(!0))},mo)),x.value?(te(),se("button",{key:3,class:"btn",onClick:n[3]||(n[3]=m=>s(!1))},xo)):Oe("",!0),y.value?Oe("",!0):(te(),se("button",{key:4,class:"btn",onClick:n[4]||(n[4]=m=>y.value=!0)},yo)),y.value?(te(),se("button",{key:5,class:"btn",onClick:n[5]||(n[5]=m=>y.value=!1)},So)):Oe("",!0),Ao])],2)])],32)],6)]))}};var Lo=Ke(wo,[["__scopeId","data-v-6161bfd3"]]);const Co={class:"container"},Ro={class:"row"},Do=Be({setup(g){const e=H(!1),t=H(),_=H();let r=0;const x=H("http://byons.tpddns.cn:62407/linktv?app=linktv&stream="+r);return We(()=>{Ne(()=>{console.log("live player on mounted"),new Ft().get(rt.currentRoute.value.params.id).then(E=>{r=E.id,_.value=E.director,t.value=E.name,x.value=E.flvAddress})})}),(y,E)=>(te(),se("div",null,[Me(hr),T("div",Co,[T("div",Ro,[Me(Lo,{class:Pe(["col-12",{"col-md-9":!e.value}]),title:t.value,anchor:_.value,video_src:x.value,onSwitchWidescreen:E[0]||(E[0]=b=>e.value=b),ref:(b,u)=>{u.playerRef=b}},null,8,["title","anchor","video_src","class"])])])]))}});const Ge=g=>(it("data-v-5c4a6ee0"),g=g(),st(),g),Oo={class:"position-fixed w-100 h-100 bg-translucent"},To={class:"d-flex w-100 h-100 justify-content-center"},Po={class:"align-self-center d-flex flex-column justify-content-center bg-light px-5 py-4 rounded"},Io=Ge(()=>T("span",{"aria-hidden":"true"},"\xD7",-1)),Fo=[Io],Mo=Ge(()=>T("label",{for:"user-name",class:"mb-0 mt-3"},"\u7528\u6237\u540D",-1)),Bo={class:"invalid-feedback"},ko={class:""},Uo=Ge(()=>T("label",{for:"email",class:"mb-0 mt-3 form-text"},"Email",-1)),jo={class:"input-group"},No={class:"input-group-append"},Vo=["disabled"],Wo={class:"invalid-feedback"},zo=Ge(()=>T("label",{for:"email-authcode",class:"mb-0 mt-3 form-text"},"Email\u9A8C\u8BC1\u7801",-1)),Go={class:"invalid-feedback"},$o=Ge(()=>T("label",{for:"password",class:"mb-0 mt-3"},"\u5BC6\u7801",-1)),Ko={class:"invalid-feedback"},Ho=Ge(()=>T("label",{for:"repeat-password",class:"mb-0 mt-3"},"\u91CD\u590D\u5BC6\u7801",-1)),Jo={class:"invalid-feedback"},Xo=Ge(()=>T("br",null,null,-1)),Yo=Be({setup(g){const e=H(""),t=H(""),_=H(""),r=H(""),h=H(""),x=H(""),y=H(""),E=H(""),b=H(""),u=H("");function l(){if(e.value.length==0){t.value="";return}new Ye().validName(e.value).then(S=>{t.value=S?"":"\u7528\u6237\u540D\u5DF2\u7ECF\u5B58\u5728"})}function o(){if(_.value.length==0){r.value="";return}new Ye().validEmail(_.value).then(S=>{r.value=S?"":"\u8BE5\u90AE\u7BB1\u5DF2\u88AB\u6CE8\u518C"}).catch(S=>{r.value=S.errors.email[0]})}const v=H(!1),s=H("\u9A8C\u8BC1");var f=120;function p(){if(r.value!=""||_.value=="")return;new Ye().sendGuestEmailAuthCode(_.value).then(()=>{v.value=!0,f=120,s.value=f.toString();let S=setInterval(()=>{--f,s.value=f.toString(),f==0&&(clearInterval(S),s.value="\u9A8C\u8BC1")},1e3)}).catch(S=>{r.value=S.errors.email[0]})}function d(){}function i(){if(y.value.length==0){b.value="";return}var m=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z_]{8,128}$/;b.value=m.test(y.value)?"":"\u5BC6\u7801\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934\uFF0C\u6700\u5C118\u4F4D"}function c(){if(b.value!=""&&(y.value.length==0||E.value.length==0)){u.value="";return}u.value=y.value==E.value?"":"\u5BC6\u7801\u4E0D\u4E00\u81F4"}function a(){if(c(),u.value.length>0)return;new Ye().signup({name:e.value,email:_.value,emailAuthCode:h.value,password:y.value}).then(S=>{}).catch(S=>{const w=S.errors;t.value=w.Name!==void 0?w.Name[0]:"",r.value=w.Email!==void 0?w.Email[0]:"",x.value=w.EmailAuthCode!==void 0?w.EmailAuthCode[0]:"",b.value=w.Password!==void 0?w.Password[0]:""})}function n(){rt.push("/home")}return(m,S)=>(te(),se("div",Oo,[T("div",To,[T("div",Po,[T("button",{type:"button",class:"close align-self-end","aria-label":"Close",onClick:n},Fo),T("div",null,[Mo,ke(T("input",{id:"user-name",class:Pe(["form-control",t.value==""?"":"is-invalid"]),type:"text","onUpdate:modelValue":S[0]||(S[0]=w=>e.value=w),onBlur:l},null,34),[[Ue,e.value]]),T("div",Bo,we(t.value),1)]),T("div",ko,[Uo,T("div",jo,[ke(T("input",{id:"email",type:"text",class:Pe(["form-control",r.value==""?"":"is-invalid"]),"onUpdate:modelValue":S[1]||(S[1]=w=>_.value=w),onBlur:o},null,34),[[Ue,_.value]]),T("span",No,[T("button",{class:"btn",onClick:p,disabled:v.value},we(s.value),9,Vo)]),T("div",Wo,we(r.value),1)])]),T("div",null,[zo,ke(T("input",{id:"email-authcode",type:"text",class:Pe(["form-control",x.value==""?"":"is-invalid"]),"onUpdate:modelValue":S[2]||(S[2]=w=>h.value=w),onBlur:d},null,34),[[Ue,h.value]]),T("div",Go,we(x.value),1)]),T("div",null,[$o,ke(T("input",{id:"password",class:Pe(["form-control",b.value==""?"":"is-invalid"]),type:"password","onUpdate:modelValue":S[3]||(S[3]=w=>y.value=w),onBlur:i},null,34),[[Ue,y.value]]),T("div",Ko,we(b.value),1)]),T("div",null,[Ho,ke(T("input",{id:"repeat-password",class:Pe(["form-control",u.value==""?"":"is-invalid"]),type:"password","onUpdate:modelValue":S[4]||(S[4]=w=>E.value=w),onBlur:c},null,34),[[Ue,E.value]]),T("div",Jo,we(u.value),1)]),Xo,T("button",{class:"btn btn-primary w-25",onClick:a},"\u6CE8\u518C")])])]))}});var qo=Ke(Yo,[["__scopeId","data-v-5c4a6ee0"]]);const Zo=[{path:"/live/:id",component:Do},{path:"/home",component:us},{path:"/",redirect:"home"},{path:"/signup",component:qo}],rt=Cr({history:Rr(),routes:Zo}),yr=Dr(Ir);yr.use(rt);yr.mount("#app");
