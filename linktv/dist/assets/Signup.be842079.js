import{d as j,E as A,r as t,a as z,c as R,b as e,w as _,y as f,C as h,t as d,p as $,f as Z}from"./vendor.b393d787.js";import{_ as G,U as w,R as D}from"./index.800d8c56.js";const o=C=>($("data-v-37871400"),C=C(),Z(),C),L={class:"position-fixed w-100 h-100 bg-translucent"},T={class:"d-flex w-100 h-100 justify-content-center"},q={class:"align-self-center d-flex flex-column justify-content-center bg-light px-5 py-4 rounded"},H=o(()=>e("span",{"aria-hidden":"true"},"\xD7",-1)),J=[H],K=o(()=>e("label",{for:"user-name",class:"mb-0 mt-3"},"\u7528\u6237\u540D",-1)),O={class:"invalid-feedback"},Q={class:""},W=o(()=>e("label",{for:"email",class:"mb-0 mt-3 form-text"},"Email",-1)),X={class:"input-group"},Y={class:"input-group-append"},ee=["disabled"],le={class:"invalid-feedback"},ae=o(()=>e("label",{for:"email-authcode",class:"mb-0 mt-3 form-text"},"Email\u9A8C\u8BC1\u7801",-1)),te={class:"invalid-feedback"},se=o(()=>e("label",{for:"password",class:"mb-0 mt-3"},"\u5BC6\u7801",-1)),ue={class:"invalid-feedback"},ne=o(()=>e("label",{for:"repeat-password",class:"mb-0 mt-3"},"\u91CD\u590D\u5BC6\u7801",-1)),oe={class:"invalid-feedback"},ie=o(()=>e("br",null,null,-1)),re=j({setup(C){const I=A("errorModal"),k=A("userStore"),v=t(""),c=t(""),u=t(""),s=t(""),g=t(""),E=t(""),n=t(""),b=t(""),i=t(""),p=t("");function S(){if(v.value.length==0){c.value="";return}new w().validName(v.value).then(l=>{c.value=l?"":"\u7528\u6237\u540D\u5DF2\u7ECF\u5B58\u5728"})}function F(){if(u.value.length==0){s.value="";return}new w().validEmail(u.value).then(l=>{s.value=l?"":"\u8BE5\u90AE\u7BB1\u5DF2\u88AB\u6CE8\u518C"}).catch(l=>{s.value=l.errors.email[0]})}const x=t(!1),B=t("\u9A8C\u8BC1");var m=120;function M(){if(s.value!=""||u.value=="")return;new w().sendGuestEmailAuthCode(u.value).then(()=>{x.value=!0,m=120,B.value=m.toString();let l=setInterval(()=>{--m,B.value=m.toString(),m==0&&(clearInterval(l),B.value="\u9A8C\u8BC1")},1e3)}).catch(l=>{s.value=l.errors.email[0]})}function U(){}function N(){if(n.value.length==0){i.value="";return}var r=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z_]{8,128}$/;i.value=r.test(n.value)?"":"\u5BC6\u7801\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934\uFF0C\u6700\u5C118\u4F4D"}function y(){if(i.value!=""&&(n.value.length==0||b.value.length==0)){p.value="";return}p.value=n.value==b.value?"":"\u5BC6\u7801\u4E0D\u4E00\u81F4"}function P(){if(y(),p.value.length>0)return;new w().signup({name:v.value,email:u.value,emailAuthCode:g.value,password:n.value}).then(l=>{k.login(l),D.push("/home")}).catch(l=>{const a=l.errors;c.value=a.Name!==void 0?a.Name[0]:"",s.value=a.Email!==void 0?a.Email[0]:"",E.value=a.EmailAuthCode!==void 0?a.EmailAuthCode[0]:"",i.value=a.Password!==void 0?a.Password[0]:""}).catch(()=>{I.value.show()})}function V(){D.push("/home")}return(r,l)=>(z(),R("div",L,[e("div",T,[e("div",q,[e("button",{type:"button",class:"close align-self-end","aria-label":"Close",onClick:V},J),e("div",null,[K,_(e("input",{id:"user-name",class:h(["form-control",c.value==""?"":"is-invalid"]),type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>v.value=a),onBlur:S},null,34),[[f,v.value]]),e("div",O,d(c.value),1)]),e("div",Q,[W,e("div",X,[_(e("input",{id:"email",type:"text",class:h(["form-control",s.value==""?"":"is-invalid"]),"onUpdate:modelValue":l[1]||(l[1]=a=>u.value=a),onBlur:F},null,34),[[f,u.value]]),e("span",Y,[e("button",{class:"btn",onClick:M,disabled:x.value},d(B.value),9,ee)]),e("div",le,d(s.value),1)])]),e("div",null,[ae,_(e("input",{id:"email-authcode",type:"text",class:h(["form-control",E.value==""?"":"is-invalid"]),"onUpdate:modelValue":l[2]||(l[2]=a=>g.value=a),onBlur:U},null,34),[[f,g.value]]),e("div",te,d(E.value),1)]),e("div",null,[se,_(e("input",{id:"password",class:h(["form-control",i.value==""?"":"is-invalid"]),type:"password","onUpdate:modelValue":l[3]||(l[3]=a=>n.value=a),onBlur:N},null,34),[[f,n.value]]),e("div",ue,d(i.value),1)]),e("div",null,[ne,_(e("input",{id:"repeat-password",class:h(["form-control",p.value==""?"":"is-invalid"]),type:"password","onUpdate:modelValue":l[4]||(l[4]=a=>b.value=a),onBlur:y},null,34),[[f,b.value]]),e("div",oe,d(p.value),1)]),ie,e("button",{class:"btn btn-primary w-25",onClick:P},"\u6CE8\u518C")])])]))}});var ce=G(re,[["__scopeId","data-v-37871400"]]);export{ce as default};
